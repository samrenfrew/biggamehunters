function lineStyleFn(e){return"object"==typeof chartJSLineStyle[e]?chartJSLineStyle[e]:chartJSLineStyle.solid}function roundToWithThousands(e,a,t){var i=1*unFormat(e,a);if("number"==typeof i&&"none"!=t){var l;if(t<=0)l=-t,i=+(Math.round(i+"e+"+l)+"e-"+l);else{l=t;var n="1e+"+l;i=+Math.round(i/n)*n}}return i=fmtChartJS(e,i,"none")}function unFormat(e,a){if("."==e.decimalSeparator&&""==e.thousandSeparator||"string"!=typeof a)return a;var t=""+a;if(""!=e.thousandSeparator)for(;t.indexOf(e.thousandSeparator)>=0;)t=""+t.replace(e.thousandSeparator,"");return"."!=e.decimalSeparator&&(t=""+t.replace(e.decimalSeparator,".")),1*t}function fmtChartJSPerso(e,a,t){switch(t){case"SampleJS_Format":"number"==typeof a?return_value="My Format : "+a.toString()+" $":return_value=a+"XX";break;case"Change_Month":"string"==typeof a?return_value=a.toString()+" 2014":return_value=a.toString()+"YY";break;default:return_value=a}return return_value}function fmtChartJS(e,a,t){var i;if("notformatted"==t)i=a;else if("none"!=t&&"money"!=t||"number"!=typeof a)i="none"!=t&&"notformatted"!=t?fmtChartJSPerso(e,a,t):a;else{if("none"!=e.roundNumber){var l;if(e.roundNumber<=0)l=-e.roundNumber,a=+(Math.round(a+"e+"+l)+"e-"+l);else{l=e.roundNumber;var n="1e+"+l;a=+Math.round(a/n)*n}}if("."!=e.decimalSeparator||""!=e.thousandSeparator){if(i=a.toString().replace(/\./g,e.decimalSeparator),""!=e.thousandSeparator){var o=i,s="",r=o.indexOf(e.decimalSeparator);r>=0&&(s=o.substring(r+1,o.length),s=s.split("").reverse().join(""),o=o.substring(0,r)),o=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e.thousandSeparator),s=s.split("").reverse().join(""),i=o,""!=s&&(i=i+e.decimalSeparator+s)}}else i=a;"money"==t&&("before"==e.currencyPosition?i=e.currency+i:i+=e.currency)}return i}function addParameters2Function(data,fctName,fctList){var mathFunctions={mean:{data:data.data,datasetNr:data.v11},varianz:{data:data.data,datasetNr:data.v11},stddev:{data:data.data,datasetNr:data.v11},cv:{data:data.data,datasetNr:data.v11},median:{data:data.data,datasetNr:data.v11}};if(dif=!1,"Dif"==fctName.substr(-3)&&(fctName=fctName.substr(0,fctName.length-3),dif=!0),"function"==typeof eval(fctName)){var parameter=eval(fctList+"."+fctName);return dif?data.v3-window[fctName](parameter):window[fctName](parameter)}return null}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function tmplbis(e,a,t){return newstr=e,newstr.substr(0,t.templatesOpenTag.length)==t.templatesOpenTag&&(newstr="<%="+newstr.substr(t.templatesOpenTag.length,newstr.length-t.templatesOpenTag.length)),newstr.substr(newstr.length-t.templatesCloseTag.length,t.templatesCloseTag.length)==t.templatesCloseTag&&(newstr=newstr.substr(0,newstr.length-t.templatesCloseTag.length)+"%>"),tmplter(newstr,a)}function tmplter(e,a){for(var t=["mean","varianz","stddev","cv","median"],i=new RegExp("<%=((?:(?:.*?)\\W)??)((?:"+t.join("|")+")(?:Dif)?)\\(([0-9]*?)\\)(.*?)%>","g");i.test(e);)e=e.replace(i,function(e,t,i,l,n){var o;o=l?l:2;var s=addParameters2Function(a,i,"mathFunctions");return isNumber(s)?"<%="+t+Math.round(Math.pow(10,o)*s)/Math.pow(10,o)+n+"%>":"<%= %>"});var l=/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e)?cachebis[e]=cachebis[e]||tmplter(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\n]/g,"\\n").replace(/[\t]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return a?l(a):l}function createCursorDiv(e){if(0==cursorDivCreated){var a=document.createElement(annotate_shape);a.id=annotate_shape,a.style.position="absolute",document.body.appendChild(a),cursorDivCreated=!0}}function addResponsiveChart(e,a,t,i){0==initChartJsResize&&(window.addEventListener?window.addEventListener("resize",chartJsResize):window.attachEvent("resize",chartJsResize)),jsGraphResize[jsGraphResize.length]=[e,a.tpchart,a,t,i]}function getMaximumWidth(e){return null!=e.parentNode&&void 0!=e.parentNode&&(container=e.parentNode),container.clientWidth}function getMaximumHeight(e){return null!=e.parentNode&&void 0!=e.parentNode&&(container=e.parentNode),container.clientHeight}function resizeCtx(e,a){if(isIE()<9&&0!=isIE())return!0;if(a.responsive){e.canvas.style.width=e.prevStyleWidth,e.canvas.style.height=e.prevStyleHeight,"undefined"==typeof a.maintainAspectRatio&&(a.maintainAspectRatio=!0),"undefined"==typeof a.responsiveMinWidth&&(a.responsiveMinWidth=0),"undefined"==typeof a.responsiveMinHeight&&(a.responsiveMinHeight=0),"undefined"==typeof a.responsiveMaxWidth&&(a.responsiveMaxWidth=9999999),"undefined"==typeof a.responsiveMaxHeight&&(a.responsiveMaxHeight=9999999);var t;t="undefined"!=typeof e.vctx?e.vctx.canvas:e.canvas,"undefined"==typeof e.aspectRatio&&(e.aspectRatio=t.width/t.height,1*a.forcedAspectRatio&&(e.aspectRatio=1/a.forcedAspectRatio));var i,l;if(window.devicePixelRatio>1&&"undefined"!=typeof e.vWidth){var n=window.getComputedStyle(e.canvas).getPropertyValue("width");i=n.substring(0,n.indexOf("px"))}else i="undefined"==typeof e.vWidth?getMaximumWidth(t):e.canvas.width;i=Math.min(a.responsiveMaxWidth,Math.max(a.responsiveMinWidth,i)),l="undefined"==typeof e.vWidth?a.maintainAspectRatio?i/e.aspectRatio:getMaximumHeight(t):a.maintainAspectRatio?i/e.aspectRatio:e.canvas.height,l=Math.min(a.responsiveMaxHeight,Math.max(a.responsiveMinHeight,l)),"undefined"==typeof e.DefaultchartTextScale&&(e.DefaultchartTextScale=a.chartTextScale),"undefined"==typeof e.DefaultchartLineScale&&(e.DefaultchartLineScale=a.chartLineScale),"undefined"==typeof e.DefaultchartSpaceScale&&(e.DefaultchartSpaceScale=a.chartSpaceScale),"undefined"!=typeof e.chartTextScale&&a.responsiveScaleContent&&(e.chartTextScale=e.DefaultchartTextScale*(i/e.initialWidth),e.chartLineScale=e.DefaultchartLineScale*(i/e.initialWidth),e.chartSpaceScale=e.DefaultchartSpaceScale*(i/e.initialWidth)),window.devicePixelRatio>1&&(e.canvas.style.width=i+"px",e.canvas.style.height=l+"px"),e.canvas.height=l*Math.max(1,window.devicePixelRatio),e.canvas.width=i*Math.max(1,window.devicePixelRatio),e.scale(Math.max(1,window.devicePixelRatio),Math.max(1,window.devicePixelRatio))}else window.devicePixelRatio>1?("undefined"==typeof e.original_width&&(e.original_width=e.canvas.width,e.original_height=e.canvas.height),e.canvas.style.width=e.canvas.width+"px",1*a.forcedAspectRatio&&(e.canvas.height=a.forcedAspectRatio*e.canvas.width),e.canvas.style.height=e.canvas.height+"px",e.canvas.height=e.canvas.height*window.devicePixelRatio,e.canvas.width=e.canvas.width*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio)):1*a.forcedAspectRatio&&(e.canvas.height=a.forcedAspectRatio*e.canvas.width)}function chartJsResize(){for(var e=0;e<jsGraphResize.length;e++)0==jsGraphResize[e][2].firstPass||(9==jsGraphResize[e][2].firstPass?(jsGraphResize[e][2].firstPass=2,redrawGraph(jsGraphResize[e][2],jsGraphResize[e][3],jsGraphResize[e][4])):jsGraphResize[e][2].firstPass<10&&(jsGraphResize[e][2].firstPass+=10))}function testRedraw(e,a,t){return e.firstPass>10&&(e.firstPass=2,redrawGraph(e,a,t),!0)}function updateChart(e,a,t,i,l){if(9==e.firstPass){if(e.runanimationcompletefunction=l,i?e.firstPass=1:e.firstPass=2,t.responsive)for(var n=0;n<jsGraphResize.length;n++)jsGraphResize[n][2].ChartNewId==e.ChartNewId&&(jsGraphResize[n][3]=a,jsGraphResize[n][4]=t);redrawGraph(e,a,t)}}function redrawGraph(ctx,data,config){if(2!=ctx.firstPass&&9!=ctx.firstPass||isIE()<9&&0!=isIE()||navigator.userAgent.indexOf("Safari")!=-1){if("number"==typeof ctx.vWidth){var canvasWidth=window.getComputedStyle(ctx.canvas).getPropertyValue("width");ctx.canvas.width=canvasWidth.substring(0,canvasWidth.indexOf("px"))}var myGraph=new Chart(ctx);eval("myGraph."+ctx.tpchart+"(data,config);")}else{var OSC,tmpctx;if(OSC=document.createElement("canvas"),tmpctx=OSC.getContext("2d"),tmpctx.vctx=ctx,OSC.width=ctx.canvas.width,OSC.height=ctx.canvas.height,"number"==typeof ctx.vWidth){var canvasWidth=window.getComputedStyle(ctx.canvas).getPropertyValue("width");tmpctx.canvas.width=canvasWidth.substring(0,canvasWidth.indexOf("px")),ctx.canvas.width=tmpctx.canvas.width,tmpctx.vWidth=ctx.vWidth}tmpctx.ChartNewId=ctx.ChartNewId,tmpctx.prevStyleWidth=ctx.prevStyleWidth,tmpctx.prevStyleHeight=ctx.prevStyleHeight,tmpctx.tpchart=ctx.tpchart,tmpctx.tpdata=ctx.tpdata,tmpctx.initialWidth=ctx.initialWidth,tmpctx.chartTextScale=ctx.chartTextScale,tmpctx.chartLineScale=ctx.chartLineScale,tmpctx.chartSpaceScale=ctx.chartSpaceScale,tmpctx.firstPass=ctx.firstPass,tmpctx.runanimationcompletefunction=ctx.runanimationcompletefunction,tmpctx.aspectRatio=ctx.aspectRatio,tmpctx.widthAtSetMeasures=ctx.widthAtSetMeasures,tmpctx.heightAtSetMeasures=ctx.heightAtSetMeasures,tmpctx.pieces_drawn=ctx.pieces_drawn;var myGraph=new Chart(tmpctx);eval("myGraph."+tmpctx.tpchart+"(data,config);"),"number"==typeof ctx.vWidth&&(ctx.vWidth=tmpctx.vWidth),ctx.tpchart=tmpctx.tpchart,ctx.tpdata=tmpctx.tpdata,ctx.initialWidth=tmpctx.initialWidth,ctx.chartTextScale=tmpctx.chartTextScale,ctx.chartLineScale=tmpctx.chartLineScale,ctx.chartSpaceScale=tmpctx.chartSpaceScale,ctx.firstPass=tmpctx.firstPass,ctx.runanimationcompletefunction=tmpctx.runanimationcompletefunction,ctx.ChartNewId=tmpctx.ChartNewId,ctx.prevStyleWidth=tmpctx.prevStyleWidth,ctx.prevStyleHeight=tmpctx.prevStyleHeight,ctx.aspectRatio=tmpctx.aspectRatio,ctx.widthAtSetMeasures=tmpctx.widthAtSetMeasures,ctx.heightAtSetMeasures=tmpctx.heightAtSetMeasures,ctx.canvas.width=tmpctx.canvas.width,ctx.canvas.height=tmpctx.canvas.height,ctx.pieces_drawn=tmpctx.pieces_drawn,ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height),ctx.drawImage(OSC,0,0)}}function checkBrowser(){return this.ver=navigator.appVersion,this.dom=document.getElementById?1:0,this.ie5=this.ver.indexOf("MSIE 5")>-1&&this.dom?1:0,this.ie4=document.all&&!this.dom?1:0,this.ns5=this.dom&&parseInt(this.ver)>=5?1:0,this.ns4=document.layers&&!this.dom?1:0,this.bw=this.ie5||this.ie4||this.ns4||this.ns5,this}function cursorInit(){scrolled=bw.ns4||bw.ns5?"window.pageYOffset":"document.body.scrollTop",bw.ns4&&document.captureEvents(Event.MOUSEMOVE)}function makeCursorObj(config,obj,nest){return createCursorDiv(config),nest=nest?"document."+nest+".":"",this.css=bw.dom?document.getElementById(obj).style:bw.ie4?document.all[obj].style:bw.ns4?eval(nest+"document.layers."+obj):0,this.moveIt=b_moveIt,cursorInit(),this}function b_moveIt(e,a){this.x=e,this.y=a,this.css.left=this.x+"px",this.css.top=this.y+"px"}function isIE(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")!=-1&&parseInt(e.split("msie")[1])}function mergeChartConfig(e,a){var t={};for(var i in e)t[i]=e[i];for(var l in a)t[l]=a[l];return t}function sleep(e){var a=new Date;for(a.setTime(a.getTime()+e);(new Date).getTime()<a.getTime(););}function saveCanvas(e,a,t){cvSave=e.getImageData(0,0,e.canvas.width,e.canvas.height);var i={savePng:!1,annotateDisplay:!1,animation:!1,dynamicDisplay:!1};savePngConfig1=mergeChartConfig(t,i),savePngConfig1.clearRect=!1,redrawGraph(e,a,savePngConfig1);var l;if("NewWindow"==t.savePngOutput&&(l=e.canvas.toDataURL(),e.putImageData(cvSave,0,0),window.open(l,"_blank")),"CurrentWindow"==t.savePngOutput&&(l=e.canvas.toDataURL(),e.putImageData(cvSave,0,0),window.location.href=l),"Save"==t.savePngOutput){l=e.canvas.toDataURL();var n=document.createElement("a");n.href=l,n.download=t.savePngName+".png",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}function dynamicFunction(e,a,t){if(isIE()<9&&0!=isIE())return!0;if(a.dynamicDisplay&&0==t.firstPass){if(""==t.canvas.id){var i=new Date,l=i.getTime();t.canvas.id="Canvas_"+l}if("undefined"==typeof dynamicDisplay[t.canvas.id]&&(dynamicDisplayList[dynamicDisplayList.length]=t.canvas.id,dynamicDisplay[t.canvas.id]=[t,e,a],window.onscroll=scrollFunction),!isScrolledIntoView(t.canvas,a))return!1}return!0}function isScrolledIntoView(e,a){var t,i,l=0,n=0;for("undefined"==typeof e.recomputedHeight&&(window.devicePixelRatio?(e.recomputedHeight=e.height/window.devicePixelRatio,e.recomputedWidth=e.width/window.devicePixelRatio):(e.recomputedHeight=e.height,e.recomputedWidth=e.width)),t=e.recomputedWidth,i=e.recomputedHeight,elem=e;elem;)l+=elem.offsetLeft+elem.clientLeft,n+=elem.offsetTop+elem.clientTop,elem=elem.offsetParent;return l+t*a.dynamicDisplayXPartOfChart>=window.pageXOffset&&l+t*a.dynamicDisplayXPartOfChart<=window.pageXOffset+window.innerWidth&&n+i*a.dynamicDisplayYPartOfChart>=window.pageYOffset&&n+i*a.dynamicDisplayYPartOfChart<=window.pageYOffset+window.innerHeight}function scrollFunction(){for(var e=0;e<dynamicDisplayList.length;e++)0==dynamicDisplay[dynamicDisplayList[e]][0].firstPass&&redrawGraph(dynamicDisplay[dynamicDisplayList[e]][0],dynamicDisplay[dynamicDisplayList[e]][1],dynamicDisplay[dynamicDisplayList[e]][2])}function clearAnnotate(e){jsGraphAnnotate[e]=[],jsTextMousePos[e]=[]}function getMousePos(e,a){var t=e.getBoundingClientRect();return{x:a.clientX-t.left,y:a.clientY-t.top}}function isHighLighted(e,a,t,i,l,n,o){var s;if("object"==typeof t.special)for(s=t.special.length-1;s>=0;s--)if("highLight"==t.special[s].typespecial&&t.special[s].posi==l&&t.special[s].posj==n)return!0;return!1}function isNotHighLighted(e,a,t,i,l,n,o){return!isHighLighted(e,a,t,i,l,n,o)}function deleteHighLight(e,a){var t;if("object"==typeof a.special)for(t=a.special.length-1;t>=0;t--)"highLight"==a.special[t].typespecial&&a.special.splice(t,1)}function highLightAction(action,ctx,data,config,v1,v2){if(9==ctx.firstPass){var currentlyDisplayed=[-1,-1],redisplay=!1,i,j;if("object"==typeof data.special)for(i=0;i<data.special.length&&currentlyDisplayed[0]==-1;i++)"highLight"==data.special[i].typespecial&&(currentlyDisplayed=[data.special[i].posi,data.special[i].posj]);var deleteOld=!1,addNew=!1,property,output,fndoldspec=!1,fndnewspec=!1;if("HIDE"==action&&currentlyDisplayed[0]!=-1?deleteOld=!0:"HIDE"!=action&&"group"==config.highLightFullLine&&currentlyDisplayed[1]!=v2?(currentlyDisplayed[0]!=-1&&(deleteOld=!0),addNew=!0):"HIDE"==action||0!=config.highLightFullLine||currentlyDisplayed[0]==v1&&currentlyDisplayed[1]==v2?"HIDE"!=action&&1==config.highLightFullLine&&currentlyDisplayed[0]!=v1&&(currentlyDisplayed[0]!=-1&&(deleteOld=!0),addNew=!0):(currentlyDisplayed[0]!=-1&&(deleteOld=!0),addNew=!0),deleteOld)for(redisplay=!0,i=data.special.length-1;i>=0;i--)"highLight"==data.special[i].typespecial&&(data.special.splice(i,1),fndoldspec=!0);if(addNew)if(redisplay=!0,"undefined"==typeof data.special&&(data.special=[]),"group"==config.highLightFullLine){for(j=0;j<data.datasets.length;j++)if(0!=data.datasets[j].mouseDetection){output="";for(property in config.highLightSet)""!=output&&(output+=","),output+="string"==typeof config.highLightSet[property]?property+': "'+config.highLightSet[property]+'"':property+": "+config.highLightSet[property];fndnewspec=!0,eval("data.special[data.special.length]={"+output+"};"),data.special[data.special.length-1].posi=j,data.special[data.special.length-1].posj=v2,data.special[data.special.length-1].typespecial="highLight"}}else if(1==config.highLightFullLine){if(0!=data.datasets[v1].mouseDetection)for(j=0;j<data.datasets[v1].data.length;j++){output="";for(property in config.highLightSet)""!=output&&(output+=","),output+="string"==typeof config.highLightSet[property]?property+': "'+config.highLightSet[property]+'"':property+": "+config.highLightSet[property];fndnewspec=!0,eval("data.special[data.special.length]={"+output+"};"),data.special[data.special.length-1].posi=v1,data.special[data.special.length-1].posj=j,data.special[data.special.length-1].typespecial="highLight"}}else if(0!=data.datasets[v1].mouseDetection){output="";for(property in config.highLightSet)""!=output&&(output+=","),output+="string"==typeof config.highLightSet[property]?property+': "'+config.highLightSet[property]+'"':property+": "+config.highLightSet[property];fndnewspec=!0,eval("data.special[data.special.length]={"+output+"};"),data.special[data.special.length-1].posi=v1,data.special[data.special.length-1].posj=v2,data.special[data.special.length-1].typespecial="highLight"}1==redisplay&&updateChart(ctx,data,config,!1,config.highLightRerunEndFunction)}}function initAnnotateDiv(e,a,t){e.className=a.annotateClassName?a.annotateClassName:"",e.style.border=a.annotateClassName?"":a.annotateBorder,e.style.padding=a.annotateClassName?"":a.annotatePadding,e.style.borderRadius=a.annotateClassName?"":a.annotateBorderRadius,e.style.backgroundColor=a.annotateClassName?"":a.annotateBackgroundColor,e.style.color=a.annotateClassName?"":a.annotateFontColor,e.style.fontFamily=a.annotateClassName?"":a.annotateFontFamily,e.style.fontSize=a.annotateClassName?"":Math.ceil(t.chartTextScale*a.annotateFontSize).toString()+"pt",e.style.fontStyle=a.annotateClassName?"":a.annotateFontStyle,e.style.zIndex=999}function displayAnnotate(ctx,data,config,rect,event,annotateDIV,jsGraphAnnotate,piece,myStatData,statData){if("ARC"==jsGraphAnnotate[ctx.ChartNewId][piece.piece][0]?dispString=tmplbis(setOptionValue(!0,!0,1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][piece.piece][3],void 0,config.annotateLabel,"annotateLabel",jsGraphAnnotate[ctx.ChartNewId][piece.piece][1],-1,{otherVal:!0}),myStatData,config):dispString=tmplbis(setOptionValue(!0,!0,1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][piece.piece][3],void 0,config.annotateLabel,"annotateLabel",jsGraphAnnotate[ctx.ChartNewId][piece.piece][1],jsGraphAnnotate[ctx.ChartNewId][piece.piece][2],{otherVal:!0}),myStatData,config),textMsr=ctx.measureTextMultiLine(dispString,1*annotateDIV.style.fontSize.replace("pt","")),ctx.restore(),annotateDIV.innerHTML=dispString,x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),config.annotateRelocate===!0){var relocateX,relocateY;relocateX=0,relocateY=0,x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-fromLeft&&(relocateX=-textMsr.textWidth),y+fromTop+textMsr.textHeight>1*window.innerHeight-1*rect.top+fromTop&&(relocateY-=textMsr.textHeight+2*fromTop),oCursor.moveIt(Math.max(8-rect.left,x+fromLeft+relocateX),Math.max(8-rect.top,y+fromTop+relocateY))}else oCursor.moveIt(x+fromLeft,y+fromTop);annotateDIV.style.display=""}function doMouseAction(e,a,t){function i(e,a){return e==a||"mousemove"==e&&("mousewheel"==a||"mouseout"==a)}function l(t){var i;for(i=0;i<O.length;i++)t(e,a,L,b,O[i].myStatData);for(i=0;i<I.length;i++)t(e,a,L,b,{type:"CLICKONTEXT",values:jsTextMousePos[a.ChartNewId][I[i]]});0==O.length&&0==I.length&&t(e,a,L,b,null)}if(9==a.firstPass&&("mousedown"==t&&(t=t+" "+e.which),!(a.mouseAction.indexOf(t)<0))){var n,o,s,r,c,h,d,p,u,S,g,A,f,x,m,T,P,D,M,y,v,L=mouseActionData[a.ChartNewId].config,b=mouseActionData[a.ChartNewId].data,O=[],I=[],B=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",V=getMousePos(a.canvas,e);for(M="mousedown 1"==t?"mousedown left":"mousedown 2"==t?"mousedown middle":"mousedown 3"==t?"mousedown right":t==B?"mousewheel":t,n=0;n<jsGraphAnnotate[a.ChartNewId].length;n++)if("ARC"==jsGraphAnnotate[a.ChartNewId][n][0])myStatData=jsGraphAnnotate[a.ChartNewId][n][3][jsGraphAnnotate[a.ChartNewId][n][1]],f=Math.sqrt((V.x-myStatData.midPosX)*(V.x-myStatData.midPosX)+(V.y-myStatData.midPosY)*(V.y-myStatData.midPosY)),f>myStatData.int_radius&&f<myStatData.radiusOffset&&(x=(Math.acos((V.x-myStatData.midPosX)/f)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),V.y<myStatData.midPosY&&(x=-x),x=((x+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.startAngle=((myStatData.startAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle=((myStatData.endAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle<myStatData.startAngle&&(myStatData.endAngle+=2*Math.PI),(x>myStatData.startAngle&&x<myStatData.endAngle||x>myStatData.startAngle-2*Math.PI&&x<myStatData.endAngle-2*Math.PI||x>myStatData.startAngle+2*Math.PI&&x<myStatData.endAngle+2*Math.PI)&&(myStatData.graphPosX=V.x,myStatData.graphPosY=V.y,O[O.length]={piece:n,i:jsGraphAnnotate[a.ChartNewId][n][1],j:jsGraphAnnotate[a.ChartNewId][n][2],myStatData:myStatData}));else if("MARC"==jsGraphAnnotate[a.ChartNewId][n][0])myStatData=jsGraphAnnotate[a.ChartNewId][n][3][jsGraphAnnotate[a.ChartNewId][n][1]][jsGraphAnnotate[a.ChartNewId][n][2]],f=Math.sqrt((V.x-myStatData.midPosX)*(V.x-myStatData.midPosX)+(V.y-myStatData.midPosY)*(V.y-myStatData.midPosY)),f>myStatData.int_radius&&f<myStatData.radiusOffset&&(x=(Math.acos((V.x-myStatData.midPosX)/f)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),V.y<myStatData.midPosY&&(x=-x),x=((x+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.startAngle=((myStatData.startAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle=((myStatData.endAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle<myStatData.startAngle&&(myStatData.endAngle+=2*Math.PI),(x>myStatData.startAngle&&x<myStatData.endAngle||x>myStatData.startAngle-2*Math.PI&&x<myStatData.endAngle-2*Math.PI||x>myStatData.startAngle+2*Math.PI&&x<myStatData.endAngle+2*Math.PI)&&(myStatData.graphPosX=V.x,myStatData.graphPosY=V.y,O[O.length]={piece:n,i:jsGraphAnnotate[a.ChartNewId][n][1],j:jsGraphAnnotate[a.ChartNewId][n][2],myStatData:myStatData}));else if("RECT"==jsGraphAnnotate[a.ChartNewId][n][0])myStatData=jsGraphAnnotate[a.ChartNewId][n][3][jsGraphAnnotate[a.ChartNewId][n][1]][jsGraphAnnotate[a.ChartNewId][n][2]],m=Math.max(myStatData.yPosBottom,myStatData.yPosTop),T=Math.min(myStatData.yPosBottom,myStatData.yPosTop),m-T<L.annotateBarMinimumDetectionHeight&&(m=(m+T+L.annotateBarMinimumDetectionHeight)/2,T=m-L.annotateBarMinimumDetectionHeight),P=Math.min(myStatData.xPosLeft,myStatData.xPosRight),D=Math.max(myStatData.xPosLeft,myStatData.xPosRight),D-P<L.annotateBarMinimumDetectionHeight&&(D=(D+P+L.annotateBarMinimumDetectionHeight)/2,P=D-L.annotateBarMinimumDetectionHeight),V.x>P&&V.x<D&&V.y<m&&V.y>T&&(myStatData.graphPosX=V.x,myStatData.graphPosY=V.y,O[O.length]={piece:n,i:jsGraphAnnotate[a.ChartNewId][n][1],j:jsGraphAnnotate[a.ChartNewId][n][2],myStatData:myStatData});else if("POINT"==jsGraphAnnotate[a.ChartNewId][n][0]){if(myStatData=jsGraphAnnotate[a.ChartNewId][n][3][jsGraphAnnotate[a.ChartNewId][n][1]][jsGraphAnnotate[a.ChartNewId][n][2]],L.detectAnnotateOnFullLine)if(V.x<Math.min(myStatData.annotateStartPosX,myStatData.annotateEndPosX)-Math.ceil(a.chartSpaceScale*L.pointHitDetectionRadius)||V.x>Math.max(myStatData.annotateStartPosX,myStatData.annotateEndPosX)+Math.ceil(a.chartSpaceScale*L.pointHitDetectionRadius)||V.y<Math.min(myStatData.annotateStartPosY,myStatData.annotateEndPosY)-Math.ceil(a.chartSpaceScale*L.pointHitDetectionRadius)||V.y>Math.max(myStatData.annotateStartPosY,myStatData.annotateEndPosY)+Math.ceil(a.chartSpaceScale*L.pointHitDetectionRadius))f=Math.ceil(a.chartSpaceScale*L.pointHitDetectionRadius)+1;else if("undefined"==typeof myStatData.D1A)f=Math.abs(V.x-myStatData.posX);else if("undefined"==typeof myStatData.D2A)f=Math.abs(V.y-myStatData.posY);else{var G=-myStatData.D2A*V.x+V.y,R=-(myStatData.D1B-G)/(myStatData.D1A-myStatData.D2A),C=myStatData.D2A*R+G;f=Math.sqrt((V.x-R)*(V.x-R)+(V.y-C)*(V.y-C))}else f=Math.sqrt((V.x-myStatData.posX)*(V.x-myStatData.posX)+(V.y-myStatData.posY)*(V.y-myStatData.posY));f<Math.ceil(a.chartSpaceScale*L.pointHitDetectionRadius)&&(myStatData.graphPosX=V.x,myStatData.graphPosY=V.y,O[O.length]={piece:n,i:jsGraphAnnotate[a.ChartNewId][n][1],j:jsGraphAnnotate[a.ChartNewId][n][2],myStatData:myStatData})}if(L.detectMouseOnText)for(n=0;n<jsTextMousePos[a.ChartNewId].length;n++)o=!0,Math.abs(jsTextMousePos[a.ChartNewId][n][3].p1-jsTextMousePos[a.ChartNewId][n][3].p2)<L.zeroValue?(V.x<Math.min(jsTextMousePos[a.ChartNewId][n][2].p1,jsTextMousePos[a.ChartNewId][n][2].p2)&&(o=!1),V.x>Math.max(jsTextMousePos[a.ChartNewId][n][2].p1,jsTextMousePos[a.ChartNewId][n][2].p2)&&(o=!1),V.y<Math.min(jsTextMousePos[a.ChartNewId][n][3].p1,jsTextMousePos[a.ChartNewId][n][3].p3)&&(o=!1),V.y>Math.max(jsTextMousePos[a.ChartNewId][n][3].p1,jsTextMousePos[a.ChartNewId][n][3].p3)&&(o=!1)):Math.abs(jsTextMousePos[a.ChartNewId][n][2].p1-jsTextMousePos[a.ChartNewId][n][2].p2)<L.zeroValue?(V.x<Math.min(jsTextMousePos[a.ChartNewId][n][2].p1,jsTextMousePos[a.ChartNewId][n][2].p3)&&(o=!1),V.x>Math.max(jsTextMousePos[a.ChartNewId][n][2].p1,jsTextMousePos[a.ChartNewId][n][2].p3)&&(o=!1),V.y<Math.min(jsTextMousePos[a.ChartNewId][n][3].p1,jsTextMousePos[a.ChartNewId][n][3].p2)&&(o=!1),V.y>Math.max(jsTextMousePos[a.ChartNewId][n][3].p1,jsTextMousePos[a.ChartNewId][n][3].p2)&&(o=!1)):(s=Math.tan(jsTextMousePos[a.ChartNewId][n][4]),r=jsTextMousePos[a.ChartNewId][n][3].p1-s*jsTextMousePos[a.ChartNewId][n][2].p1,c=jsTextMousePos[a.ChartNewId][n][3].p3-s*jsTextMousePos[a.ChartNewId][n][2].p3,h=-1/s,d=jsTextMousePos[a.ChartNewId][n][3].p1-h*jsTextMousePos[a.ChartNewId][n][2].p1,p=jsTextMousePos[a.ChartNewId][n][3].p4-h*jsTextMousePos[a.ChartNewId][n][2].p4,u=s*V.x+r,S=s*V.x+c,g=h*V.x+d,A=h*V.x+p,V.y<Math.min(u,S)&&(o=!1),V.y>Math.max(u,S)&&(o=!1),V.y<Math.min(g,A)&&(o=!1),V.y>Math.max(g,A)&&(o=!1)),o&&(I[I.length]=n);L.savePng&&i(L.savePngFunction,M)&&saveCanvas(a,b,L);var N=-1,w=-1,k=!1,F=!1;for(n=O.length-1;n>=0;n--)jsGraphAnnotate[a.ChartNewId][O[n].piece][4]&&0==k&&(N==-1&&(N=n),"POINT"==jsGraphAnnotate[a.ChartNewId][O[n].piece][0]&&(N=n,k=!0)),0==F&&(w==-1&&(w=n),"POINT"==jsGraphAnnotate[a.ChartNewId][O[n].piece][0]&&(w=n,F=!0));if(L.annotateDisplay&&i(L.annotateFunction,M)&&(y=document.getElementById(annotate_shape),y.style.display="none",O.length>0)){initAnnotateDiv(y,L,a),a.save(),a.font=y.style.fontStyle+" "+y.style.fontSize+" "+y.style.fontFamily;var H=a.canvas.getBoundingClientRect();v=!1,N!=-1&&jsGraphAnnotate[a.ChartNewId][O[N].piece][4]&&(displayAnnotate(a,b,L,H,e,y,jsGraphAnnotate,O[N],O[N].myStatData,jsGraphAnnotate[a.ChartNewId][O[N].piece][3]),v=!0)}0==inMouseAction[a.ChartNewId]&&mouseActionData[a.ChartNewId].prevShow>=0&&i("mousemove",M)&&(0==O.length||mouseActionData[a.ChartNewId].prevShow!=O[O.length-1].piece)&&(inMouseAction[a.ChartNewId]=!0,prevShow=mouseActionData[a.ChartNewId].prevShow,mouseActionData[a.ChartNewId].prevShow=-1,L.highLight&&i(L.highLightMouseFunction,M)&&0==O.length&&highLightAction("HIDE",a,b,L,null,null),"function"==typeof L.annotateFunctionOut&&("ARC"==jsGraphAnnotate[a.ChartNewId][prevShow][0]?L.annotateFunctionOut("OUTANNOTATE",a,b,jsGraphAnnotate[a.ChartNewId][prevShow][3],jsGraphAnnotate[a.ChartNewId][prevShow][1],-1,null):L.annotateFunctionOut("OUTANNOTATE",a,b,jsGraphAnnotate[a.ChartNewId][prevShow][3],jsGraphAnnotate[a.ChartNewId][prevShow][1],jsGraphAnnotate[a.ChartNewId][prevShow][2],null)),inMouseAction[a.ChartNewId]=!1),O.length>0&&0==inMouseAction[a.ChartNewId]&&mouseActionData[a.ChartNewId].prevShow!=O[w].piece&&i("mousemove",M)&&(inMouseAction[a.ChartNewId]=!0,prevShow=mouseActionData[a.ChartNewId].prevShow,L.highLight&&i(L.highLightMouseFunction,M)&&w!=-1&&("ARC"==jsGraphAnnotate[a.ChartNewId][O[w].piece][0]?highLightAction("ARC",a,b,L,jsGraphAnnotate[a.ChartNewId][O[w].piece][1],-1):highLightAction(jsGraphAnnotate[a.ChartNewId][O[w].piece][0],a,b,L,jsGraphAnnotate[a.ChartNewId][O[w].piece][1],jsGraphAnnotate[a.ChartNewId][O[w].piece][2])),"function"==typeof L.annotateFunctionIn&&("ARC"==jsGraphAnnotate[a.ChartNewId][O[O.length-1].piece][0]?L.annotateFunctionIn("INANNOTATE",a,b,jsGraphAnnotate[a.ChartNewId][O[O.length-1].piece][3],jsGraphAnnotate[a.ChartNewId][O[O.length-1].piece][1],-1,null):L.annotateFunctionIn("INANNOTATE",a,b,jsGraphAnnotate[a.ChartNewId][O[O.length-1].piece][3],jsGraphAnnotate[a.ChartNewId][O[O.length-1].piece][1],jsGraphAnnotate[a.ChartNewId][O[O.length-1].piece][2],null)),inMouseAction[a.ChartNewId]=!1,mouseActionData[a.ChartNewId].prevShow=O[w].piece),L.highLight&&i(L.highLightMouseFunction,M)&&0==i("mousemove",M)&&(0==O.length?highLightAction("HIDE",a,b,L,null,null):w!=-1&&("ARC"==jsGraphAnnotate[a.ChartNewId][O[w].piece][0]?highLightAction("ARC",a,b,L,jsGraphAnnotate[a.ChartNewId][O[w].piece][1],-1):highLightAction(jsGraphAnnotate[a.ChartNewId][O[w].piece][0],a,b,L,jsGraphAnnotate[a.ChartNewId][O[w].piece][1],jsGraphAnnotate[a.ChartNewId][O[w].piece][2]))),"function"==typeof L.mouseMove&&i("mousemove",M)&&l(L.mouseMove),"function"==typeof L.mouseDownLeft&&i("mousedown left",M)&&l(L.mouseDownLeft),"function"==typeof L.mouseDownRight&&i("mousedown right",M)&&l(L.mouseDownRight),"function"==typeof L.mouseDownMiddle&&i("mousedown middle",M)&&l(L.mouseDownMiddle),"function"==typeof L.mouseWheel&&i("mousewheel",M)&&l(L.mouseWheel),"function"==typeof L.mouseOut&&i("mouseout",M)&&l(L.mouseOut),"function"==typeof L.mouseDblClick&&i("dblclick",M)&&l(L.mouseDblClick)}}function animationCorrection(e,a,t,i,l,n){var o=e,s=0;if(l<0)if(i<1*t.animationStartWithData-1)o=1;else switch(t.animationByDataset){case"ByArc":o=e;break;case!0:o=e;break;case!1:default:o=e}else{var r=Math.max(1,t.animationStartWithDataset),c=Math.max(1,t.animationStartWithData);if(i<1*t.animationStartWithDataset-1)o=1;else if(l<1*t.animationStartWithData-1)o=1;else{var h=0;if(t.animationLeftToRight)for(var d=0;d<a.datasets.length;d++)h=Math.max(h,a.datasets[d].data.length);switch(t.animationByDataset){case!0:switch(t.animationLeftToRight){case!0:var p=(i-(r-1))*(h-(c-1))+(l-(c-1));h=(h-(c-1))*(a.datasets.length-(r-1)),e<p/h?(o=0,n&&l+1==c&&(o=1)):e<(p+1)/h?(o=(e-p/h)*h,n&&(s=o,o=1)):o=1;break;case!1:default:o=e<(i-(r-1))/(a.datasets.length-(r-1))?.001:e<(i-(r-1)+1)/(a.datasets.length-(r-1))?(a.datasets.length-(r-1))*(e-(i-(r-1))/(a.datasets.length-(r-1))):1}break;case!1:default:switch(t.animationLeftToRight){case!0:var p=l-(c-1);h-=c-1,e<p/h?o=0:e<(p+1)/h?(o=(e-p/h)*h,n&&(s=o,o=1)):o=1;break;case!1:default:o=e}}}}return{mainVal:o,subVal:s,animVal:o+s}}function showLabels(e,a,t,i){var l=setOptionValue(!0,!0,1,"SHOWLABEL",e,a,void 0,void 0,t.showXLabels,"showXLabels",i,-1,void 0,{labelValue:fmtChartJS(t,a.labels[i],t.fmtXLabel),unformatedLabelValue:a.labels[i]});return"number"==typeof l&&(l=i>=t.firstLabelToShow-1&&(i+t.firstLabelToShow-1)%parseInt(l)==0),l}function showYLabels(e,a,t,i,l){var n=setOptionValue(!0,!0,1,"SHOWYLABEL",e,a,void 0,void 0,t.showYLabels,"showYLabels",-1,i,void 0,{labelValue:l});return"number"==typeof n&&(n=i>=t.firstYLabelToShow-1&&(i+t.firstYLabelToShow-1)%parseInt(n)==0),n}function drawLegend(e,a,t,i,l,n){if(0==t.legendPosY||4==t.legendPosY||0==t.legendPosX||4==t.legendPosX){if(n!=-1)return}else{if(n==-1)return;if(1==t.animation)if("number"==typeof t.legendWhenToDraw){if(n!=t.legendWhenToDraw)return}else{if(1!=n&&"first"==t.legendWhenToDraw)return;if(n!=t.animationSteps&&"last"==t.legendWhenToDraw)return}}i.save(),"rgba(0,0,0,0)"!=t.legendFillColor&&(i.setLineDash([]),i.lineWidth=0,i.fillStyle=t.legendFillColor,i.drawRectangle({x:e.xLegendPos+e.legendBackgroundColorXPos,y:e.yLegendPos+e.legendBackgroundColorYPos,width:e.legendBackgroundColorWidth,height:e.legendBackgroundColorHeight,borders:t.legendBorders,bordersWidth:Math.ceil(i.chartLineScale*t.legendBordersWidth),borderSelection:t.legendBordersSelection,borderRadius:t.legendBordersRadius,fill:!0,stroke:!1})),t.legendBorders&&(i.fillStyle=t.legendFillColor,i.setLineDash(lineStyleFn(t.legendBordersStyle)),i.lineWidth=Math.ceil(i.chartLineScale*t.legendBordersWidth),i.strokeStyle=t.legendBordersColors,i.drawRectangle({x:e.xLegendPos+e.legendBorderXPos,y:e.yLegendPos+e.legendBorderYPos,width:e.legendBorderWidth,height:e.legendBorderHeight,borders:!0,bordersWidth:Math.ceil(i.chartLineScale*t.legendBordersWidth),borderSelection:t.legendBordersSelection,borderRadius:t.legendBordersRadius,fill:!1,stroke:!0})),i.setLineDash([]),i.restore();var o,s,r,c,h,d,p,u,S=e.legendBox;u=e.nbLegendCols-1;var g=e.yLegendPos+e.legendFirstTextYPos+e.highestLegend,A=e.xLegendPos+e.legendFirstTextXPos;for(s=g-(Math.ceil(i.chartTextScale*t.legendFontSize)+Math.ceil(i.chartSpaceScale*t.legendSpaceBetweenTextVertical)),
o=0,r=a.datasets.length,h=r-1;h>=0;h--)if(c=h,e.reverseLegend&&(c=a.datasets.length-h-1),d=typeof a.datasets[c].title,"string"==d&&(p=fmtChartJS(t,a.datasets[c].title,t.fmtLegend).trim(),""!=p)){if(u++,u==e.nbLegendCols?(u=0,o=A,s+=Math.ceil(i.chartTextScale*t.legendFontSize)+Math.ceil(i.chartSpaceScale*t.legendSpaceBetweenTextVertical)):o+=e.widestLegend+Math.ceil(i.chartSpaceScale*t.legendSpaceBetweenTextHorizontal),i.save(),i.beginPath(),"Bar"!=i.tpchart&&"StackedBar"!=i.tpchart||"Line"!=a.datasets[c].type||t.datasetFill&&1!=setOptionValue(!0,!1,1,"LINKTYPE",i,a,void 0,a.datasets[c].linkType,t.linkType,"linkType",c,-1,{nullvalue:null})||(S=!1),S)i.lineWidth=Math.ceil(i.chartLineScale*setOptionValue(!0,!1,1,"LINEWIDTH",i,a,void 0,a.datasets[c].datasetStrokeWidth,t.datasetStrokeWidth,"datasetStrokeWidth",c,-1,{nullvalue:null})),i.beginPath(),i.strokeStyle=setOptionValue(!0,!1,1,"LEGENDSTROKECOLOR",i,a,void 0,a.datasets[c].strokeColor,t.defaultFillColor,"strokeColor",c,-1,{animationValue:1,xPosLeft:o,yPosBottom:s,xPosRight:o+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:s-Math.ceil(i.chartTextScale*t.legendFontSize)}),i.setLineDash(lineStyleFn(setOptionValue(!0,!1,1,"LEGENDLINEDASH",i,a,void 0,a.datasets[c].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",c,-1,{animationValue:1,xPosLeft:o,yPosBottom:s,xPosRight:o+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:s-Math.ceil(i.chartTextScale*t.legendFontSize)}))),i.moveTo(o,s),i.lineTo(o+Math.ceil(i.chartTextScale*t.legendBlockSize),s),i.lineTo(o+Math.ceil(i.chartTextScale*t.legendBlockSize),s-Math.ceil(i.chartTextScale*t.legendFontSize)),i.lineTo(o,s-Math.ceil(i.chartTextScale*t.legendFontSize)),i.lineTo(o,s),i.stroke(),i.closePath(),i.fillStyle=setOptionValue(!0,!1,1,"LEGENDFILLCOLOR",i,a,void 0,a.datasets[c].fillColor,t.defaultFillColor,"fillColor",c,-1,{animationValue:1,xPosLeft:o,yPosBottom:s,xPosRight:o+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:s-Math.ceil(i.chartTextScale*t.legendFontSize)}),i.fill();else{if(i.lineWidth=t.legendColorIndicatorStrokeWidth?t.legendColorIndicatorStrokeWidth:Math.ceil(i.chartLineScale*setOptionValue(!0,!1,1,"LINEWIDTH",i,a,void 0,a.datasets[c].datasetStrokeWidth,t.datasetStrokeWidth,"datasetStrokeWidth",c,-1,{nullvalue:null})),t.legendColorIndicatorStrokeWidth&&t.legendColorIndicatorStrokeWidth>Math.ceil(i.chartTextScale*t.legendFontSize)&&(i.lineWidth=Math.ceil(i.chartTextScale*t.legendFontSize)),i.strokeStyle=setOptionValue(!0,!1,1,"LEGENDSTROKECOLOR",i,a,void 0,a.datasets[c].strokeColor,t.defaultFillColor,"strokeColor",c,-1,{animationValue:1,xPosLeft:o,yPosBottom:s,xPosRight:o+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:s-Math.ceil(i.chartTextScale*t.legendFontSize)}),i.setLineDash(lineStyleFn(setOptionValue(!0,!1,1,"LEGENDLINEDASH",i,a,void 0,a.datasets[c].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",c,-1,{animationValue:1,xPosLeft:o,yPosBottom:s,xPosRight:o+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:s-Math.ceil(i.chartTextScale*t.legendFontSize)}))),i.moveTo(o+2,s-Math.ceil(i.chartTextScale*t.legendFontSize)/2),i.lineTo(o+2+Math.ceil(i.chartTextScale*t.legendBlockSize),s-Math.ceil(i.chartTextScale*t.legendFontSize)/2),i.stroke(),i.fill(),t.pointDot){i.beginPath(),i.fillStyle=setOptionValue(!0,!1,1,"LEGENDMARKERFILLCOLOR",i,a,void 0,a.datasets[c].pointColor,t.defaultStrokeColor,"pointColor",c,-1,{nullvalue:!0}),i.strokeStyle=setOptionValue(!0,!1,1,"LEGENDMARKERSTROKESTYLE",i,a,void 0,a.datasets[c].pointStrokeColor,t.defaultStrokeColor,"pointStrokeColor",c,-1,{nullvalue:!0}),i.lineWidth=setOptionValue(!0,!1,i.chartLineScale,"LEGENDMARKERLINEWIDTH",i,a,void 0,a.datasets[c].pointDotStrokeWidth,t.pointDotStrokeWidth,"pointDotStrokeWidth",c,-1,{nullvalue:!0});var f=setOptionValue(!0,!1,1,"LEGENDMARKERSHAPE",i,a,void 0,a.datasets[c].markerShape,t.markerShape,"markerShape",c,-1,{nullvalue:!0}),x=setOptionValue(!0,!1,i.chartSpaceScale,"LEGENDMARKERRADIUS",i,a,void 0,a.datasets[c].pointDotRadius,t.pointDotRadius,"pointDotRadius",c,-1,{nullvalue:!0}),m=setOptionValue(!0,!1,1,"LEGENDMARKERSTROKESTYLE",i,a,void 0,a.datasets[c].pointDotStrokeStyle,t.pointDotStrokeStyle,"pointDotStrokeStyle",c,-1,{nullvalue:!0});drawMarker(i,o+2+Math.ceil(i.chartTextScale*t.legendBlockSize)/2,s-Math.ceil(i.chartTextScale*t.legendFontSize)/2,f,x,m)}i.fill()}i.restore(),i.save(),i.beginPath(),i.font=t.legendFontStyle+" "+Math.ceil(i.chartTextScale*t.legendFontSize).toString()+"px "+t.legendFontFamily,i.fillStyle=setOptionValue(!0,!1,1,"LEGENDFONTCOLOR",i,a,void 0,void 0,t.legendFontColor,"legendFontColor",c,-1,{nullvalue:!0}),i.textAlign="left",i.textBaseline="bottom",i.translate(o+Math.ceil(i.chartTextScale*t.legendBlockSize)+Math.ceil(i.chartSpaceScale*t.legendSpaceBetweenBoxAndText),s),i.fillTextMultiLine(p,0,0,i.textBaseline,Math.ceil(i.chartTextScale*t.legendFontSize),!0,t.detectMouseOnText,i,"LEGEND_TEXTMOUSE",0,o+Math.ceil(i.chartTextScale*t.legendBlockSize)+Math.ceil(i.chartSpaceScale*t.legendSpaceBetweenBoxAndText),s,c,-1),i.restore()}}function measureLegend(e,a,t,i,l,n,o,s){var r=0,c=0,h=0,d=0,p=0,u=0,S=0,g=0,A=0,f=0,x=0,m=0;return d=n*(l+Math.ceil(a.chartSpaceScale*t.legendSpaceBetweenTextVertical))-Math.ceil(a.chartSpaceScale*t.legendSpaceBetweenTextVertical)+Math.ceil(a.chartSpaceScale*t.legendSpaceBeforeText)+Math.ceil(a.chartSpaceScale*t.legendSpaceAfterText),h=o*(i+Math.ceil(a.chartSpaceScale*t.legendSpaceBetweenTextHorizontal))-Math.ceil(a.chartSpaceScale*t.legendSpaceBetweenTextHorizontal)+Math.ceil(a.chartSpaceScale*t.legendSpaceLeftText)+Math.ceil(a.chartSpaceScale*t.legendSpaceRightText),c=d,r=h,S=Math.ceil(a.chartSpaceScale*t.legendSpaceLeftText),g=Math.ceil(a.chartSpaceScale*t.legendSpaceBeforeText),1==t.legendBorders?(p=r,u=c,isBorder(t.legendBordersSelection,"LEFT")?(p+=Math.ceil(a.chartLineScale*t.legendBordersWidth)/2,r+=Math.ceil(a.chartLineScale*t.legendBordersWidth)+Math.ceil(a.chartSpaceScale*t.legendBordersSpaceLeft),S+=Math.ceil(a.chartLineScale*t.legendBordersWidth)+Math.ceil(a.chartSpaceScale*t.legendBordersSpaceLeft),x+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceLeft)+Math.ceil(a.chartLineScale*t.legendBordersWidth)/2,A+=Math.ceil(a.chartLineScale*t.legendBordersWidth)+Math.ceil(a.chartSpaceScale*t.legendBordersSpaceLeft)):"rgba(0,0,0,0)"!=t.legendFillColor&&(r+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceLeft),S+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceLeft),A+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceLeft),x+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceLeft)),isBorder(t.legendBordersSelection,"RIGHT")?(p+=Math.ceil(a.chartLineScale*t.legendBordersWidth)/2,r+=Math.ceil(a.chartLineScale*t.legendBordersWidth)+Math.ceil(a.chartSpaceScale*t.legendBordersSpaceRight)):"rgba(0,0,0,0)"!=t.legendFillColor&&(r+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceRight)),isBorder(t.legendBordersSelection,"TOP")?(u+=Math.ceil(a.chartLineScale*t.legendBordersWidth)/2,c+=Math.ceil(a.chartLineScale*t.legendBordersWidth)+Math.ceil(a.chartSpaceScale*t.legendBordersSpaceBefore),g+=Math.ceil(a.chartLineScale*t.legendBordersWidth)+Math.ceil(a.chartSpaceScale*t.legendBordersSpaceBefore),f+=Math.ceil(a.chartLineScale*t.legendBordersWidth)+Math.ceil(a.chartSpaceScale*t.legendBordersSpaceBefore),m+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceBefore)+Math.ceil(a.chartLineScale*t.legendBordersWidth)/2):"rgba(0,0,0,0)"!=t.legendFillColor&&(c+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceBefore),g+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceBefore),f+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceBefore),m+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceBefore)),isBorder(t.legendBordersSelection,"BOTTOM")?(u+=Math.ceil(a.chartLineScale*t.legendBordersWidth)/2,c+=Math.ceil(a.chartLineScale*t.legendBordersWidth)+Math.ceil(a.chartSpaceScale*t.legendBordersSpaceAfter)):"rgba(0,0,0,0)"!=t.legendFillColor&&(c+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceAfter))):"rgba(0,0,0,0)"!=t.legendFillColor&&(r+=Math.ceil(a.chartSpaceScale*(t.legendBordersSpaceRight+t.legendBordersSpaceLeft)),c+=Math.ceil(a.chartSpaceScale*(t.legendBordersSpaceBefore+t.legendBordersSpaceAfter)),A+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceLeft),f+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceBefore),S+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceLeft),g+=Math.ceil(a.chartSpaceScale*t.legendBordersSpaceBefore)),{legendWidth:r,legendHeight:c,legendBackgroundColorWidth:h,legendBackgroundColorHeight:d,legendBorderWidth:p,legendBorderHeight:u,legendFirstTextXPos:S,legendFirstTextYPos:g,legendBackgroundColorXPos:A,legendBackgroundColorYPos:f,legendBorderXPos:x,legendBorderYPos:m,elementMsr:null}}function drawMarker(e,a,t,i,l,n){switch(e.setLineDash(lineStyleFn(n)),i){case"square":e.rect(a-l,t-l,2*l,2*l),e.stroke(),e.fill(),e.setLineDash([]);break;case"triangle":pointA_x=0,pointA_y=2/3*l,e.moveTo(a,t-pointA_y),e.lineTo(a+pointA_y*Math.sin(4/3),t+pointA_y*Math.cos(4/3)),e.lineTo(a-pointA_y*Math.sin(4/3),t+pointA_y*Math.cos(4/3)),e.lineTo(a,t-pointA_y),e.stroke(),e.fill(),e.setLineDash([]);break;case"diamond":e.moveTo(a,t+l),e.lineTo(a+l,t),e.lineTo(a,t-l),e.lineTo(a-l,t),e.lineTo(a,t+l),e.stroke(),e.fill(),e.setLineDash([]);break;case"plus":e.moveTo(a,t-l),e.lineTo(a,t+l),e.moveTo(a-l,t),e.lineTo(a+l,t),e.stroke(),e.setLineDash([]);break;case"cross":e.moveTo(a-l,t-l),e.lineTo(a+l,t+l),e.moveTo(a-l,t+l),e.lineTo(a+l,t-l),e.stroke(),e.setLineDash([]);break;case"circle":default:e.arc(a,t,l,0,2*Math.PI*1,!0),e.stroke(),e.fill(),e.setLineDash([])}}function initPassVariableData_part1(e,a,t){var i,l,n,o,s,r,c,h,d,p,u,S,g,A,f,x,m,T,P,D,M,y,v,L;switch(n=[],o=[],o[0]=[],o[1]=[],s=[],s[0]=[],s[1]=[],r=[],r[0]=[],r[1]=[],c=[],c[0]=[],c[1]=[],h=[],h[0]=[],h[1]=[],d=[],d[0]=[],d[1]=[],S=[],g=[],A=[],f=[],x=[],S[0]=[],S[1]=[],m=0,P=[],D=[],M=[],y=[],v=[],t.tpchart){case"PolarArea":var b,O;for(b=[],O=[],i=0;i<e.datasets.length;i++)for(l=0;l<e.labels.length;l++)0==i&&(b[l]=0),"undefined"!=typeof e.datasets[i].data[l]&&b[l]++;var I=0,B=0;for(l=0;l<e.labels.length;l++)O[l]=B,I=Math.max(b[l],I),b[l]>0&&B++,y[l]=0,v[l]=1;var V=1;break;case"Doughnut":case"Pie":var G,R,V=0,C=0;for(l=0;l<e.labels.length;l++)G=setOptionValue(!0,!0,1,"RADIUSSPACEWEIGHT",t,e,null,e.radiusSpaceWeight,a.radiusSpaceWeight,"radiusSpaceWeight",l,-1,{nullvalue:null}),R=setOptionValue(!0,!0,1,"RADIUSDATAWEIGHT",t,e,null,e.radiusDataWeight,a.radiusDataWeight,"radiusDataWeight",l,-1,{nullvalue:null}),0!=l&&(C+=G,V+=G),y[l]=C,V+=R,v[l]=V,C+=R}for(i=0;i<e.datasets.length;i++){if("undefined"!=typeof e.datasets[i].xPos&&"Line"==tpdraw(t,e.datasets[i]))for(l=e.datasets[i].data.length;l<e.datasets[i].xPos.length;l++)e.datasets[i].data.push(void 0);else for(l=e.datasets[i].data.length;l<e.labels.length;l++)e.datasets[i].data.push(void 0);for(L=2==e.datasets[i].axis?0:1,n[i]=[],h[0][i]=-Number.MAX_VALUE,h[1][i]=-Number.MAX_VALUE,d[0][i]=Number.MAX_VALUE,d[1][i]=Number.MAX_VALUE,g[i]=-1,A[i]=-1,l=0;l<e.datasets[i].data.length;l++){"undefined"==typeof f[l]&&(f[l]=-1,x[l]=-1,c[0][l]=0,o[0][l]=-Number.MAX_VALUE,s[0][l]=Number.MAX_VALUE,c[1][l]=0,o[1][l]=-Number.MAX_VALUE,s[1][l]=Number.MAX_VALUE);var N=!0;"Doughnut"==t.tpchart?(0==setOptionValue(!1,!0,1,"DISPLAYDATA",t,e,null,e.datasets[i].displayData,a.displayData,"displayData",i,l,{nullvalue:null})&&(N=!1),0==setOptionValue(!1,!0,1,"DISPLAYDATA",t,e,null,e.displayData,a.displayData,"displayData",-1,l,{nullvalue:null})&&(N=!1)):(0==setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,null,e.datasets[i].displayData,a.displayData,"displayData",i,l,{nullvalue:null})&&(N=!1),0==setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,null,e.displayData,a.displayData,"displayData",l,-1,{nullvalue:null})&&(N=!1)),"undefined"==typeof e.datasets[i].data[l]&&(N=!1),1==N&&(m+=1*e.datasets[i].data[l],g[i]==-1&&(g[i]=l),A[i]=l,f[l]==-1&&(f[l]=i),x[l]=i,c[L][l]+=1*e.datasets[i].data[l],o[L][l]=Math.max(o[L][l],1*e.datasets[i].data[l]),s[L][l]=Math.min(s[L][l],1*e.datasets[i].data[l]),h[L][i]=Math.max(h[L][i],1*e.datasets[i].data[l]),d[L][i]=Math.min(d[L][i],1*e.datasets[i].data[l]))}}for(i=0;i<e.datasets.length;i++){L=2==e.datasets[i].axis?0:1,p="string"==typeof e.datasets[i].title?e.datasets[i].title.trim():"";var w=-1,F=-1;for(l=0;l<e.datasets[i].data.length;l++){"undefined"==typeof r[0][l]&&(r[0][l]=0,S[0][l]=-1,r[1][l]=0,S[1][l]=-1),u="","undefined"!=typeof e.datasets[i].xPos&&"undefined"!=typeof e.datasets[i].xPos[l]&&(u=e.datasets[i].xPos[l]),""==u&&"undefined"!=typeof e.labels[l]&&(u=e.labels[l]),"string"==typeof u&&(u=u.trim());var N=!0;if("Line"==tpdraw(t,e.datasets[i])&&(0==setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,null,e.datasets[i].displayData,a.displayData,"displayData",i,l,{nullvalue:null})&&(N=!1),0==setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,null,e.displayData,a.displayData,"displayData",l,-1,{nullvalue:null})&&(N=!1)),"undefined"==typeof e.datasets[i].data[l]&&(N=!1),N){switch(r[L][l]+=1*e.datasets[i].data[l],tpdraw(t,e.datasets[i])){case"PolarArea":case"Doughnut":case"Pie":if(0==i){if(0==l){var H=((a.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);H<=a.zeroValue&&(H=2*Math.PI)}D[l]=((-a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),M[l]=((a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),"PolarArea"==t.tpchart&&(D[l]+=O[l]*(H/B),M[l]-=O[l]*(H/B)),P[l]=D[l]}T="PolarArea"==t.tpchart?b[l]>0?H/B/b[l]:0:1*e.datasets[i].data[l]/c[L][l]*H,T>=2*Math.PI&&(T=2*Math.PI-.001),n[i][l]={config:a,v1:fmtChartJS(a,p,a.fmtV1),v2:fmtChartJS(a,u,a.fmtV2),v3:fmtChartJS(a,1*e.datasets[i].data[l],a.fmtV3),v4:fmtChartJS(a,r[L][l],a.fmtV4),v5:fmtChartJS(a,c[L][l],a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*e.datasets[i].data[l]/c[L][l],a.fmtV6),a.roundPct),v6T:roundToWithThousands(a,fmtChartJS(a,100*e.datasets[i].data[l]/m,a.fmtV6T),a.roundPct),v7:0,v8:0,v9:0,v10:0,v11:fmtChartJS(a,i,a.fmtV11),v12:fmtChartJS(a,l,a.fmtV12),v13:fmtChartJS(a,T,a.fmtV13),v14:fmtChartJS(a,D[l],a.fmtV14),v15:fmtChartJS(a,D[l]+T,a.fmtV15),lgtxt:p,lgtxt2:u,datavalue:1*e.datasets[i].data[l],cumvalue:r[L][l],totvalue:c[L][l],pctvalue:100*e.datasets[i].data[l]/c[L][l],pctvalueT:100*e.datasets[i].data[l]/m,maxvalue:o[L][l],minvalue:s[L][l],lmaxvalue:h[L][i],lminvalue:d[L][i],grandtotal:m,firstNotMissing:f[l],lastNotMissing:x[l],prevNotMissing:w,prevMissing:F,nextNotMissing:-1,segmentAngle:T,firstAngle:P[l],startAngle:D[l],realStartAngle:M[l],endAngle:D[l]+T,radiusOffset:0,midPosX:0,midPosY:0,int_radius:0,ext_radius:0,startRadius:y[l]/V,stopRadius:v[l]/V,totRadiusWeight:V,j:l,i:i,data:e},D[l]=D[l]+T,M[l]=M[l]-T;break;case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":n[i][l]={config:a,v1:fmtChartJS(a,p,a.fmtV1),v2:fmtChartJS(a,u,a.fmtV2),v3:fmtChartJS(a,1*e.datasets[i].data[l],a.fmtV3),v4:fmtChartJS(a,r[L][l],a.fmtV4),v5:fmtChartJS(a,c[L][l],a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*e.datasets[i].data[l]/c[L][l],a.fmtV6),a.roundPct),v6T:roundToWithThousands(a,fmtChartJS(a,100*e.datasets[i].data[l]/m,a.fmtV6T),a.roundPct),v11:fmtChartJS(a,i,a.fmtV11),v12:fmtChartJS(a,l,a.fmtV12),lgtxt:p,lgtxt2:u,datavalue:1*e.datasets[i].data[l],cumvalue:r[L][l],totvalue:c[L][l],pctvalue:100*e.datasets[i].data[l]/c[L][l],pctvalueT:100*e.datasets[i].data[l]/m,maxvalue:o[L][l],minvalue:s[L][l],lmaxvalue:h[L][i],lminvalue:d[L][i],grandtotal:m,firstNotMissing:f[l],lastNotMissing:x[l],prevNotMissing:w,prevMissing:F,nextNotMissing:-1,j:l,i:i,data:e},1*e.datasets[i].data[l]!=0||"HorizontalStackedBar"!=tpdraw(t,e.datasets[i])&&"StackedBar"!=tpdraw(t,e.datasets[i])||(n[i][l].v3="");break;case"Line":case"Radar":n[i][l]={config:a,v1:fmtChartJS(a,p,a.fmtV1),v2:fmtChartJS(a,u,a.fmtV2),v3:fmtChartJS(a,1*e.datasets[i].data[l],a.fmtV3),v5:fmtChartJS(a,1*e.datasets[i].data[l],a.fmtV5),v6:fmtChartJS(a,o[L][l],a.fmtV6),v7:fmtChartJS(a,c[L][l],a.fmtV7),v8:roundToWithThousands(a,fmtChartJS(a,100*e.datasets[i].data[l]/c[L][l],a.fmtV8),a.roundPct),v8T:roundToWithThousands(a,fmtChartJS(a,100*e.datasets[i].data[l]/m,a.fmtV8T),a.roundPct),v11:fmtChartJS(a,i,a.fmtV11),v12:fmtChartJS(a,l,a.fmtV12),lgtxt:p,lgtxt2:u,datavalue:1*e.datasets[i].data[l],diffnext:1*e.datasets[i].data[l],pctvalue:100*e.datasets[i].data[l]/c[L][l],pctvalueT:100*e.datasets[i].data[l]/m,totvalue:c[L][l],cumvalue:r[L][l],maxvalue:o[L][l],minvalue:s[L][l],lmaxvalue:h[L][i],lminvalue:d[L][i],grandtotal:m,firstNotMissing:g[i],lastNotMissing:A[i],prevNotMissing:w,prevMissing:F,nextNotMissing:-1,j:l,i:i,data:e},S[L][l]>=0?(n[i][l].v4=fmtChartJS(a,S[L][l]!=-1?1*e.datasets[i].data[l]-n[S[L][l]][l].datavalue:1*e.datasets[i].data[l],a.fmtV4),n[i][l].diffprev=S[L][l]!=-1?1*e.datasets[i].data[l]-n[S[L][l]][l].datavalue:1*e.datasets[i].data[l],n[S[L][l]][l].diffnext=e.datasets[S[L][l]].data[l]-e.datasets[i].data[l],n[S[L][l]][l].v5=n[S[L][l]][l].diffnext):n[i][l].v4=1*e.datasets[i].data[l],S[L][l]=i}if(w!=-1)for(k=w;k<l;k++)n[i][k].nextNotMissing=l;w=l}else switch(F=l,tpdraw(t,e.datasets[i])){case"PolarArea":case"Doughnut":case"Pie":if(0==i){if(0==l){var H=((a.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);H<=a.zeroValue&&(H=2*Math.PI)}D[l]=((-a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),M[l]=((a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),"PolarArea"==t.tpchart&&(D[l]+=O[l]*(H/B),M[l]-=O[l]*(H/B)),P[l]=D[l]}case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":n[i][l]={v1:p,lmaxvalue:h[L][i],lminvalue:d[L][i],firstNotMissing:f[l],lastNotMissing:x[l],prevNotMissing:w,prevMissing:F,grandtotal:m};break;case"Line":case"Radar":n[i][l]={v1:p,lmaxvalue:h[L][i],lminvalue:d[L][i],firstNotMissing:g[i],lastNotMissing:A[i],prevNotMissing:w,prevMissing:F,grandtotal:m}}}}return n}function initPassVariableData_part2(e,a,t,i,l,n,o){function s(e,a,i,l,n,o){if("object"==typeof i.datasets[e].xPos&&"undefined"!=typeof i.datasets[e].xPos[Math.floor(a+t.zeroValue)]){var r=n*o,c="undefined"!=typeof i.xBegin?i.xBegin:"number"!=typeof(1*i.labels[0])||isNaN(1*i.labels[0])?0:1*i.labels[0],h="undefined"!=typeof i.xEnd?i.xEnd:"number"!=typeof(1*i.labels[i.labels.length-1])||isNaN(1*i.labels[i.labels.length-1])?i.labels.length-1:1*i.labels[i.labels.length-1];if(h<=c&&(h=c+100),1*i.datasets[e].xPos[Math.floor(a+t.zeroValue)]>=c&&i.datasets[e].xPos[Math.floor(a+t.zeroValue)]<=h){var d=l+r*((1*i.datasets[e].xPos[Math.floor(a+t.zeroValue)]-c)/(h-c)),p=d;return Math.abs(a-Math.floor(a+t.zeroValue))>t.zeroValue&&(p=s(e,Math.ceil(a-t.zeroValue),i)),d+(a-Math.floor(a+t.zeroValue))*(p-d)}}return l+n*a}function r(e,a,t,i){if(e)return h(d(a)*i-d(t.graphMin)*i,void 0,0);var l=t.steps*t.stepValue,n=a-t.graphMin,o=h(n/l,1,0);return i*t.steps*o}function c(e,a,t){var i=a.steps*a.stepValue,l=e-a.graphMin,n=h(l/i,1,0);return t*a.steps*n}function h(e,a,t){return isNumber(a)&&e>a?a:isNumber(t)&&e<t?t:e}function d(e){return Math.log(e)/Math.LN10}var p,u,S=0,g=new Array(a.datasets.length),A=new Array(a.datasets.length);for(p=0;p<a.datasets.length;p++)switch(tpdraw(i,a.datasets[p])){case"PolarArea":case"Pie":case"Doughnut":for(u=0;u<a.datasets[p].data.length;u++)e[p][u].v7=fmtChartJS(t,o.midPosX,t.fmtV7),e[p][u].v8=fmtChartJS(t,o.midPosY,t.fmtV8),e[p][u].v9=fmtChartJS(t,o.int_radius+(o.ext_radius-o.int_radius)*e[p][u].startRadius,t.fmtV9),e[p][u].v10=fmtChartJS(t,o.int_radius+(o.ext_radius-o.int_radius)*e[p][u].stopRadius,t.fmtV10),"PolarArea"==i.tpchart?(e[p][u].radiusOffset=r(l,1*a.datasets[p].data[u],o.calculatedScale,o.scaleHop),e[p][u].v10=fmtChartJS(t,e[p].radiusOffset,t.fmtV10)):(e[p][u].v10=fmtChartJS(t,o.ext_radius,t.fmtV10),e[p][u].radiusOffset=o.int_radius+(o.ext_radius-o.int_radius)*e[p][u].stopRadius),e[p][u].outerVal=o.outerVal,e[p][u].midPosX=o.midPosX,e[p][u].midPosY=o.midPosY,e[p][u].calculatedScale=o.calculatedScale,e[p][u].scaleHop=o.scaleHop,e[p][u].int_radius=o.int_radius+(o.ext_radius-o.int_radius)*e[p][u].startRadius,e[p][u].ext_radius=o.int_radius+(o.ext_radius-o.int_radius)*e[p][u].stopRadius;break;case"Line":for(u=0;u<a.datasets[p].data.length;u++)e[p][u].xAxisPosY=o.xAxisPosY,e[p][u].yAxisPosX=o.yAxisPosX,e[p][u].valueHop=o.valueHop,e[p][u].nbValueHop=o.nbValueHop,2==a.datasets[p].axis?(e[p][u].scaleHop=o.scaleHop2,e[p][u].zeroY=o.zeroY2,e[p][u].calculatedScale=o.calculatedScale2,e[p][u].logarithmic=o.logarithmic2):(e[p][u].scaleHop=o.scaleHop,e[p][u].zeroY=o.zeroY,e[p][u].calculatedScale=o.calculatedScale,e[p][u].logarithmic=o.logarithmic),e[p][u].xPos=s(p,u,a,o.yAxisPosX,o.valueHop,o.nbValueHop),e[p][u].yAxisPos=o.xAxisPosY-e[p][u].zeroY,"Bar"!=i.tpchart&&"StackedBar"!=i.tpchart||(e[p][u].xPos+=o.valueHop/2,e[p][u].yAxisPosX+=o.valueHop/2),0==u?(e[p][u].lmaxvalue_offset=r(e[p][u].logarithmic,e[p][u].lmaxvalue,e[p][u].calculatedScale,e[p][u].scaleHop)-e[p][u].zeroY,e[p][u].lminvalue_offset=r(e[p][u].logarithmic,e[p][u].lminvalue,e[p][u].calculatedScale,e[p][u].scaleHop)-e[p][u].zeroY):(e[p][u].lmaxvalue_offset=e[p][0].lmaxvalue_offset,e[p][u].lminvalue_offset=e[p][0].lminvalue_offset),"undefined"!=typeof a.datasets[p].data[u]&&(e[p][u].yPosOffset=r(e[p][u].logarithmic,a.datasets[p].data[u],e[p][u].calculatedScale,e[p][u].scaleHop)-e[p][u].zeroY,e[p][u].posY=e[p][u].yAxisPos-e[p][u].yPosOffset),"object"==typeof a.datasets[p].origin&&"undefined"!=typeof a.datasets[p].origin[u]&&(e[p][u].yPosOffsetOrigin=r(e[p][u].logarithmic,a.datasets[p].origin[u],e[p][u].calculatedScale,e[p][u].scaleHop)-e[p][u].zeroY,e[p][u].posYOrigin=e[p][u].yAxisPos-e[p][u].yPosOffsetOrigin),e[p][u].posX=e[p][u].xPos,e[p][u].v9=e[p][u].xPos,e[p][u].v10=e[p][u].posY,e[p][u].annotateStartPosX=e[p][u].xPos,e[p][u].annotateEndPosX=e[p][u].xPos,e[p][u].annotateStartPosY=o.xAxisPosY,e[p][u].annotateEndPosY=o.xAxisPosY-o.msr.availableHeight,e[p][u].D1A=void 0,e[p][u].D1B=void 0;break;case"Radar":var f=2*Math.PI/a.datasets[0].data.length;for(u=0;u<a.datasets[p].data.length;u++)e[p][u].midPosX=o.midPosX,e[p][u].midPosY=o.midPosY,e[p][u].int_radius=0,e[p][u].ext_radius=o.maxSize,e[p][u].radiusOffset=o.maxSize,e[p][u].calculatedScale=o.calculatedScale,e[p][u].scaleHop=o.scaleHop,e[p][u].calculated_offset=r(l,a.datasets[p].data[u],o.calculatedScale,o.scaleHop),e[p][u].offsetX=Math.cos(t.startAngle*Math.PI/180-u*f)*e[p][u].calculated_offset,e[p][u].offsetY=Math.sin(t.startAngle*Math.PI/180-u*f)*e[p][u].calculated_offset,e[p][u].v9=e[p][u].midPosX+e[p][u].offsetX,e[p][u].v10=e[p][u].midPosY-e[p][u].offsetY,e[p][u].posX=e[p][u].midPosX+e[p][u].offsetX,e[p][u].posY=e[p][u].midPosY-e[p][u].offsetY,0==u?e[p][u].calculated_offset_max=r(l,e[p][u].lmaxvalue,o.calculatedScale,o.scaleHop):e[p][u].calculated_offset_max=e[0][u].calculated_offset_max,e[p][u].annotateStartPosX=o.midPosX,e[p][u].annotateEndPosX=o.midPosX+Math.cos(t.startAngle*Math.PI/180-u*f)*o.maxSize,e[p][u].annotateStartPosY=o.midPosY,e[p][u].annotateEndPosY=o.midPosY-Math.sin(t.startAngle*Math.PI/180-u*f)*o.maxSize,Math.abs(e[p][u].annotateStartPosX-e[p][u].annotateEndPosX)<t.zeroValue?(e[p][u].D1A=void 0,e[p][u].D1B=void 0,e[p][u].D2A=0):(e[p][u].D1A=(e[p][u].annotateStartPosY-e[p][u].annotateEndPosY)/(e[p][u].annotateStartPosX-e[p][u].annotateEndPosX),e[p][u].D1B=-e[p][u].D1A*e[p][u].annotateStartPosX+e[p][u].annotateStartPosY,Math.abs(e[p][u].D1A)>=t.zeroValue?e[p][u].D2A=-(1/e[p][u].D1A):e[p][u].D2A=void 0);break;case"Bar":for(u=0;u<a.datasets[p].data.length;u++)e[p][u].xAxisPosY=o.xAxisPosY,e[p][u].yAxisPosX=o.yAxisPosX,e[p][u].valueHop=o.valueHop,e[p][u].barWidth=o.barWidth,e[p][u].additionalSpaceBetweenBars=o.additionalSpaceBetweenBars,e[p][u].nbValueHop=o.nbValueHop,e[p][u].calculatedScale=o.calculatedScale,e[p][u].scaleHop=o.scaleHop,e[p][u].xPosLeft=o.yAxisPosX+Math.ceil(i.chartSpaceScale*t.barValueSpacing)+o.valueHop*u+o.additionalSpaceBetweenBars+o.barWidth*S+Math.ceil(i.chartSpaceScale*t.barDatasetSpacing)*S+Math.ceil(i.chartLineScale*t.barStrokeWidth)*S,e[p][u].xPosRight=e[p][u].xPosLeft+o.barWidth,2==a.datasets[p].axis?(e[p][u].yPosBottom=o.xAxisPosY-o.zeroY2,e[p][u].barHeight=r(n,1*a.datasets[p].data[u],o.calculatedScale2,o.scaleHop2)-o.zeroY2):(e[p][u].yPosBottom=o.xAxisPosY-o.zeroY,e[p][u].barHeight=r(l,1*a.datasets[p].data[u],o.calculatedScale,o.scaleHop)-o.zeroY),e[p][u].yPosTop=e[p][u].yPosBottom-e[p][u].barHeight+Math.ceil(i.chartLineScale*t.barStrokeWidth)/2,e[p][u].v7=e[p][u].xPosLeft,e[p][u].v8=e[p][u].yPosBottom,e[p][u].v9=e[p][u].xPosRight,e[p][u].v10=e[p][u].yPosTop;S++;break;case"StackedBar":for(u=0;u<a.datasets[p].data.length;u++)e[p][u].xAxisPosY=o.xAxisPosY,e[p][u].yAxisPosX=o.yAxisPosX,e[p][u].valueHop=o.valueHop,e[p][u].barWidth=o.barWidth,e[p][u].additionalSpaceBetweenBars=o.additionalSpaceBetweenBars,e[p][u].nbValueHop=o.nbValueHop,e[p][u].calculatedScale=o.calculatedScale,e[p][u].scaleHop=o.scaleHop,"undefined"==typeof g[u]&&(g[u]=0,A[u]=0,zeroY=r(l,0,o.calculatedScale,o.scaleHop)),"undefined"!=typeof a.datasets[p].data[u]&&(e[p][u].xPosLeft=o.yAxisPosX+Math.ceil(i.chartSpaceScale*t.barValueSpacing)+o.valueHop*u+o.additionalSpaceBetweenBars,1*a.datasets[p].data[u]<0?(e[p][u].botval=A[u],e[p][u].topval=A[u]+1*a.datasets[p].data[u],A[u]=A[u]+1*a.datasets[p].data[u]):(e[p][u].botval=g[u],e[p][u].topval=g[u]+1*a.datasets[p].data[u],g[u]=g[u]+1*a.datasets[p].data[u]),e[p][u].xPosRight=e[p][u].xPosLeft+o.barWidth,e[p][u].botOffset=r(l,e[p][u].botval,o.calculatedScale,o.scaleHop),e[p][u].topOffset=r(l,e[p][u].topval,o.calculatedScale,o.scaleHop),e[p][u].yPosBottom=o.xAxisPosY-e[p][u].botOffset,e[p][u].yPosTop=o.xAxisPosY-e[p][u].topOffset,Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)>0&&(1*a.datasets[p].data[u]<0?(e[p][u].yPosBottom+=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar),A[u]==1*a.datasets[p].data[u]&&(e[p][u].yPosBottom-=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)/2),e[p][u].yPosTop<e[p][u].yPosBottom&&(e[p][u].yPosBottom=e[p][u].yPosTop)):1*a.datasets[p].data[u]>0&&(e[p][u].yPosBottom-=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar),g[u]==1*a.datasets[p].data[u]&&(e[p][u].yPosBottom+=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)/2),e[p][u].yPosTop>e[p][u].yPosBottom&&(e[p][u].yPosBottom=e[p][u].yPosTop))),e[p][u].v7=e[p][u].xPosLeft,e[p][u].v8=e[p][u].yPosBottom,e[p][u].v9=e[p][u].xPosRight,e[p][u].v10=e[p][u].yPosTop);break;case"HorizontalBar":for(u=0;u<a.datasets[p].data.length;u++)e[p][u].xAxisPosY=o.xAxisPosY,e[p][u].yAxisPosX=o.yAxisPosX,e[p][u].valueHop=o.valueHop,e[p][u].barWidth=o.barWidth,e[p][u].additionalSpaceBetweenBars=o.additionalSpaceBetweenBars,e[p][u].nbValueHop=o.nbValueHop,e[p][u].calculatedScale=o.calculatedScale,e[p][u].scaleHop=o.scaleHop,e[p][u].xPosLeft=o.yAxisPosX+o.zeroY,e[p][u].yPosTop=o.xAxisPosY+Math.ceil(i.chartSpaceScale*t.barValueSpacing)-o.scaleHop*(u+1)+o.additionalSpaceBetweenBars+o.barWidth*p+Math.ceil(i.chartSpaceScale*t.barDatasetSpacing)*p+Math.ceil(i.chartLineScale*t.barStrokeWidth)*p,e[p][u].yPosBottom=e[p][u].yPosTop+o.barWidth,e[p][u].barWidth=r(l,1*a.datasets[p].data[u],o.calculatedScale,o.valueHop)-o.zeroY,e[p][u].xPosRight=e[p][u].xPosLeft+e[p][u].barWidth,e[p][u].v7=e[p][u].xPosLeft,e[p][u].v8=e[p][u].yPosBottom,e[p][u].v9=e[p][u].xPosRight,e[p][u].v10=e[p][u].yPosTop;break;case"HorizontalStackedBar":for(u=0;u<a.datasets[p].data.length;u++)e[p][u].xAxisPosY=o.xAxisPosY,e[p][u].yAxisPosX=o.yAxisPosX,e[p][u].valueHop=o.valueHop,e[p][u].barWidth=o.barWidth,e[p][u].additionalSpaceBetweenBars=o.additionalSpaceBetweenBars,e[p][u].nbValueHop=o.nbValueHop,e[p][u].calculatedScale=o.calculatedScale,e[p][u].scaleHop=o.scaleHop,0==p&&(g[u]=0,A[u]=0),"undefined"!=typeof a.datasets[p].data[u]&&(e[p][u].xPosLeft=o.yAxisPosX+Math.ceil(i.chartSpaceScale*t.barValueSpacing)+o.valueHop*u,1*a.datasets[p].data[u]<0?(e[p][u].leftval=A[u],e[p][u].rightval=A[u]+1*a.datasets[p].data[u],A[u]=A[u]+1*a.datasets[p].data[u]):(e[p][u].leftval=g[u],e[p][u].rightval=g[u]+1*a.datasets[p].data[u],g[u]=g[u]+1*a.datasets[p].data[u]),e[p][u].rightOffset=c(e[p][u].rightval,o.calculatedScale,o.valueHop),e[p][u].leftOffset=c(e[p][u].leftval,o.calculatedScale,o.valueHop),e[p][u].xPosRight=o.yAxisPosX+e[p][u].rightOffset,e[p][u].xPosLeft=o.yAxisPosX+e[p][u].leftOffset,e[p][u].yPosTop=o.xAxisPosY+Math.ceil(i.chartSpaceScale*t.barValueSpacing)-o.scaleHop*(u+1)+o.additionalSpaceBetweenBars,e[p][u].yPosBottom=e[p][u].yPosTop+o.barWidth,Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)>0&&(1*a.datasets[p].data[u]<0?(e[p][u].xPosLeft-=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar),A[u]==1*a.datasets[p].data[u]&&(e[p][u].xPosLeft+=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)/2),e[p][u].xPosLeft<e[p][u].xPosRight&&(e[p][u].xPosLeft=e[p][u].xPosRight)):1*a.datasets[p].data[u]>0&&(e[p][u].xPosLeft+=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar),g[u]==1*a.datasets[p].data[u]&&(e[p][u].xPosLeft-=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)/2),e[p][u].xPosLeft>e[p][u].xPosRight&&(e[p][u].xPosLeft=e[p][u].xPosRight))),e[p][u].v7=e[p][u].xPosLeft,e[p][u].v8=e[p][u].yPosBottom,e[p][u].v9=e[p][u].xPosRight,e[p][u].v10=e[p][u].yPosTop)}}function isBooleanOptionTrue(e,a){var t;if("undefined"==typeof optionvar){if("function"==typeof a)return!0;if("object"==typeof a){for(t=0;t<a.length;t++)if(a[t])return!0;return!1}return a}if("function"==typeof optionvar)return!0;if("object"==typeof optionvar){for(t=0;t<optionvar.length;t++)if(optionvar[t])return!0;return!1}return optionvar}function setOptionValue(e,a,t,i,l,n,o,s,r,c,h,d,p){var u;if(1==a&&"object"==typeof n.special)for(var S=n.special.length-1;S>=0;S--)if("undefined"!=typeof n.special[S].posi&&"undefined"!=typeof n.special[S].posj&&n.special[S].posi==h&&n.special[S].posj==d&&h!=-1&&d!=-1&&"undefined"!=typeof n.special[S][c])return n.special[S][c];return"undefined"==typeof s?"function"==typeof r?r(i,l,n,o,h,d,p):(u="object"==typeof r?e?r[Math.min(r.length-1,Math.max(0,h))]:r[Math.min(r.length-1,Math.max(0,d))]:r,1!=t&&(u=Math.ceil(u*t)),u):(u="function"==typeof s?s(i,l,n,o,h,d,p):"object"==typeof s?d==-1?s[Math.min(s.length-1,Math.max(0,h))]:s[Math.min(s.length-1,Math.max(0,d))]:s,1!=t&&(u=Math.ceil(u*t)),u)}function tpdraw(e,a){switch(e.tpchart){case"Bar":case"StackedBar":"Line"==a.type?tp="Line":tp=e.tpchart;break;default:tp=e.tpchart}return tp}function setTextBordersAndBackground(e,a,t,i,l,n,o,s,r,c,h,d,p,u,S){var g,A;if("string"!=typeof a){var f=a.toString();g=t*(f.split("\n").length||1),A=e.measureText(f).width}else g=t*(a.split("\n").length||1),A=e.measureText(a).width;var x,m,T;"center"==e.textAlign?(x=-A/2,m=A/2):"left"==e.textAlign?(x=0,m=A):"right"==e.textAlign&&(x=-A,m=0),"top"==e.textBaseline?(T=0,ybottom=g):"center"==e.textBaseline||"middle"==e.textBaseline?(T=-g/2,ybottom=g/2):"bottom"==e.textBaseline&&(T=-g,ybottom=0),e.save(),e.beginPath(),e.translate(i,l),"none"!=p&&(this.lineWidth=0,e.strokeStyle="rgba(0,0,0,0)",e.fillStyle=p,e.drawRectangle({x:x-c,y:ybottom+h,width:m-x+2*c,height:T-ybottom-2*h,borders:n,bordersWidth:r,borderSelection:o,borderRadius:S,fill:!0,stroke:!1})),n&&(e.lineWidth=r,e.strokeStyle=s,"none"!=p?e.fillStyle=p:e.fillStyle="rgba(0,0,0,0)",e.setLineDash(lineStyleFn(d)),e.drawRectangle({x:x-c-isBorder(o,"LEFT")*r/2,y:ybottom+h+isBorder(o,"BOTTOM")*r/2,width:m-x+2*c+(isBorder(o,"LEFT")+isBorder(o,"RIGHT"))*r/2,height:-g-2*h-(isBorder(o,"BOTTOM")+isBorder(o,"TOP"))*r/2,borders:n,bordersWidth:r,borderSelection:o,borderRadius:S,fill:!1,stroke:!0}),e.setLineDash([])),e.beginPath(),e.restore()}function calculatePieDrawingSize(e,a,t,i,l){var n=((t.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),o=((t.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);o<=t.zeroValue&&(o=2*Math.PI);var s=(n-o+4*Math.PI)%(2*Math.PI),r=s+o,c=Math.floor((s+t.zeroValue)/(Math.PI/2)%4),h=Math.floor((r-t.zeroValue)/(Math.PI/2)%4),d=[0,0,0,0];if(c<=h)for(var p=c;p<=h;p++)d[p]=1;else{for(var p=c;p<4;p++)d[p]=1;for(var p=0;p<=h;p++)d[p]=1}0==d[0]&&0==d[1]?(midPieY=a.topNotUsableHeight+5,doughnutRadius=a.availableHeight-5):0==d[2]&&0==d[3]?(midPieY=a.topNotUsableHeight+a.availableHeight,
doughnutRadius=a.availableHeight-5):(midPieY=a.topNotUsableHeight+a.availableHeight/2,doughnutRadius=a.availableHeight/2-5);var u;0==d[0]&&0==d[3]?(midPieX=a.leftNotUsableWidth+a.availableWidth-5,doughnutRadius=Math.min(doughnutRadius,a.availableWidth-5),u=a.availableWidth-5):0==d[1]&&0==d[2]?(midPieX=a.leftNotUsableWidth+5,doughnutRadius=Math.min(doughnutRadius,a.availableWidth-5),u=a.availableWidth-5):(midPieX=a.leftNotUsableWidth+a.availableWidth/2,doughnutRadius=Math.min(doughnutRadius,a.availableWidth/2-5),u=a.availableWidth/2-5);var S=i.labels.length-1;if(isBooleanOptionTrue(void 0,t.inGraphDataShow)&&3==setOptionValue(!1,!0,1,"INGRAPHDATARADIUSPOSITION",e,i,l,void 0,t.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",0,S,{nullValue:!0})&&"off-center"==setOptionValue(!1,!0,1,"INGRAPHDATAALIGN",e,i,l,void 0,t.inGraphDataAlign,"inGraphDataAlign",0,S,{nullValue:!0})&&0==setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",e,i,l,void 0,t.inGraphDataRotate,"inGraphDataRotate",0,S,{nullValue:!0})){doughnutRadius=doughnutRadius-setOptionValue(!1,!0,e.chartTextScale,"INGRAPHDATAFONTSIZE",e,i,l,void 0,t.inGraphDataFontSize,"inGraphDataFontSize",0,S,{nullValue:!0})-setOptionValue(!1,!0,1,"INGRAPHDATAPADDINGRADIUS",e,i,l,void 0,t.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",0,S,{nullValue:!0})-5;for(var g,p=0;p<i.datasets.length;p++)if("undefined"!=typeof i.datasets[p].data[S]&&1*i.datasets[p].data[S]>=0){e.font=setOptionValue(!1,!0,1,"INGRAPHDATAFONTSTYLE",e,i,l,void 0,t.inGraphDataFontStyle,"inGraphDataFontStyle",p,S,{nullValue:!0})+" "+setOptionValue(!1,!0,e.chartTextScale,"INGRAPHDATAFONTSIZE",e,i,l,void 0,t.inGraphDataFontSize,"inGraphDataFontSize",p,S,{nullValue:!0})+"px "+setOptionValue(!1,!0,1,"INGRAPHDATAFONTFAMILY",e,i,l,void 0,t.inGraphDataFontFamily,"inGraphDataFontFamily",p,S,{nullValue:!0}),1==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",e,i,l,void 0,t.inGraphDataAnglePosition,"inGraphDataAnglePosition",p,S,{nullValue:!0})?g=n+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",e,i,l,void 0,t.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",p,S,{nullValue:!0})*(Math.PI/180):2==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",e,i,l,void 0,t.inGraphDataAnglePosition,"inGraphDataAnglePosition",p,S,{nullValue:!0})?g=n-l[p][S].segmentAngle/2+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",e,i,l,void 0,t.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",p,S,{nullValue:!0})*(Math.PI/180):3==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",e,i,l,void 0,t.inGraphDataAnglePosition,"inGraphDataAnglePosition",p,S,{nullValue:!0})&&(g=n-l[p][S].segmentAngle+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",e,i,l,void 0,t.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",p,S,{nullValue:!0})*(Math.PI/180)),n-=l[p][S].segmentAngle;var A=tmplbis(setOptionValue(!1,!0,1,"INGRAPHDATATMPL",e,i,l,void 0,t.inGraphDataTmpl,"inGraphDataTmpl",p,S,{nullValue:!0}),l[p][S],t),f=e.measureTextMultiLine(A).textWidth,x=Math.abs((u-f)/Math.cos(g))-setOptionValue(!1,!0,1,"INGRAPHDATAPADDINGRADIUS",e,i,l,void 0,t.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",p,S,{nullValue:!0})-5;x<doughnutRadius&&(doughnutRadius=x)}}return doughnutRadius*=t.radiusScale,{radius:doughnutRadius,midPieX:midPieX,midPieY:midPieY}}function drawGridScale(e,a,t,i,l,n,o,s,r,c,h){var d,p,u,S,g,A=!1,f=!1;if(t.drawXScaleLine!==!1)for(var x=0;x<t.drawXScaleLine.length;x++){var m;switch(t.drawXScaleLine[x].position){case"bottom":m=n,A=!0;break;case"top":m=n-c*r,f=!0;break;case"0":case 0:m=n,0!=o?m=n-o:A=!0,Math.abs(m-(n-c*r))<t.zeroValue&&(f=!0)}drawScaleLine(e,l-Math.ceil(e.chartLineScale*t.scaleTickSizeLeft),m,l+i.availableWidth+Math.ceil(e.chartLineScale*t.scaleTickSizeRight),m,t.drawXScaleLine[x].lineWidth?t.drawXScaleLine[x].lineWidth:Math.ceil(e.chartLineScale*t.scaleLineWidth),t.drawXScaleLine[x].lineColor?t.drawXScaleLine[x].lineColor:t.scaleLineColor,t.scaleGridLineStyle)}for(d=-1+(1==A);d<c;d++)if(d<c-(1==f)&&(d==-1&&t.xAxisBottom||d==c-1&&t.xAxisTop||t.scaleShowGridLines&&(d+1)%t.scaleYGridLinesStep==0?(drawFirst=!1,t.scaleTickSizeLeft>0&&drawScaleLine(e,l-Math.ceil(e.chartLineScale*t.scaleTickSizeLeft),n-(d+1)*r,l,n-(d+1)*r,Math.ceil(e.chartLineScale*t.scaleGridLineWidth),"gridLine"!=t.tickColor&&t.yAxisLeft?t.scaleLineColor:t.scaleGridLineColor,t.scaleGridLineStyle),drawScaleLine(e,l,n-(d+1)*r,l+i.availableWidth,n-(d+1)*r,Math.ceil(e.chartLineScale*t.scaleGridLineWidth),t.scaleGridLineColor,t.scaleGridLineStyle),t.scaleTickSizeRight>0&&drawScaleLine(e,l+i.availableWidth,n-(d+1)*r,l+i.availableWidth+Math.ceil(e.chartLineScale*t.scaleTickSizeRight),n-(d+1)*r,Math.ceil(e.chartLineScale*t.scaleGridLineWidth),"gridLine"!=t.tickColor&&t.yAxisRight?t.scaleLineColor:t.scaleGridLineColor,t.scaleGridLineStyle)):(t.scaleTickSizeLeft>0&&drawScaleLine(e,l-Math.ceil(e.chartLineScale*t.scaleTickSizeLeft),n-(d+1)*r,l,n-(d+1)*r,Math.ceil(e.chartLineScale*t.scaleGridLineWidth),"gridLine"!=t.tickColor&&t.yAxisLeft?t.scaleLineColor:t.scaleGridLineColor,t.scaleGridLineStyle),t.scaleTickSizeRight>0&&drawScaleLine(e,l+i.availableWidth,n-(d+1)*r,l+i.availableWidth+Math.ceil(e.chartLineScale*t.scaleTickSizeRight),n-(d+1)*r,Math.ceil(e.chartLineScale*t.scaleGridLineWidth),"gridLine"!=t.tickColor&&t.yAxisRight?t.scaleLineColor:t.scaleGridLineColor,t.scaleGridLineStyle))),t.scaleMinorTickVerticalCount>0&&d!=-1)for(u=r/(t.scaleMinorTickVerticalCount+1),p=1;p<t.scaleMinorTickVerticalCount+1;p++)t.scaleMinorTickHorizontalLines?(t.scaleMinorTickSizeLeft>0&&drawScaleLine(e,l-Math.ceil(e.chartLineScale*t.scaleMinorTickSizeLeft),n-(d+1)*r+p*u,l,n-(d+1)*r+p*u,Math.ceil(e.chartLineScale*t.scaleMinorTickWidth),"gridLine"!=t.minorTickColor&&t.yAxisLeft?t.scaleLineColor:t.scaleMinorTickColor,t.scaleMinorTickStyle),drawScaleLine(e,l,n-(d+1)*r+p*u,l+i.availableWidth,n-(d+1)*r+p*u,Math.ceil(e.chartLineScale*t.scaleMinorTickWidth),t.scaleMinorTickColor,t.scaleMinorTickStyle),t.scaleMinorTickSizeRight>0&&drawScaleLine(e,l+i.availableWidth,n-(d+1)*r+p*u,l+i.availableWidth+Math.ceil(e.chartLineScale*t.scaleMinorTickSizeRight),n-(d+1)*r+p*u,Math.ceil(e.chartLineScale*t.scaleMinorTickWidth),"gridLine"!=t.minorTickColor&&t.yAxisRight?t.scaleLineColor:t.scaleMinorTickColor,t.scaleMinorTickStyle)):(t.scaleMinorTickSizeLeft>0&&drawScaleLine(e,l-Math.ceil(e.chartLineScale*t.scaleMinorTickSizeLeft),n-(d+1)*r+p*u,l,n-(d+1)*r+p*u,Math.ceil(e.chartLineScale*t.scaleMinorTickWidth),"gridLine"!=t.minorTickColor&&t.yAxisLeft?t.scaleLineColor:t.scaleMinorTickColor,t.scaleMinorTickStyle),t.scaleMinorTickSizeRight>0&&drawScaleLine(e,l+i.availableWidth,n-(d+1)*r+p*u,l+i.availableWidth+Math.ceil(e.chartLineScale*t.scaleMinorTickSizeRight),n-(d+1)*r+p*u,Math.ceil(e.chartLineScale*t.scaleMinorTickWidth),"gridLine"!=t.minorTickColor&&t.yAxisRight?t.scaleLineColor:t.scaleMinorTickColor,t.scaleMinorTickStyle));var S,g;for(d=0;d<h;d++)if(e.beginPath(),0==d&&t.yAxisLeft||d==h-1&&t.yAxisRight?(S=t.scaleLineColor,g=t.scaleLineWidth):(S=t.scaleGridLineColor,g=t.scaleGridLineWidth),0==d&&t.yAxisLeft||d==h-1&&t.yAxisRight||d==h-1&&t.scaleTickSizeRight>0||t.scaleShowGridLines&&d%t.scaleXGridLinesStep==0?(t.scaleTickSizeBottom>0&&drawScaleLine(e,l+d*s,n+Math.ceil(e.chartLineScale*t.scaleTickSizeBottom),l+d*s,n,Math.ceil(e.chartLineScale*g),"gridLine"!=t.tickColor&&A?t.scaleLineColor:S,t.scaleGridLineStyle),drawScaleLine(e,l+d*s,n,l+d*s,n-i.availableHeight,Math.ceil(e.chartLineScale*g),S,t.scaleGridLineStyle),t.scaleTickSizeTop>0&&drawScaleLine(e,l+d*s,n-i.availableHeight,l+d*s,n-i.availableHeight-Math.ceil(e.chartLineScale*t.scaleTickSizeTop),Math.ceil(e.chartLineScale*g),"gridLine"!=t.tickColor&&f?t.scaleLineColor:S,t.scaleGridLineStyle)):(t.scaleTickSizeBottom>0&&drawScaleLine(e,l+d*s,n,l+d*s,n+Math.ceil(e.chartLineScale*t.scaleTickSizeBottom),Math.ceil(e.chartLineScale*t.scaleGridLineWidth),"gridLine"!=t.tickColor&&A?t.scaleLineColor:t.scaleGridLineColor,t.scaleGridLineStyle),t.scaleTickSizeTop>0&&drawScaleLine(e,l+d*s,n-i.availableHeight,l+d*s,n-i.availableHeight-Math.ceil(e.chartLineScale*t.scaleTickSizeTop),Math.ceil(e.chartLineScale*t.scaleGridLineWidth),"gridLine"!=t.tickColor&&f?t.scaleLineColor:t.scaleGridLineColor,t.scaleGridLineStyle)),d<h-1&&t.scaleMinorTickHorizontalCount>0)for(u=s/(t.scaleMinorTickHorizontalCount+1),p=1;p<t.scaleMinorTickHorizontalCount+1;p++)t.scaleMinorTickVerticalLines?(t.scaleMinorTickSizeTop>0&&drawScaleLine(e,l+d*s+p*u,n-i.availableHeight-Math.ceil(e.chartLineScale*t.scaleMinorTickSizeTop),l+d*s+p*u,n-i.availableHeight,Math.ceil(e.chartLineScale*t.scaleMinorTickWidth),"gridLine"!=t.minorTickColor&&A?t.scaleLineColor:t.scaleMinorTickColor,t.scaleMinorTickStyle),drawScaleLine(e,l+d*s+p*u,n-i.availableHeight,l+d*s+p*u,n,Math.ceil(e.chartLineScale*t.scaleMinorTickWidth),t.scaleMinorTickColor,t.scaleMinorTickStyle),t.scaleMinorTickSizeBottom>0&&drawScaleLine(e,l+d*s+p*u,n,l+d*s+p*u,n+Math.ceil(e.chartLineScale*t.scaleMinorTickSizeBottom),Math.ceil(e.chartLineScale*t.scaleMinorTickWidth),"gridLine"!=t.minorTickColor&&A?t.scaleLineColor:t.scaleMinorTickColor,t.scaleMinorTickStyle)):(t.scaleMinorTickSizeBottom>0&&drawScaleLine(e,l+d*s+p*u,n,l+d*s+p*u,n+Math.ceil(e.chartLineScale*t.scaleMinorTickSizeBottom),Math.ceil(e.chartLineScale*t.scaleMinorTickWidth),"gridLine"!=t.minorTickColor&&A?t.scaleLineColor:t.scaleMinorTickColor,t.scaleMinorTickStyle),t.scaleMinorTickSizeTop>0&&drawScaleLine(e,l+d*s+p*u,n-i.availableHeight-Math.ceil(e.chartLineScale*t.scaleMinorTickSizeTop),l+d*s+p*u,n-i.availableHeight,Math.ceil(e.chartLineScale*t.scaleMinorTickWidth),"gridLine"!=t.minorTickColor&&f?t.scaleLineColor:t.scaleMinorTickColor,t.scaleMinorTickStyle))}function drawScaleLine(e,a,t,i,l,n,o,s){e.beginPath(),e.moveTo(a,t),e.lineWidth=n,e.strokeStyle=o,e.lineTo(i,l),e.setLineDash(lineStyleFn(s)),e.stroke(),e.setLineDash([])}function drawTick(e,a,t,i,l,n,o,s,r,c,h){var d,p;for(d=0==a?(i-t)/(o+1):(n-l)/(o+1),p=1;p<=o;p++)e.beginPath(),e.moveTo(t+p*d*(0==a),l+p*d*(1==a)),e.lineWidth=Math.ceil(e.chartLineScale*r),e.strokeStyle=c,e.lineTo(t+p*d*(0==a)+s*(1==a),l+p*d*(1==a)-s*(0==a)),e.setLineDash(lineStyleFn(h)),e.stroke(),e.setLineDash([])}function isBorder(e,a){var t=e;if(t>=8){if("RIGHT"==a)return!0;t-=8}if(t>=4){if("TOP"==a)return!0;t-=4}if(t>=2){if("LEFT"==a)return!0;t-=2}if(t>=1){if("BOTTOM"==a)return!0;t-=1}return!1}function convertData(e,a){console.log("GENERATE:"+a),a&&console.log("var data = {"),a&&console.log('     labels : [""],'),a&&console.log("     datasets : [");for(var t={labels:[""],datasets:[]},i=0;i<e.length;i++)a&&console.log("           {"),t.datasets[i]={data:[]},"undefined"!=typeof e[i].value?(a&&console.log("      data : ["+e[i].value+"],"),t.datasets[i].data=[e[i].value]):(a&&console.log("      data : ["+e[i].value+"],"),t.datasets[i].data=[]),"undefined"!=typeof e[i].color&&(a&&console.log('      fillColor : "'+e[i].color+'",'),t.datasets[i].fillColor=e[i].color),"undefined"!=typeof e[i].title&&(a&&console.log('      title : "'+e[i].title+'",'),t.datasets[i].title=e[i].title),"undefined"!=typeof e[i].link&&(a&&console.log('      link : "'+e[i].link+'",'),t.datasets[i].link=e[i].link),"undefined"!=typeof e[i].imageLoad&&(a&&console.log("      imageLoad : <image>,"),t.datasets[i].imageLoad=e[i].imageLoad),"undefined"!=typeof e[i].imagePos&&(a&&console.log("      imagePos : "+e[i].imagePos+","),t.datasets[i].imagePos=e[i].imagePos),"undefined"!=typeof e[i].imageHeight&&(a&&console.log("      imageHeight : "+e[i].imageHeight+","),t.datasets[i].imageHeight=e[i].imageHeight),"undefined"!=typeof e[i].imageWidth&&(a&&console.log("      imageWidth : "+e[i].imageWidth+","),t.datasets[i].imageWidth=e[i].imageWidth),"undefined"!=typeof e[i].text&&(a&&console.log('      text : "'+e[i].text+'",'),t.datasets[i].text=e[i].text),"undefined"!=typeof e[i].fontStyle&&(a&&console.log('      fontStyle : "'+e[i].fontStyle+'",'),t.datasets[i].fontStyle=e[i].fontStyle),"undefined"!=typeof e[i].fontSize&&(a&&console.log("      fontSize : "+e[i].fontSize+","),t.datasets[i].fontSize=e[i].fontSize),"undefined"!=typeof e[i].expandOutRadius&&(a&&console.log("      expandOutRadius : "+e[i].expandOutRadius+","),t.datasets[i].expandOutRadius=e[i].expandOutRadius),"undefined"!=typeof e[i].expandInRadius&&(a&&console.log("      expandInRadius : "+e[i].expandInRadius+","),t.datasets[i].expandInRadius=e[i].expandInRadius),"undefined"!=typeof e[i].gradientColors&&(a&&console.log("      gradientColors : < put here the gradient Colors definitions> "+e[i].gradientColors+","),t.datasets[i].gradientColors=e[i].gradientColors),a&&(console.log("      nothing : true    // line added to avoid a comma after last line"),i==e.length-1?console.log("           }"):console.log("           },"));return a&&console.log("]"),e.length>0&&("undefined"!=typeof e[0].shapesInChart&&(t.shapesInChart=e[0].shapesInChart),a&&(console.log("     ,"),console.log("     <   put here the shapesInChart    >"))),a&&console.log("};"),t}var annotate_shape="divCursor",chartJSLineStyle=[];chartJSLineStyle.solid=[],chartJSLineStyle.dotted=[1,4],chartJSLineStyle.shortDash=[2,1],chartJSLineStyle.dashed=[4,2],chartJSLineStyle.dashSpace=[4,6],chartJSLineStyle.longDashDot=[7,2,1,2],chartJSLineStyle.longDashShortDash=[10,4,4,4],chartJSLineStyle.gradient=[1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,9,9,8,8,7,7,6,6,5,5,4,4,3,3,2,2,1],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var a=Object(this),t=a.length>>>0;if(0===t)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&i!=1/0&&i!=-(1/0)&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=t)return-1;for(var l=i>=0?i:Math.max(t-Math.abs(i),0);l<t;l++)if(l in a&&a[l]===e)return l;return-1});var charJSPersonalDefaultOptions={},charJSPersonalDefaultOptionsLine={},charJSPersonalDefaultOptionsRadar={},charJSPersonalDefaultOptionsPolarArea={},charJSPersonalDefaultOptionsPie={},charJSPersonalDefaultOptionsDoughnut={},charJSPersonalDefaultOptionsBar={},charJSPersonalDefaultOptionsStackedBar={},charJSPersonalDefaultOptionsHorizontalBar={},charJSPersonalDefaultOptionsHorizontalStackedBar={},cachebis={};"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.fillTextMultiLine=function(e,a,t,i,l,n,o,s,r,c,h,d,p,u){var S=(""+e).split("\n");"middle"==i?n&&(t-=(S.length-1)/2*l):"bottom"==i&&n&&(t-=(S.length-1)*l);for(var g=t-l,A=0;A<S.length;A++)this.fillText(S[A],a,t),t+=l;if(o){var f=s.measureTextMultiLine(e,l),x=[],g=[];x.p1=h+a,g.p1=d+t-l;var m=Math.PI/2+c;"left"==s.textAlign&&"top"==i?(x.p1+=l*Math.cos(m),g.p1+=l*Math.sin(m)):"left"==s.textAlign&&"middle"==i?(x.p1+=l/2*Math.cos(m),g.p1+=l/2*Math.sin(m)):"left"==s.textAlign&&"bottom"==i||("center"==s.textAlign&&"top"==i?(x.p1+=l*Math.cos(m)-f.textWidth/2*Math.cos(c),g.p1+=l*Math.sin(m)-f.textWidth/2*Math.sin(c)):"center"==s.textAlign&&"middle"==i?(x.p1+=l/2*Math.cos(m)-f.textWidth/2*Math.cos(c),g.p1+=l/2*Math.sin(m)-f.textWidth/2*Math.sin(c)):"center"==s.textAlign&&"bottom"==i?(x.p1-=f.textWidth/2*Math.cos(c),g.p1-=f.textWidth/2*Math.sin(c)):"right"==s.textAlign&&"top"==i?(x.p1+=l*Math.cos(m)-f.textWidth*Math.cos(c),g.p1+=l*Math.sin(m)-f.textWidth*Math.sin(c)):"right"==s.textAlign&&"middle"==i?(x.p1+=l/2*Math.cos(m)-f.textWidth*Math.cos(c),g.p1+=l/2*Math.sin(m)-f.textWidth*Math.sin(c)):"right"==s.textAlign&&"bottom"==i&&(x.p1-=f.textWidth*Math.cos(c),g.p1-=f.textWidth*Math.sin(c))),x.p2=x.p1+f.textWidth*Math.cos(c),g.p2=g.p1+f.textWidth*Math.sin(c),x.p3=x.p1-l*Math.cos(m),g.p3=g.p1-l*Math.sin(m),x.p4=x.p3+f.textWidth*Math.cos(c),g.p4=g.p3+f.textWidth*Math.sin(c),jsTextMousePos[s.ChartNewId][jsTextMousePos[s.ChartNewId].length]=[r,e,x,g,c,f.textWidth,f.textHeight,p,u]}},CanvasRenderingContext2D.prototype.measureTextMultiLine=function(e,a){var t,i=0,l=0,n=(""+e).replace(/<BR>/gi,"\n").split("\n");n.length>0&&(l=a+1.5*(n.length-1)*l);for(var l=n.length*a,o=0;o<n.length;o++)t=this.measureText(n[o]).width,t>i&&(i=t);return{textWidth:i,textHeight:l}},"function"!=typeof CanvasRenderingContext2D.prototype.setLineDash&&(CanvasRenderingContext2D.prototype.setLineDash=function(e){return 0}),CanvasRenderingContext2D.prototype.drawRectangle=function(e){var a=this.fillStyle;"undefined"==typeof e.x&&(e.x=0),e.width<0&&(e.x+=e.width,e.width*=-1),e.height<0&&(e.y+=e.height,e.height*=-1),"undefined"==typeof e.y&&(e.y=0),"undefined"==typeof e.y&&(e.y=0),"undefined"!=typeof e.backgroundColor&&(this.fillStyle=e.backgroundColor),"undefined"==typeof e.borderRadius&&(e.borderRadius=0),"undefined"==typeof e.borderSelection&&(e.borderSelection=15);var t=parseInt(e.borderRadius);if(e.borders&&e.bordersWidth>5&&"rgba(0,0,0,0)"!=this.fillStyle&&(t=0),e.borders&&e.fill&&15==e.borderSelection&&t>0)return this;if(0==t&&1==e.fill&&this.fillRect(e.x,e.y,e.width,e.height),0==t&&e.borderSelection>=15&&1==e.stroke&&this.strokeRect(e.x,e.y,e.width,e.height),(0!=t||e.borderSelection<15&&1==e.stroke)&&(t>e.width/2&&(t=e.width/2),e.height<e.width&&t>e.height/2&&(t=e.height/2),e.fill&&(this.beginPath(),this.lineWidth=0,this.strokeStyle="rgba(0,0,0,0)",this.moveTo(e.x+t,e.y),this.lineTo(e.x+e.width-t,e.y),this.arc(e.x+e.width-t,e.y+t,t,1.5*Math.PI,0),this.lineTo(e.x+e.width,e.y+e.height-t),this.arc(e.x+e.width-t,e.y+e.height-t,t,0,.5*Math.PI),this.lineTo(e.x+t,e.y+e.height),this.arc(e.x+t,e.y+e.height-t,t,.5*Math.PI,1*Math.PI),this.lineTo(e.x,e.y+t),this.arc(e.x+t,e.y+t,t,1*Math.PI,1.5*Math.PI),this.closePath(),this.fill(),this.stroke()),1==e.stroke)){var i=0==isBorder(e.borderSelection,"LEFT"),l=0==isBorder(e.borderSelection,"RIGHT"),n=0==isBorder(e.borderSelection,"TOP"),o=0==isBorder(e.borderSelection,"BOTTOM");0!=n||1!=i&&15!=e.borderSelection||(n=!0,this.beginPath(),this.moveTo(e.x+t,e.y),this.lineTo(e.x+e.width-t,e.y),isBorder(e.borderSelection,"RIGHT")?this.arc(e.x+e.width-t,e.y+t,t,1.5*Math.PI,0):this.stroke()),0!=l||1!=n&&15!=e.borderSelection||(l=!0,0==isBorder(e.borderSelection,"TOP")&&(this.beginPath(),this.moveTo(e.x+e.width,e.y+t)),this.lineTo(e.x+e.width,e.y+e.height-t),isBorder(e.borderSelection,"BOTTOM")?this.arc(e.x+e.width-t,e.y+e.height-t,t,0,.5*Math.PI):this.stroke()),0!=o||1!=l&&15!=e.borderSelection||(o=!0,0==isBorder(e.borderSelection,"RIGHT")&&(this.beginPath(),this.moveTo(e.x+e.width-t,e.y+e.height)),this.lineTo(e.x+t,e.y+e.height),isBorder(e.borderSelection,"LEFT")?this.arc(e.x+t,e.y+e.height-t,t,.5*Math.PI,1*Math.PI):this.stroke()),0!=i||1!=o&&15!=e.borderSelection||(i=!0,0==isBorder(e.borderSelection,"BOTTOM")&&(this.beginPath(),this.moveTo(e.x,e.y+e.height-t)),this.lineTo(e.x,e.y+t),isBorder(e.borderSelection,"TOP")?(this.arc(e.x+t,e.y+t,t,1*Math.PI,1.5*Math.PI),15==e.borderSelection&&(this.closePath(),this.stroke())):this.stroke()),0!=n||1!=i&&15!=e.borderSelection||(n=!0,0==isBorder(e.borderSelection,"LEFT")&&(this.beginPath(),this.moveTo(e.x+t,e.y)),this.lineTo(e.x+e.width-t,e.y),isBorder(e.borderSelection,"RIGHT")?this.arc(e.x+e.width-t,e.y+t,t,1.5*Math.PI,0):this.stroke()),0!=l||1!=n&&15!=e.borderSelection||(l=!0,0==isBorder(e.borderSelection,"TOP")&&(this.beginPath(),this.moveTo(e.x+e.width,e.y+t)),this.lineTo(e.x+e.width,e.y+e.height-t),isBorder(e.borderSelection,"BOTTOM")?this.arc(e.x+e.width-t,e.y+e.height-t,t,0,.5*Math.PI):this.stroke()),"rgba(0,0,0,0)"!=this.fillStyle&&15==e.borderSelection&&this.fill()}return this.fillStyle=a,this}),cursorDivCreated=!1,initChartJsResize=!1;var jsGraphResize=new Array,container;bw=new checkBrowser,fromLeft=10,fromTop=10,"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var dynamicDisplay=new Array,dynamicDisplayList=new Array,jsGraphAnnotate=new Array,jsTextMousePos=new Array,mouseActionData=new Array,inMouseAction=new Array;window.Chart=function(context){function init_and_start(e,a,t){var i;if("undefined"==typeof e.initialWidth){e.prevStyleWidth=e.canvas.style.width,e.prevStyleHeight=e.canvas.style.height;var l=window.getComputedStyle(e.canvas).getPropertyValue("width");1*e.canvas.width!=1*l.substring(0,l.indexOf("px"))&&("undefined"==typeof e.initialWidth&&(e.vWidth=1),e.canvas.width=l.substring(0,l.indexOf("px")));var n=window.getComputedStyle(e.canvas).getPropertyValue("height");e.canvas.height=n.substring(0,n.indexOf("px"))}if("undefined"==typeof e.initialWidth&&(e.initialWidth=e.canvas.width),"undefined"==typeof e.chartTextScale&&(e.chartTextScale=t.chartTextScale),"undefined"==typeof e.chartLineScale&&(e.chartLineScale=t.chartLineScale),"undefined"==typeof e.chartSpaceScale&&(e.chartSpaceScale=t.chartSpaceScale),"undefined"==typeof e.firstPass&&(e.firstPass=0,t.responsive&&!t.multiGraph&&addResponsiveChart(e.ChartNewId,e,a,t),"undefined"==typeof a.labels&&(a.labels=[]),0==a.labels.length)){var o=0;for(i=0;i<a.datasets.length;i++)o=Max([o,a.datasets[i].data.length]);for(i=0;i<o;i++)a.labels[i]=""}if("undefined"==typeof e.ChartNewId){e.runanimationcompletefunction=!0;var s=new Date,r=s.getTime();e.ChartNewId=e.tpchart+"_"+r,e._eventListeners={}}if(resizeCtx(e,t),!dynamicFunction(a,t,e))return!1;for(t.multiGraph||0==e.firstPass||clearAnnotate(e.ChartNewId),"undefined"==typeof jsGraphAnnotate[e.ChartNewId]&&(jsGraphAnnotate[e.ChartNewId]=new Array,jsTextMousePos[e.ChartNewId]=new Array),i=0;i<a.datasets.length;i++)"undefined"==typeof a.datasets[i].title&&"undefined"!=typeof a.datasets[i].label&&(a.datasets[i].title=a.datasets[i].label);return defMouse(e,a,t),0==e.firstPass&&(t.animation?e.firstPass=1:e.firstPass=2),setRect(e,t),!0}function init_result(e,a,t){var i,l,n=0,o=0;for(i=0;i<a.datasets.length;i++)if("undefined"!=typeof a.datasets[i].xPos&&"Line"==e.tpchart)for(n+=a.datasets[i].xPos.length,l=0;l<a.datasets[i].xPos.length;l++)o+=!("undefined"==typeof a.datasets[i].xPos[l]);else for(n+=a.labels.length,l=0;l<a.datasets[i].data.length;l++)("Pie"==e.tpchart||"Doughnut"==e.tpchart)&&1*a.datasets[i].data[l]<=0||("StackedBar"==e.tpchart||"HorizontalStackedBar"==e.tpchart)&&Math.abs(1*a.datasets[i].data[l])<=.001||"undefined"==typeof a.datasets[i].data[l]||o++;e.pieces_drawn={total_data:n,total_non_missing_data:o,total_missing_data:n-o,all_drawn:!1,completed:!1,total_drawn:0,points:0,rectangles:0,slices:0}}function close_result(e){e.pieces_drawn.completed=!0,e.pieces_drawn.total_non_missing_data==e.pieces_drawn.total_drawn&&(e.pieces_drawn.all_drawn=!0)}function reverseData(e){e.labels=e.labels.reverse();for(var a=0;a<e.datasets.length;a++)for(var t in e.datasets[a])Array.isArray(e.datasets[a][t])&&(e.datasets[a][t]=e.datasets[a][t].reverse());return e}function calculateOffset(e,a,t,i){if(e)return CapValue(log10(a)*i-log10(t.graphMin)*i,void 0,0);var l=t.steps*t.stepValue,n=a-t.graphMin,o=CapValue(n/l,1,0);return i*t.steps*o}function animationLoop(e,a,t,i,l,n,o,s,r,c,h,d,p,u,S){function g(){var g=e.animation?CapValue(P(D),null,0):1;1*f>=1*CapValue(e.animationSteps,Number.MAX_VALUE,1)||0==e.animation||l.firstPass%10!=1?g=1:g>=1&&(g=.9999),!e.animation||isIE()<9&&0!=isIE()||!e.clearRect||l.clearRect(n,o,s,r),dispCrossImage(l,e,c,h,d,p,!1,u,g,f),dispCrossText(l,e,c,h,d,p,!1,u,g,f),"function"==typeof e.beforeDrawFunction&&e.beforeDrawFunction("BEFOREDRAWFUNCTION",l,u,S,-1,-1,{animationValue:g,cntiter:f,config:e,borderX:d,borderY:p,midPosX:c,midPosY:h}),e.scaleOverlay?(i(g),"function"==typeof e.endDrawDataFunction&&e.endDrawDataFunction("ENDDATAFUNCTION",l,u,S,-1,-1,{animationValue:g,cntiter:f,config:e,borderX:d,borderY:p,midPosX:c,midPosY:h}),t(),"function"==typeof e.endDrawScaleFunction&&e.endDrawScaleFunction("ENDSCALEFUNCTION",l,u,S,-1,-1,{animationValue:g,cntiter:f,config:e,borderX:d,borderY:p,midPosX:c,midPosY:h})):(t(),"function"==typeof e.endDrawScaleFunction&&e.endDrawScaleFunction("ENDSCALEFUNCTION",l,u,S,-1,-1,{animationValue:g,cntiter:f,config:e,borderX:d,borderY:p,midPosX:c,midPosY:h}),i(g),"function"==typeof e.endDrawDataFunction&&e.endDrawDataFunction("ENDDATAFUNCTION",l,u,S,-1,-1,{animationValue:g,cntiter:f,config:e,borderX:d,borderY:p,midPosX:c,midPosY:h})),dispCrossImage(l,e,c,h,d,p,!0,u,g,f),dispCrossText(l,e,c,h,d,p,!0,u,g,f),drawLegend(a,u,e,l,l.tpchart,f)}function A(){f+=m,D+=m*T,f==e.animationSteps||0==e.animation||l.firstPass%10!=1?D=1:D>=1&&(D=.999),g(),m==-1&&f<=M?("function"!=typeof e.onAnimationComplete||1!=e.alwaysRunFunctionAtCompletion&&1!=l.runanimationcompletefunction||e.onAnimationComplete(l,e,u,0,x+1,S),m=1,e.animationForceSetTimeOut?requestAnimFrameSetTimeOut(A):requestAnimFrame(A)):D<e.animationStopValue?e.animationForceSetTimeOut?requestAnimFrameSetTimeOut(A):requestAnimFrame(A):(x<e.animationCount||0==e.animationCount)&&l.firstPass%10==1?(x++,e.animationBackward&&1==m?(D-=T,m=-1):(m=1,f=M-1,D=y-T),window.setTimeout(A,1e3*e.animationPauseTime)):(testRedraw(l,u,e)||"function"!=typeof e.onAnimationComplete||1!=e.alwaysRunFunctionAtCompletion&&1!=l.runanimationcompletefunction||(e.onAnimationComplete(l,e,u,1,x+1,S),l.runanimationcompletefunction=!1),l.firstPass=9,close_result(l))}var f=0,x=1,m=1;(e.animationStartValue<0||e.animationStartValue>1)&&(e.animation.StartValue=0),(e.animationStopValue<0||e.animationStopValue>1)&&(e.animation.StopValue=1),e.animationStopValue<e.animationStartValue&&(e.animationStopValue=e.animationStartValue),isIE()<9&&0!=isIE()&&(e.animation=!1);var T=e.animation?1/CapValue(e.animationSteps,Number.MAX_VALUE,1):1,P=animationOptions[e.animationEasing],D=e.animation?0:1;if(e.animation&&e.animationStartValue>0&&e.animationStartValue<=1)for(;D<e.animationStartValue;)f++,D+=T;var M=f,y=D;"function"!=typeof t&&(t=function(){}),e.clearRect?l.firstPass%10!=1||0==e.animation?A():e.animationForceSetTimeOut?requestAnimFrameSetTimeOut(A):requestAnimFrame(A):A()}function computeScale(logarithm,steps_lim,mix_bar_line,mathFct,multAxis,cumulate,data,config,ctx,statData,availableHeight){function correctValue(e,a,t){return Math.abs(e-a)<t.zeroValue&&(Math.abs(e)<t.zeroValue&&(e=.9),e>0?(e*=1.1,a*=.9):(e*=.9,a*=1.1)),{upperValue:e,lowerValue:a}}var upperValue1=-Number.MAX_VALUE,lowerValue1=Number.MAX_VALUE,upperValue2=-Number.MAX_VALUE,lowerValue2=Number.MAX_VALUE,fnd_axis1,fnd_axis2,fnd_positif1,fnd_negatif1,fnd_positif2,fnd_negatif2,cum_positif1,cum_negatif1,cum_positif2,cum_negatif2,first_axis=!1,second_axis=!1,mathValueHeight,first_positif1,first_negatif1,first_positif2,first_negatif2,i,j,maxi,axis;maxi=-1;var mathFctName,mathValueHeightVal=[];if(mathFct)for(var i=0;i<data.datasets.length;i++)if(mathFctName=data.datasets[i].drawMathDeviation,"function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeightVal[i]=window[mathFctName](parameter)}else mathValueHeightVal[i]=0;for(i=0;i<data.datasets.length;i++)maxi=Math.max(data.datasets[i].data.length,maxi);for(j=0;j<maxi;j++){for(cum_positif1=0,cum_negatif1=0,fnd_axis1=!1,fnd_axis2=!1,fnd_positif1=!1,fnd_negatif1=!1,cum_positif2=0,cum_negatif2=0,fnd_positif2=!1,fnd_negatif2=!1,i=0;i<data.datasets.length;i++)mathValueHeight=mathFct?"object"==typeof mathValueHeightVal[i]?mathValueHeightVal[i][Math.min(mathValueHeightVal[i].length,j)]:mathValueHeightVal[i]:0,"undefined"!=typeof data.datasets[i].data[j]&&(axis=1,cumulate?mix_bar_line&&multAxis&&cumulate&&2==data.datasets[i].axis&&"Line"==data.datasets[i].type&&(axis=2):multAxis&&2==data.datasets[i].axis&&(axis=2),!cumulate||cumulate&&mix_bar_line&&"Line"==data.datasets[i].type?1==axis?(first_axis=!0,fnd_axis1=!0,upperValue1=Math.max(upperValue1,1*data.datasets[i].data[j]+mathValueHeight),lowerValue1=Math.min(lowerValue1,1*data.datasets[i].data[j]-mathValueHeight)):(fnd_axis2=!0,second_axis=!0,upperValue2=Math.max(upperValue2,1*data.datasets[i].data[j]+mathValueHeight),lowerValue2=Math.min(lowerValue2,1*data.datasets[i].data[j]-mathValueHeight)):1==axis?(fnd_axis1=!0,first_axis=!0,1*data.datasets[i].data[j]!=0||first_positif1||first_negatif1?1*data.datasets[i].data[j]>0?(fnd_positif1||(first_positif1=1*data.datasets[i].data[j]),fnd_positif1=!0,cum_positif1+=1*data.datasets[i].data[j]):1*data.datasets[i].data[j]<0&&(fnd_negatif1||(first_negatif1=1*data.datasets[i].data[j]),fnd_negatif1=!0,cum_negatif1+=1*data.datasets[i].data[j]):(first_positif1=0,first_negatif1=0,fnd_positif1=!0,fnd_negatif1=!0)):(fnd_axis2=!0,second_axis=!0,1*data.datasets[i].data[j]!=0||first_positif2||first_negatif2?1*data.datasets[i][j]>0?(fnd_positif2||(first_positif2=1*data.datasets[i].data[j]),fnd_positif2=!0,cum_positif2+=1*data.datasets[i].data[j]):1*data.datasets[i][j]<0&&(fnd_negatif2||(first_negatif2=1*data.datasets[i].data[j]),fnd_negatif2=!0,cum_negatif2+=1*data.datasets[i].data[j]):(first_positif2=0,fnd_positif2=!0)));cumulate&&(fnd_axis1&&(fnd_positif1?upperValue1=Math.max(upperValue1,cum_positif1+mathValueHeight):fnd_negatif1&&(upperValue1=Math.max(upperValue1,cum_negatif1+mathValueHeight,first_negatif1)),fnd_negatif1?lowerValue1=Math.min(lowerValue1,cum_negatif1-mathValueHeight):fnd_positif1&&(lowerValue1=Math.min(lowerValue1,cum_positif1-mathValueHeight,first_positif1))),fnd_axis2&&(fnd_positif2?upperValue2=Math.max(upperValue2,cum_positif2+mathValueHeight):fnd_negatif2&&(upperValue2=Math.max(upperValue2,cum_negatif2+mathValueHeight,first_negatif1)),fnd_negatif2?lowerValue2=Math.min(lowerValue2,cum_negatif2-mathValueHeight):fnd_positif2&&(lowerValue2=Math.min(lowerValue2,cum_positif2-mathValueHeight))))}second_axis?first_axis||(upperValue1=upperValue2,lowerValue1=lowerValue2):(upperValue2=upperValue1,lowerValue2=lowerValue1),upperValue1<lowerValue1&&(upperValue2<lowerValue2&&(upperValue2=0,lowerValue2=0),upperValue1=upperValue2,lowerValue1=lowerValue2),upperValue2<lowerValue2&&(upperValue2=upperValue1,lowerValue2=upperValue2);var value1=correctValue(upperValue1,lowerValue1,config),value2=correctValue(upperValue2,lowerValue2,config);upperValue1=value1.upperValue,lowerValue1=value1.lowerValue,upperValue2=value2.upperValue,lowerValue2=value2.lowerValue,"function"==typeof config.graphMin?lowerValue1=setOptionValue(!0,!0,1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(config.graphMin)||(lowerValue1=config.forceGraphMin?config.graphMin:Math.min(lowerValue1,config.graphMin)),"function"==typeof config.graphMax?upperValue1=setOptionValue(!0,!0,1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(config.graphMax)||(upperValue1=config.forceGraphMax?config.graphMax:Math.max(upperValue1,config.graphMax)),"function"==typeof config.graphMin2?lowerValue2=setOptionValue(!0,!0,1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin2,"graphMin2",-1,-1,{nullValue:!0}):isNaN(config.graphMin2)||(lowerValue2=config.forceGraphMin2?config.graphMin2:Math.min(lowerValue2,config.graphMin2)),"function"==typeof config.graphMax2?upperValue2=setOptionValue(!0,!0,1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax2,"graphMax2",-1,-1,{nullValue:!0}):isNaN(config.graphMax2)||(upperValue2=config.forceGraphMax2?config.graphMax2:Math.max(upperValue2,config.graphMax2)),upperValue1<lowerValue1&&(lowerValue1=upperValue1-1),upperValue2<lowerValue2&&(lowerValue2=upperValue2-1);var maxSteps=void 0,minSteps=void 0;steps_lim&&(labelHeight=Math.ceil(ctx.chartTextScale*config.scaleFontSize),scaleHeight=availableHeight,maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5));var logarithm1,logarithm2,orderOfMagnitude;!logarithm||config.logarithmic===!1||lowerValue1<0||config.scaleOverride?logarithm1=!1:(logarithm1=!0,OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(upperValue1)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(lowerValue1))),"fuzzy"==config.logarithmic&&OrderOfMagnitude<4&&(logarithmic1=!1)),!logarithm||config.logarithmic2===!1||lowerValue2<0||config.scaleOverride2?logarithm2=!1:(logarithm2=!0,OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(upperValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(lowerValue2))),
"fuzzy"==config.logarithmic2&&OrderOfMagnitude<4&&(logarithmic2=!1));var labelTemplateString1="",labelTemplateString2="",scaleStartValue,scaleSteps,scaleStepWidth,scaleAxisData1,scaleAxisData2;return labelTemplateString1=config.scaleShowLabels?config.scaleLabel:"",config.scaleOverride?(scaleStartValue=setOptionValue(!0,!0,1,"SCALESTARTVALUE",ctx,data,statData,void 0,config.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),"computed"==scaleStartValue&&(scaleStartValue=lowerValue1),scaleSteps=setOptionValue(!0,!0,1,"SCALESTEPS",ctx,data,statData,void 0,config.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),scaleStepWidth=setOptionValue(!0,!0,1,"SCALESTEPWIDTH",ctx,data,statData,void 0,config.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0}),scaleAxisData1={nbOfStepsAxis:scaleSteps,stepWidth:scaleStepWidth,minAxis:scaleStartValue,maxAxis:scaleStartValue+scaleSteps*scaleStepWidth}):maxSteps>0&&minSteps>0||"undefined"==typeof maxSteps?(scaleAxisData1=calculateScale(logarithm1,config.yAxisMinimumInterval,config,maxSteps,minSteps,upperValue1,lowerValue1,steps_lim),"steps"==config.forceScale&&"number"==typeof config.scaleSteps?(scaleSteps=setOptionValue(!0,!0,1,"SCALESTEPS",ctx,data,statData,void 0,config.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),scaleSteps<=0&&(scaleSteps=1),scaleAxisData1={nbOfStepsAxis:scaleSteps,stepWidth:(scaleAxisData1.maxAxis-scaleAxisData1.minAxis)/scaleSteps,minAxis:scaleAxisData1.minAxis,maxAxis:scaleAxisData1.maxAxis}):"stepWidth"==config.forceScale&&"number"==typeof config.scaleStepWidth&&(scaleStepWidth=setOptionValue(!0,!0,1,"SCALESTEPWIDTH",ctx,data,statData,void 0,config.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0}),scaleStepWidth<=0&&(scaleStepWidth=1),scaleSteps=Math.ceil((scaleAxisData1.maxAxis-scaleAxisData1.minAxis)/scaleStepWidth),scaleAxisData1.maxAxis=scaleAxisData1.minAxis+scaleSteps*scaleStepWidth,second_axis||(upperValue2=scaleAxisData1.maxAxis),scaleAxisData1={nbOfStepsAxis:scaleSteps,stepWidth:scaleStepWidth,minAxis:scaleAxisData1.minAxis,maxAxis:scaleAxisData1.maxAxis})):scaleAxisData1={nbOfStepsAxis:0,stepWidth:0,minAxis:0,maxAxis:0},labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",multAxis&&(second_axis||config.forceSecondScale)?config.scaleOverride2?(scaleStartValue=setOptionValue(!0,!0,1,"SCALESTARTVALUE2",ctx,data,statData,void 0,config.scaleStartValue2,"scaleStartValue2",-1,-1,{nullValue:!0}),scaleSteps=setOptionValue(!0,!0,1,"SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:!0}),scaleStepWidth=setOptionValue(!0,!0,1,"SCALESTEPWIDTH2",ctx,data,statData,void 0,config.scaleStepWidth2,"scaleStepWidth2",-1,-1,{nullValue:!0}),scaleAxisData2={nbOfStepsAxis:scaleSteps,stepWidth:scaleStepWidth,minAxis:scaleStartValue,maxAxis:scaleStartValue+scaleSteps*scaleStepWidth}):maxSteps>0&&minSteps>0||"undefined"==typeof maxSteps?(scaleAxisData2=calculateScale(logarithm2,config.yAxisMinimumInterval2,config,maxSteps,minSteps,upperValue2,lowerValue2,steps_lim),"steps"==config.forceScale2&&"number"==typeof config.scaleSteps2?(scaleSteps=setOptionValue(!0,!0,1,"SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:!0}),scaleSteps<=0&&(scaleSteps=1),scaleAxisData2={nbOfStepsAxis:scaleSteps,stepWidth:(scaleAxisData2.maxAxis-scaleAxisData2.minAxis)/scaleSteps,minAxis:scaleAxisData2.minAxis,maxAxis:scaleAxisData2.maxAxis}):"stepWidth"==config.forceScale2&&"number"==typeof config.scaleStepWidth2&&(scaleStepWidth=setOptionValue(!0,!0,1,"SCALESTEPWIDTH2",ctx,data,statData,void 0,config.scaleStepWidth2,"scaleStepWidth2",-1,-1,{nullValue:!0}),scaleStepWidth<=0&&(scaleStepWidth=1),scaleSteps=Math.ceil((scaleAxisData2.maxAxis-scaleAxisData2.minAxis)/scaleStepWidth),scaleAxisData2.maxAxis=scaleAxisData2.minAxis+scaleSteps*scaleStepWidth,scaleAxisData2={nbOfStepsAxis:scaleSteps,stepWidth:scaleStepWidth,minAxis:scaleAxisData2.minAxis,maxAxis:scaleAxisData2.maxAxis})):scaleAxisData2={nbOfStepsAxis:0,stepWidth:0,minAxis:0,maxAxis:0}:(scaleAxisData2={nbOfStepsAxis:scaleAxisData1.nbOfStepsAxis,stepWidth:scaleAxisData1.stepWidth,minAxis:scaleAxisData1.minAxis,maxAxis:scaleAxisData1.maxAxis},config.forceNbOfStepsAxis2&&(scaleSteps=setOptionValue(!0,!0,1,"SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:!0}),scaleSteps<=0&&(scaleSteps=1),scaleAxisData2={nbOfStepsAxis:scaleSteps,stepWidth:(scaleAxisData2.maxAxis-scaleAxisData2.minAxis)/scaleSteps,minAxis:scaleAxisData2.minAxis,maxAxis:scaleAxisData2.maxAxis})),{maxValue:upperValue1,minValue:lowerValue1,maxValue2:upperValue2,minValue2:lowerValue2,maxSteps:maxSteps,minSteps:minSteps,dbAxis:second_axis,logarithm1:logarithm1,logarithm2:logarithm2,labelTemplateString1:labelTemplateString1,labelTemplateString2:labelTemplateString2,minAxis1:scaleAxisData1.minAxis,maxAxis1:scaleAxisData1.maxAxis,nbOfStepsAxis1:scaleAxisData1.nbOfStepsAxis,stepWidthAxis1:scaleAxisData1.stepWidth,minAxis2:scaleAxisData2.minAxis,maxAxis2:scaleAxisData2.maxAxis,nbOfStepsAxis2:scaleAxisData2.nbOfStepsAxis,stepWidthAxis2:scaleAxisData2.stepWidth}}function populateLabels(e,a,t,i,l,n,o,s,r){var c,h=o,d=r;if(i)for(c=0;c<n+1;c++)e&&(d=h),l.push(tmpl(i,{value:fmtChartJS(t,1*h.toFixed(getDecimalPlaces(d)),a)},t)),e?h*=10:h+=r}function getDecimalPlaces(e){var a=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return a?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0}function tmpl(e,a,t){return newstr=e,newstr.substr(0,t.templatesOpenTag.length)==t.templatesOpenTag&&(newstr="<%="+newstr.substr(t.templatesOpenTag.length,newstr.length-t.templatesOpenTag.length)),newstr.substr(newstr.length-t.templatesCloseTag.length,t.templatesCloseTag.length)==t.templatesCloseTag&&(newstr=newstr.substr(0,newstr.length-t.templatesCloseTag.length)+"%>"),tmplpart2(newstr,a)}function tmplpart2(e,a){var t=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[e]=cache[e]||tmplpart2(document.getElementById(e).innerHTML);return a?t(a):t}function calculateScale(e,a,t,i,l,n,o,s){var r,c,h,d,p,u,S;if(e){o==n&&(n+=1),0==o&&(o=.01);var g=calculateOrderOfMagnitude(o),A=calculateOrderOfMagnitude(n)+1;r=Math.pow(10,g),c=Math.pow(10,A),S=A-g}else if(u=n-o,S=calculateOrderOfMagnitude(u),r=Math.abs(o)>t.zeroValue?Math.floor(o/(1*Math.pow(10,S)))*Math.pow(10,S):0,c=Math.abs(n)>t.zeroValue?Math.ceil(n/(1*Math.pow(10,S)))*Math.pow(10,S):0,"number"==typeof a&&c>=0){for(r-=r%a;r>o;)r-=a;for(c%a>t.zeroValue&&c%a<a-t.zeroValue&&(c=roundScale(t,(1+Math.floor(c/a))*a));c<n;)c+=a}if(h=c-r,d=Math.pow(10,S),p=Math.round(h/d),e)p=S;else{var f=!1;if(s)for(;!f&&(p<l||p>i);)p<l?("number"==typeof a&&d/2<a&&(f=!0,d=a,p=Math.ceil(h/d)),f||(d/=2,p=Math.round(h/d))):(d*=2,p=Math.round(h/d));if("number"==typeof a&&(d<a&&(d=a,p=Math.ceil(h/d)),d%a>t.zeroValue&&d%a<a-t.zeroValue&&(2*d%a<t.zeroValue||2*d%a>a-t.zeroValue?(d*=2,p=Math.ceil(h/d)):(d=roundScale(t,(1+Math.floor(d/a))*a),p=Math.ceil(h/d)))),1==t.graphMaximized||"bottom"==t.graphMaximized||"undefined"!=typeof t.graphMin)for(;r+d<o&&p>=3;)r+=d,p--;if(1==t.graphMaximized||"top"==t.graphMaximized||"undefined"!=typeof t.graphMax)for(;r+(p-1)*d>=n&&p>=3;)p--}return{nbOfStepsAxis:p,stepWidth:d,minAxis:r,maxAxis:r+p*d}}function calculateOrderOfMagnitude(e){return 0==e?0:Math.floor(Math.log(e)/Math.LN10)}function roundScale(e,a){var t=0,i=""+e.yAxisMinimumInterval;return i.indexOf(".")>0&&(t=i.substr(i.indexOf(".")).length),Math.round(a*Math.pow(10,t))/Math.pow(10,t)}function Max(e){return Math.max.apply(Math,e)}function Min(e){return Math.min.apply(Math,e)}function Default(e,a){return e?e:a}function CapValue(e,a,t){return isNumber(a)&&e>a?a:isNumber(t)&&e<t?t:e}function mergeChartConfig(e,a){var t={};for(var i in e)t[i]=e[i];for(var l in a)t[l]=a[l];return t}function dispCrossText(e,a,t,i,l,n,o,s,r,c){var h,d,p,u,S,g;for(h=0;h<a.crossText.length;h++)if(""!=a.crossText[h]&&a.crossTextOverlay[Min([h,a.crossTextOverlay.length-1])]==o&&(1==c&&"first"==a.crossTextIter[Min([h,a.crossTextIter.length-1])]||a.crossTextIter[Min([h,a.crossTextIter.length-1])]==c||"all"==a.crossTextIter[Min([h,a.crossTextIter.length-1])]||1==r&&"last"==a.crossTextIter[Min([h,a.crossTextIter.length-1])])){switch(e.save(),e.beginPath(),e.font=a.crossTextFontStyle[Min([h,a.crossTextFontStyle.length-1])]+" "+Math.ceil(e.chartTextScale*a.crossTextFontSize[Min([h,a.crossTextFontSize.length-1])]).toString()+"px "+a.crossTextFontFamily[Min([h,a.crossTextFontFamily.length-1])],e.fillStyle=a.crossTextFontColor[Min([h,a.crossTextFontColor.length-1])],S=a.crossTextAlign[Min([h,a.crossTextAlign.length-1])],g=a.crossTextBaseline[Min([h,a.crossTextBaseline.length-1])],p=1*Math.ceil(e.chartSpaceScale*a.crossTextPosX[Min([h,a.crossTextPosX.length-1])]),u=1*Math.ceil(e.chartSpaceScale*a.crossTextPosY[Min([h,a.crossTextPosY.length-1])]),1*a.crossTextRelativePosX[Min([h,a.crossTextRelativePosX.length-1])]){case 0:"default"==S&&(S="left");break;case 1:p+=l,"default"==S&&(S="right");break;case 2:p+=t,"default"==S&&(S="center");break;case-2:p+=context.canvas.width/2,"default"==S&&(S="center");break;case 3:p+=p+2*t-l,"default"==S&&(S="left");break;case 4:p+=context.canvas.width,"default"==S&&(S="right");break;default:p+=t,"default"==S&&(S="center")}switch(1*a.crossTextRelativePosY[Min([h,a.crossTextRelativePosY.length-1])]){case 0:"default"==g&&(g="top");break;case 3:u+=n,"default"==g&&(g="top");break;case 2:u+=i,"default"==g&&(g="middle");break;case-2:u+=context.canvas.height/2,"default"==g&&(g="middle");break;case 1:u+=u+2*i-n,"default"==g&&(g="bottom");break;case 4:u+=context.canvas.height,"default"==g&&(g="bottom");break;default:u+=i,"default"==g&&(g="middle")}e.textAlign=S,e.textBaseline=g,e.translate(1*p,1*u);var A=Math.PI*a.crossTextAngle[Min([h,a.crossTextAngle.length-1])]/180;e.rotate(A),"%"==a.crossText[h].substring(0,1)?"function"==typeof a.crossTextFunction&&(d=a.crossTextFunction(h,a.crossText[h],e,a,t,i,l,n,o,s,r)):d=a.crossText[h],setTextBordersAndBackground(e,d,Math.ceil(e.chartTextScale*a.crossTextFontSize[Min([h,a.crossTextFontSize.length-1])]),0,0,a.crossTextBorders[Min([h,a.crossTextBorders.length-1])],a.crossTextBordersSelection[Min([h,a.crossTextBorders.length-1])],a.crossTextBordersColor[Min([h,a.crossTextBordersColor.length-1])],Math.ceil(e.chartLineScale*a.crossTextBordersWidth[Min([h,a.crossTextBordersWidth.length-1])]),Math.ceil(e.chartSpaceScale*a.crossTextBordersXSpace[Min([h,a.crossTextBordersXSpace.length-1])]),Math.ceil(e.chartSpaceScale*a.crossTextBordersYSpace[Min([h,a.crossTextBordersYSpace.length-1])]),a.crossTextBordersStyle[Min([h,a.crossTextBordersStyle.length-1])],a.crossTextBackgroundColor[Min([h,a.crossTextBackgroundColor.length-1])],"CROSSTEXT",a.crossTextBordersRadius),1==r&&"all"==a.crossTextIter[Min([h,a.crossTextIter.length-1])]||"last"!=a.crossTextIter[Min([h,a.crossTextIter.length-1])]?e.fillTextMultiLine(d,0,0,e.textBaseline,Math.ceil(e.chartTextScale*a.crossTextFontSize[Min([h,a.crossTextFontSize.length-1])]),!0,a.detectMouseOnText,e,"CROSSTEXT_TEXTMOUSE",A,1*p,1*u,h,-1):e.fillTextMultiLine(d,0,0,e.textBaseline,Math.ceil(e.chartTextScale*a.crossTextFontSize[Min([h,a.crossTextFontSize.length-1])]),!0,!1,e,"CROSSTEXT_TEXTMOUSE",A,1*p,1*u,h,-1),e.restore()}}function dispCrossImage(e,a,t,i,l,n,o,s,r,c){var h,d,p,u,S;for(h=0;h<a.crossImage.length;h++)if("undefined"!=typeof a.crossImage[h]&&a.crossImageOverlay[Min([h,a.crossImageOverlay.length-1])]==o&&(c==-1&&"background"==a.crossImageIter[Min([h,a.crossImageIter.length-1])]||1==c&&"first"==a.crossImageIter[Min([h,a.crossImageIter.length-1])]||a.crossImageIter[Min([h,a.crossImageIter.length-1])]==c||c!=-1&&"all"==a.crossImageIter[Min([h,a.crossImageIter.length-1])]||1==r&&"last"==a.crossImageIter[Min([h,a.crossImageIter.length-1])])){switch(e.save(),e.beginPath(),u=a.crossImageAlign[Min([h,a.crossImageAlign.length-1])],S=a.crossImageBaseline[Min([h,a.crossImageBaseline.length-1])],d=1*Math.ceil(e.chartSpaceScale*a.crossImagePosX[Min([h,a.crossImagePosX.length-1])]),p=1*Math.ceil(e.chartSpaceScale*a.crossImagePosY[Min([h,a.crossImagePosY.length-1])]),1*a.crossImageRelativePosX[Min([h,a.crossImageRelativePosX.length-1])]){case 0:"default"==u&&(u="left");break;case 1:d+=l,"default"==u&&(u="right");break;case 2:d+=t,"default"==u&&(u="center");break;case-2:d+=context.canvas.width/2,"default"==u&&(u="center");break;case 3:d+=d+2*t-l,"default"==u&&(u="left");break;case 4:d+=context.canvas.width,"default"==u&&(u="right");break;default:d+=t,"default"==u&&(u="center")}switch(1*a.crossImageRelativePosY[Min([h,a.crossImageRelativePosY.length-1])]){case 0:"default"==S&&(S="top");break;case 3:p+=n,"default"==S&&(S="top");break;case 2:p+=i,"default"==S&&(S="middle");break;case-2:p+=context.canvas.height/2,"default"==S&&(S="middle");break;case 1:p+=p+2*i-n,"default"==S&&(S="bottom");break;case 4:p+=context.canvas.height,"default"==S&&(S="bottom");break;default:p+=i,"default"==S&&(S="middle")}var g=a.crossImage[h].width;switch(u){case"left":break;case"right":d-=g;break;case"center":d-=g/2}var A=a.crossImage[h].height;switch(S){case"top":break;case"bottom":p-=A;break;case"middle":p-=A/2}e.translate(1*d,1*p),e.rotate(Math.PI*a.crossImageAngle[Min([h,a.crossImageAngle.length-1])]/180),e.drawImage(a.crossImage[h],0,0),e.restore()}}function setMeasures(e,a,t,i,l,n,o,s,r,c,h,d){var p=i,u=l;window.devicePixelRatio>1&&(p/=window.devicePixelRatio,u/=window.devicePixelRatio),"none"!=a.canvasBackgroundColor&&(t.canvas.style.background=a.canvasBackgroundColor);var S,g=0,A=0,f=0,x=0,m=0,T=0,P=0,D=0,M=0,y=0,v=0;t.widthAtSetMeasures=u,t.heightAtSetMeasures=p;var L,b,O,I,B,V,G;V=u,G=p,a.canvasBorders&&a.canvasBordersSelection>0&&(g=Math.ceil(t.chartLineScale*a.canvasBordersWidth),isBorder(a.canvasBordersSelection,"TOP")&&(A=g),isBorder(a.canvasBordersSelection,"BOTTOM")&&(f=g),isBorder(a.canvasBordersSelection,"RIGHT")&&(x=g),isBorder(a.canvasBordersSelection,"LEFT")&&(m=g)),L=0+A+Math.ceil(t.chartSpaceScale*a.spaceTop),""!=a.graphTitle.trim()&&(T=Math.ceil(t.chartTextScale*a.graphTitleFontSize)*(a.graphTitle.split("\n").length||1)+Math.ceil(t.chartSpaceScale*a.graphTitleSpaceBefore)+Math.ceil(t.chartSpaceScale*a.graphTitleSpaceAfter),P=L+Math.ceil(t.chartSpaceScale*a.graphTitleSpaceBefore),("none"!=a.graphTitleBackgroundColor||a.graphTitleBorders)&&(T+=(isBorder(a.graphTitleBordersSelection,"TOP")+isBorder(a.graphTitleBordersSelection,"BOTTOM"))*Math.ceil(t.chartSpaceScale*a.graphTitleBordersYSpace),P+=isBorder(a.graphTitleBordersSelection,"TOP")*Math.ceil(t.chartSpaceScale*a.graphTitleBordersYSpace)),a.graphTitleBorders&&(T+=(isBorder(a.graphTitleBordersSelection,"TOP")+isBorder(a.graphTitleBordersSelection,"BOTTOM"))*Math.ceil(t.chartLineScale*a.graphTitleBordersWidth),P+=isBorder(a.graphTitleBordersSelection,"TOP")*Math.ceil(t.chartLineScale*a.graphTitleBordersWidth)),L+=T),""!=a.graphSubTitle.trim()&&(D=Math.ceil(t.chartTextScale*a.graphSubTitleFontSize)*(a.graphSubTitle.split("\n").length||1)+Math.ceil(t.chartSpaceScale*a.graphSubTitleSpaceBefore)+Math.ceil(t.chartSpaceScale*a.graphSubTitleSpaceAfter),M=L+Math.ceil(t.chartSpaceScale*a.graphSubTitleSpaceBefore),("none"!=a.graphSubTitleBackgroundColor||a.graphSubTitleBorders)&&(D+=2*Math.ceil(t.chartSpaceScale*a.graphSubTitleBordersYSpace),M+=Math.ceil(t.chartSpaceScale*a.graphSubTitleBordersYSpace)),a.graphSubTitleBorders&&(D+=(isBorder(a.graphTitleBordersSelection,"TOP")+isBorder(a.graphTitleBordersSelection,"BOTTOM"))*Math.ceil(t.chartLineScale*a.graphSubTitleBordersWidth),M+=isBorder(a.graphTitleBordersSelection,"TOP")*Math.ceil(t.chartLineScale*a.graphSubTitleBordersWidth)),L+=D),b=L,G-=b,L=p-f-Math.ceil(t.chartSpaceScale*a.spaceBottom),"undefined"!=typeof a.footNote&&""!=a.footNote.trim()&&(y=Math.ceil(t.chartTextScale*a.footNoteFontSize)*(a.footNote.split("\n").length||1)+Math.ceil(t.chartSpaceScale*a.footNoteSpaceBefore)+Math.ceil(t.chartSpaceScale*a.footNoteSpaceAfter),v=L-Math.ceil(t.chartSpaceScale*a.footNoteSpaceAfter),("none"!=a.footNoteBackgroundColor||a.footNoteBorders)&&(y+=2*Math.ceil(t.chartSpaceScale*a.footNoteBordersYSpace),v-=Math.ceil(t.chartSpaceScale*a.footNoteBordersYSpace)),a.footNoteBorders&&(y+=(isBorder(a.footNoteBordersSelection,"TOP")+isBorder(a.footNoteBordersSelection,"BOTTOM"))*Math.ceil(t.chartLineScale*a.footNoteBordersWidth),v-=isBorder(a.footNoteBordersSelection,"BOTTOM")*Math.ceil(t.chartLineScale*a.footNoteBordersWidth)),L-=y),O=p-L,G-=O,L=0+m+Math.ceil(t.chartSpaceScale*a.spaceLeft),I=L,V-=I,L=u-x-Math.ceil(t.chartSpaceScale*a.spaceRight),B=u-L,V-=B,b+=Math.ceil(t.chartSpaceScale*a.graphSpaceBefore),O+=Math.ceil(t.chartSpaceScale*a.graphSpaceAfter),G-=Math.ceil(t.chartSpaceScale*a.graphSpaceBefore)+Math.ceil(t.chartSpaceScale*a.graphSpaceAfter);var R=0,C=-99999999,N=0;if("undefined"!=typeof a.legend&&1==a.legend){t.font=a.legendFontStyle+" "+Math.ceil(t.chartTextScale*a.legendFontSize).toString()+"px "+a.legendFontFamily;var w;for(S=0;S<e.datasets.length;S++)"string"==typeof e.datasets[S].title&&""!=e.datasets[S].title.trim()&&(R++,w=t.measureTextMultiLine(fmtChartJS(a,e.datasets[S].title,a.fmtLegend),Math.ceil(t.chartTextScale*a.legendFontSize)),C=Math.max(w.textWidth,C),N=Math.max(Math.ceil(t.chartTextScale*a.legendFontSize),N));C+=Math.ceil(t.chartTextScale*a.legendBlockSize)+Math.ceil(t.chartSpaceScale*a.legendSpaceBetweenBoxAndText),(0==R||1==R&&!a.showSingleLegend)&&(C=0)}var k,F=0,H=0,W=0,E=0,z=0,Y=0;if(C>-99999998)if(0==a.legendPosY||4==a.legendPosY){var X,_;X=1==a.legendPosX||2==a.legendPosX||3==a.legendPosX?V-Math.ceil(t.chartSpaceScale*Math.ceil(t.chartSpaceScale*a.legendSpaceLeftText))-Math.ceil(t.chartSpaceScale*a.legendSpaceRightText):u-x-m-Math.ceil(t.chartSpaceScale*a.spaceLeft)-Math.ceil(t.chartSpaceScale*a.spaceRight)-Math.ceil(t.chartSpaceScale*Math.ceil(t.chartSpaceScale*a.legendSpaceLeftText))-Math.ceil(t.chartSpaceScale*a.legendSpaceRightText),1!=a.legendBorders&&"rgba(0,0,0,0)"==a.legendFillColor||(X-=a.legendBorders*(isBorder(a.legendBordersSelection,"RIGHT")+isBorder(a.legendBordersSelection,"LEFT"))*Math.ceil(t.chartLineScale*a.legendBordersWidth)+Math.ceil(t.chartSpaceScale*a.legendBordersSpaceLeft)+Math.ceil(t.chartSpaceScale*a.legendBordersSpaceRight)),_=Min([Math.floor((X+Math.ceil(t.chartSpaceScale*a.legendSpaceBetweenTextHorizontal))/(C+Math.ceil(t.chartSpaceScale*a.legendSpaceBetweenTextHorizontal))),a.maxLegendCols]),W=Math.ceil(R/_),E=Math.ceil(R/W),k=measureLegend(e,t,a,C,N,W,E,X),z=k.legendHeight,0==a.legendPosY?(H=b-Math.ceil(t.chartSpaceScale*a.graphSpaceBefore),b+=z):(H=p-O-z,O+=z),G-=z}else if(0==a.legendPosX||4==a.legendPosX){var j,U;j=G-Math.ceil(t.chartSpaceScale*Math.ceil(t.chartSpaceScale*a.legendSpaceBeforeText))-Math.ceil(t.chartSpaceScale*a.legendSpaceAfterText),X=V-Math.ceil(t.chartSpaceScale*Math.ceil(t.chartSpaceScale*a.legendSpaceLeftText))-Math.ceil(t.chartSpaceScale*a.legendSpaceRightText),1!=a.legendBorders&&"rgba(0,0,0,0)"==a.legendFillColor||(j-=a.legendBorders*(isBorder(a.legendBordersSelection,"BOTTOM")+isBorder(a.legendBordersSelection,"TOP"))*Math.ceil(t.chartLineScale*a.legendBordersWidth)+Math.ceil(t.chartSpaceScale*a.legendBordersSpaceBefore)+Math.ceil(t.chartSpaceScale*a.legendBordersSpaceAfter)),U=Min([Math.floor((j+Math.ceil(t.chartSpaceScale*a.legendSpaceBetweenTextVertical))/(N+Math.ceil(t.chartSpaceScale*a.legendSpaceBetweenTextVertical))),a.maxLegendLines]),E=Math.ceil(R/U),W=Math.ceil(R/E),k=measureLegend(e,t,a,C,N,W,E,X),Y=k.legendWidth,0==a.legendPosX?(F=I,I+=Y):(F=u-B-Y,B+=Y),V-=Y}var J=0,K=0,Z=0;if(c&&""!=a.yAxisUnit.trim()){K=Math.ceil(t.chartTextScale*a.yAxisUnitFontSize)*(a.yAxisUnit.split("\n").length||1)+Math.ceil(t.chartSpaceScale*a.yAxisUnitSpaceBefore)+Math.ceil(t.chartSpaceScale*a.yAxisUnitSpaceAfter),t.font=a.yAxisUnitFontStyle+" "+Math.ceil(t.chartTextScale*a.yAxisUnitFontSize).toString()+"px "+a.yAxisUnitFontFamily;var q=t.measureTextMultiLine(a.yAxisUnit,Math.ceil(t.chartTextScale*a.yAxisUnitFontSize));Z=q.textWidth,J=b+Math.ceil(t.chartSpaceScale*a.yAxisUnitSpaceBefore)+q.textHeight,("none"!=a.yAxisUnitBackgroundColor||a.yAxisUnitBorders)&&(K+=2*Math.ceil(t.chartSpaceScale*a.yAxisUnitBordersYSpace),J+=Math.ceil(t.chartSpaceScale*a.yAxisUnitBordersYSpace)),a.yAxisUnitBorders&&(K+=(isBorder(a.yAxisUnitBordersSelection,"TOP")+isBorder(a.yAxisUnitBordersSelection,"BOTTOM"))*Math.ceil(t.chartLineScale*a.yAxisUnitBordersWidth),J+=isBorder(a.yAxisUnitBordersSelection,"TOP")*Math.ceil(t.chartLineScale*a.yAxisUnitBordersWidth)),b+=K,G-=K}var Q=0,$=1,ee=0,ae=1,te=0,ie=0,le=0,ne=0,oe=0,se=1,re=0,ce=1,he=0,de=0,pe=0;if(c){var ue;for(t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily,Q=Math.max(1,Math.ceil(t.chartTextScale*a.xScaleLabelsMinimumWidth)),ee=Q,S=0;S<e.labels.length;S++)showLabels(t,e,a,S)===!0&&(ue=t.measureTextMultiLine(fmtChartJS(a,e.labels[S],a.fmtXLabel),Math.ceil(t.chartTextScale*a.scaleFontSize)),Q=Math.max(ue.textWidth,Q),$=Math.max(ue.textHeight,$));if("object"==typeof e.Labels2&&a.xAxisBottom&&a.xAxisTop)for(t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily,S=0;S<e.Labels2.length;S++)showLabels(t,e,a,S)===!0&&(ue=t.measureTextMultiLine(fmtChartJS(a,e.Labels2[S],a.fmtTopXLabel),Math.ceil(t.chartTextScale*a.scaleFontSize)),ee=Math.max(ue.textWidth,ee),ae=Math.max(ue.textHeight,ae));else ee=Q,ae=$;"undefined"!=typeof a.xAxisLabel&&a.xAxisBottom&&""!=a.xAxisLabel.trim()&&(te=Math.ceil(t.chartTextScale*a.xAxisFontSize)*(a.xAxisLabel.split("\n").length||1)+Math.ceil(t.chartSpaceScale*a.xAxisLabelSpaceBefore)+Math.ceil(t.chartSpaceScale*a.xAxisLabelSpaceAfter),le=p-O-Math.ceil(t.chartSpaceScale*a.xAxisLabelSpaceAfter),("none"!=a.xAxisLabelBackgroundColor||a.footNoteBorders)&&(te+=2*Math.ceil(t.chartSpaceScale*a.xAxisLabelBordersYSpace),le-=Math.ceil(t.chartSpaceScale*a.xAxisLabelBordersYSpace)),a.xAxisLabelBorders&&(te+=(isBorder(a.xAxisLabelBordersSelection,"TOP")+isBorder(a.xAxisLabelBordersSelection,"BOTTOM"))*Math.ceil(t.chartLineScale*a.xAxisLabelBordersWidth),le-=isBorder(a.xAxisLabelBordersSelection,"BOTTOM")*Math.ceil(t.chartLineScale*a.xAxisLabelBordersWidth)));var Se;if(Se=a.xAxisLabel,"undefined"!=typeof a.xTAxisLabel&&a.xAxisTop&&""!=a.xTAxisLabel.trim()&&(Se=a.xTAxisLabel),"undefined"!=typeof Se&&a.xAxisTop&&""!=Se.trim()&&(ie=Math.ceil(t.chartTextScale*a.xAxisFontSize)*(Se.split("\n").length||1)+Math.ceil(t.chartSpaceScale*a.xAxisLabelSpaceBefore)+Math.ceil(t.chartSpaceScale*a.xAxisLabelSpaceAfter),ne=b+Math.ceil(t.chartSpaceScale*a.xAxisLabelSpaceBefore),"none"!=a.xAxisLabelBackgroundColor&&(ie+=2*Math.ceil(t.chartSpaceScale*a.xAxisLabelBordersYSpace),ne+=Math.ceil(t.chartSpaceScale*a.xAxisLabelBordersYSpace)),a.xAxisLabelBorders&&(ie+=(isBorder(a.xAxisLabelBordersSelection,"TOP")+isBorder(a.xAxisLabelBordersSelection,"BOTTOM"))*Math.ceil(t.chartLineScale*a.xAxisLabelBordersWidth),ne+=isBorder(a.xAxisLabelBordersSelection,"TOP")*Math.ceil(t.chartLineScale*a.xAxisLabelBordersWidth))),oe=Math.max(1,Math.ceil(t.chartTextScale*a.yScaleLabelsMinimumWidth)),re=oe,null!=n&&"nihil"!=n)for(t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily,S=n.length-1;S>=0;S--)"string"==typeof n[S]&&showYLabels(t,e,a,S,n[S])&&""!=n[S].trim()&&(ue=t.measureTextMultiLine(n[S],Math.ceil(t.chartTextScale*a.scaleFontSize)),oe=Math.max(oe,ue.textWidth),se=Math.max(se,ue.textHeight));if(null!=o&&a.yAxisRight)for(t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily,S=o.length-1;S>=0;S--)"string"==typeof o[S]&&showYLabels(t,e,a,S,o[S])&&(ue=t.measureTextMultiLine(o[S],Math.ceil(t.chartTextScale*a.scaleFontSize)),re=Math.max(ue.textWidth,re),ce=Math.max(ue.textHeight,ce));else re=oe,ce=se;"undefined"!=typeof a.yAxisLabel&&(a.yAxisRight||a.yAxisLeft)&&""!=a.yAxisLabel.trim()&&(he=Math.ceil(t.chartTextScale*a.yAxisFontSize)*(a.yAxisLabel.split("\n").length||1)+Math.ceil(t.chartSpaceScale*a.yAxisLabelSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisLabelSpaceRight),de=I+Math.ceil(t.chartSpaceScale*a.yAxisLabelSpaceLeft)+Math.ceil(t.chartTextScale*a.yAxisFontSize),pe=u-B-Math.ceil(t.chartSpaceScale*a.yAxisLabelSpaceLeft)-Math.ceil(t.chartTextScale*a.yAxisFontSize),("none"!=a.yAxisLabelBackgroundColor||a.yAxisLabelBorders)&&(he+=2*Math.ceil(t.chartSpaceScale*a.yAxisLabelBordersYSpace),de+=Math.ceil(t.chartSpaceScale*a.yAxisLabelBordersYSpace),pe-=Math.ceil(t.chartSpaceScale*a.yAxisLabelBordersYSpace)),a.yAxisLabelBorders&&(he+=(isBorder(a.yAxisLabelBordersSelection,"TOP")+isBorder(a.yAxisLabelBordersSelection,"BOTTOM"))*Math.ceil(t.chartLineScale*a.yAxisLabelBordersWidth),de+=isBorder(a.yAxisLabelBordersSelection,"TOP")*Math.ceil(t.chartLineScale*a.yAxisLabelBordersWidth),pe-=isBorder(a.yAxisLabelBordersSelection,"TOP")*Math.ceil(t.chartLineScale*a.yAxisLabelBordersWidth)))}var ge,Ae,fe,xe,me=0,Te=0,Pe=0,De=0,Me=0,ye=0,ve=0,Le=0;c&&a.xAxisBottom&&(xe=V,0==r?(ge=Q,Ae=$,fe=e.labels.length,1==a.yAxisLeft&&(xe-=oe+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),1==a.yAxisRight&&(xe-=re+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight))):(ge=oe,Ae=se,fe=n.length,1==a.yAxisLeft&&(xe-=Q+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),1==a.yAxisRight&&(xe-=ee+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight))),"undefined"!=typeof a.yAxisLabel&&""!=a.yAxisLabel.trim()&&(a.yAxisRight&&(xe-=he),a.yAxisLeft&&(xe-=he)),"smart"==a.rotateLabels?(me=0,(xe+Math.ceil(t.chartTextScale*a.xAxisSpaceBetweenLabels))/fe<ge+Math.ceil(t.chartTextScale*a.xAxisSpaceBetweenLabels)&&(me=45,xe/fe<Math.abs(Math.cos(me*Math.PI/180)*ge)&&(me=90))):(me=a.rotateLabels,me<0&&(me=0),me>180&&(me=180)),me>90&&(me+=180),Me=Math.abs(Math.sin(me*Math.PI/180)*ge)+Math.abs(Math.sin((me+90)*Math.PI/180)*Ae),Pe=Math.abs(Math.cos(me*Math.PI/180)*ge)+Math.abs(Math.cos((me+90)*Math.PI/180)*Ae),ve=p-O-te-Me-Math.ceil(t.chartSpaceScale*a.xAxisSpaceAfter)),c&&a.xAxisTop&&(xe=V,0==r?(ge=ee,Ae=ae,fe=e.labels.length,1==a.yAxisLeft&&(xe-=oe+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),1==a.yAxisRight&&(xe-=re+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight))):(ge=re,Ae=ce,fe=o.length,1==a.yAxisLeft&&(xe-=Q+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),1==a.yAxisRight&&(xe-=ee+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight))),"undefined"!=typeof a.yAxisLabel&&""!=a.yAxisLabel.trim()&&(a.yAxisRight&&(xe-=he),a.yAxisLeft&&(xe-=he)),"smart"==a.rotateTLabels?(Te=0,(xe+Math.ceil(t.chartTextScale*a.xAxisSpaceBetweenLabels))/fe<ge+Math.ceil(t.chartTextScale*a.xAxisSpaceBetweenLabels)&&(Te=45,xe/fe<Math.abs(Math.cos(Te*Math.PI/180)*ge)&&(Te=90))):(Te=a.rotateTLabels,Te<0&&(Te=0),Te>180&&(Te=180)),me>90&&(me+=180),ye=Math.abs(Math.sin(Te*Math.PI/180)*ge)+Math.abs(Math.sin((Te+90)*Math.PI/180)*Ae),De=Math.abs(Math.cos(Te*Math.PI/180)*ge)+Math.abs(Math.cos((Te+90)*Math.PI/180)*Ae),Le=b+ie+Math.ceil(t.chartSpaceScale*a.xAxisSpaceBefore));var be=I,Oe=B;if(c&&a.yAxisLeft&&(I+=0==r?he+oe+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight):he+Q+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),c&&a.yAxisRight&&(B+=0==r?he+re+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight):he+ee+Math.ceil(t.chartSpaceScale*a.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),V=u-I-B,c&&a.xAxisTop)if(0==r)b+=ie+ye+Math.ceil(t.chartSpaceScale*a.xAxisSpaceBefore)+Math.ceil(t.chartSpaceScale*a.xAxisSpaceAfter);else{var Ie=Math.abs(Math.sin(Te*Math.PI/180)*re)+Math.abs(Math.sin((Te+90)*Math.PI/180)*ce);b+=te+Ie+Math.ceil(t.chartSpaceScale*a.xAxisSpaceBefore)+Math.ceil(t.chartSpaceScale*a.xAxisSpaceAfter)}if(c&&a.xAxisBottom)if(0==r)O+=te+Me+Math.ceil(t.chartSpaceScale*a.xAxisSpaceBefore)+Math.ceil(t.chartSpaceScale*a.xAxisSpaceAfter);else{var Ie=Math.abs(Math.sin(me*Math.PI/180)*oe)+Math.abs(Math.sin((me+90)*Math.PI/180)*se);O+=te+Ie+Math.ceil(t.chartSpaceScale*a.xAxisSpaceBefore)+Math.ceil(t.chartSpaceScale*a.xAxisSpaceAfter)}if(G=p-b-O,C>-99999998){switch(0==W&&(X=V-Math.ceil(t.chartSpaceScale*Math.ceil(t.chartSpaceScale*a.legendSpaceLeftText))-Math.ceil(t.chartSpaceScale*a.legendSpaceRightText),_=Min([Math.floor((X+Math.ceil(t.chartSpaceScale*a.legendSpaceBetweenTextHorizontal))/(C+Math.ceil(t.chartSpaceScale*a.legendSpaceBetweenTextHorizontal))),a.maxLegendCols]),W=Math.ceil(R/_),E=Math.ceil(R/W),k=measureLegend(e,t,a,C,N,W,E,X)),z=k.legendHeight,Y=k.legendWidth,a.legendPosY){case 0:break;case 1:H=b;break;case 2:H=b+G/2-z/2;break;case-2:H=p/2-z/2;break;case 3:H=p-O-z;break;case 4:break;default:H=b}switch(a.legendPosX){case 0:0!=a.legendPosY&&4!=a.legendPosY||(F=be);break;case 1:F=I;break;case 2:F=I+V/2-Y/2;break;case-2:F=u/2-Y/2;break;case 3:F=u-B-Y;break;case 4:0!=a.legendPosY&&4!=a.legendPosY||(F=u-Oe-Y);break;default:F=u-B}}if("Line"!=d&&"HorizontalBar"!=d&&"HorizontalStackedBar"!=d||(a.inGraphDataShow&&(B=Math.max(B,Math.max(oe,re)+1+x),I=Math.max(I,Math.max(oe,re)+1+m)),(a.xAxisTop||a.xAxisBottom)&&(B=Math.max(B,Math.max(Q/2,ee/2)+1+x),I=Math.max(I,Math.max(Q/2,ee/2)+1+m)),V=u-B-I),c&&a.yAxisLeft&&(a.yAxisUnitBorders||"none"!=a.yAxisUnitBackgroundColor)&&(a.yAxisLeft&&(I=Math.max(I,m+a.spaceLeft+(a.yAxisUnitBorders&&isBorder(a.yAxisUnitBordersSelection,"LEFT"))*a.yAxisUnitBordersWidth+("none"!=a.yAxisUnitBackgroundColor||a.yAxisUnitBorders)*Math.ceil(t.chartSpaceScale*a.yAxisUnitBordersYSpace)+1+Z/2)),a.yAxisRight&&(B=Math.max(B,x+a.spaceRight+(a.yAxisUnitBorders&&isBorder(a.yAxisUnitBordersSelection,"RIGHT"))*a.yAxisUnitBordersWidth+("none"!=a.yAxisUnitBackgroundColor||a.yAxisUnitBorders)*Math.ceil(t.chartSpaceScale*a.yAxisUnitBordersYSpace)+1+Z/2)),V=u-B-I),"Line"!=d&&"Bar"!=d&&"StackedBar"!=d||(a.inGraphDataShow&&(b=Math.max(b,Math.max(se,ce)+1+A)),G=p-b-O),dispCrossImage(t,a,u/2,p/2,u/2,p/2,!1,e,-1,-1),"function"==typeof a.initFunction&&a.initFunction("INITFUNCTION",t,e,null,-1,-1,{animationValue:0,cntiter:0,config:a,borderX:0,borderY:0,midPosX:0,midPosY:0}),"nihil"!=n){if(g>0&&(t.save(),t.beginPath(),t.setLineDash(lineStyleFn(a.canvasBordersStyle)),t.strokeStyle=a.canvasBordersColor,t.lineWidth=g,t.setLineDash(lineStyleFn(a.canvasBordersStyle)),t.strokeStyle=a.canvasBordersColor,t.fillStyle="rgba(0,0,0,0)",t.drawRectangle({x:0+m/2,y:0+A/2,width:u-x/2-m/2,height:p-A/2-f/2,borders:!0,bordersWidth:g,borderSelection:a.canvasBordersSelection,borderRadius:a.canvasBordersRadius,fill:!1,stroke:!0}),t.setLineDash([]),t.restore()),T>0){t.save(),t.beginPath(),t.font=a.graphTitleFontStyle+" "+Math.ceil(t.chartTextScale*a.graphTitleFontSize).toString()+"px "+a.graphTitleFontFamily,t.fillStyle=a.graphTitleFontColor,t.textBaseline="top";var Be;switch(a.graphTitleAlign){case"right":t.textAlign="right",Be=Math.ceil(t.chartSpaceScale*a.spaceLeft)+(u-Math.ceil(t.chartSpaceScale*a.spaceLeft)-Math.ceil(t.chartSpaceScale*a.spaceRight))/2,Be=u-Math.ceil(t.chartSpaceScale*(a.spaceRight+a.graphTitleShift))-x;break;case"left":t.textAlign="left",Be=m+Math.ceil(t.chartSpaceScale*(a.spaceLeft+a.graphTitleShift));break;default:t.textAlign="center",Be=m+Math.ceil(t.chartSpaceScale*a.spaceLeft)+(u-x-m-Math.ceil(t.chartSpaceScale*a.spaceLeft)-Math.ceil(t.chartSpaceScale*a.spaceRight))/2}setTextBordersAndBackground(t,a.graphTitle,Math.ceil(t.chartTextScale*a.graphTitleFontSize),Be,P,a.graphTitleBorders,a.graphTitleBordersSelection,a.graphTitleBordersColor,Math.ceil(t.chartLineScale*a.graphTitleBordersWidth),Math.ceil(t.chartSpaceScale*a.graphTitleBordersXSpace),Math.ceil(t.chartSpaceScale*a.graphTitleBordersYSpace),a.graphTitleBordersStyle,a.graphTitleBackgroundColor,"GRAPHTITLE",a.graphTitleBordersRadius),
t.translate(Be,P),t.fillTextMultiLine(a.graphTitle,0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.graphTitleFontSize),!0,a.detectMouseOnText,t,"TITLE_TEXTMOUSE",0,Be,P,-1,-1),t.stroke(),t.restore()}if(D>0){switch(t.save(),t.beginPath(),t.font=a.graphSubTitleFontStyle+" "+Math.ceil(t.chartTextScale*a.graphSubTitleFontSize).toString()+"px "+a.graphSubTitleFontFamily,t.fillStyle=a.graphSubTitleFontColor,a.graphSubTitleAlign){case"right":t.textAlign="right",Be=u-Math.ceil(t.chartSpaceScale*(a.spaceRight+a.graphSubTitleShift))-x;break;case"left":t.textAlign="left",Be=m+Math.ceil(t.chartSpaceScale*(a.spaceLeft+a.graphSubTitleShift));break;default:t.textAlign="center",Be=m+Math.ceil(t.chartSpaceScale*a.spaceLeft)+(u-x-m-Math.ceil(t.chartSpaceScale*a.spaceLeft)-Math.ceil(t.chartSpaceScale*a.spaceRight))/2}t.textBaseline="top",setTextBordersAndBackground(t,a.graphSubTitle,Math.ceil(t.chartTextScale*a.graphSubTitleFontSize),Be,M,a.graphSubTitleBorders,a.graphSubTitleBordersSelection,a.graphSubTitleBordersColor,Math.ceil(t.chartLineScale*a.graphSubTitleBordersWidth),Math.ceil(t.chartSpaceScale*a.graphSubTitleBordersXSpace),Math.ceil(t.chartSpaceScale*a.graphSubTitleBordersYSpace),a.graphSubTitleBordersStyle,a.graphSubTitleBackgroundColor,"GRAPHSUBTITLE",a.graphSubTitleBordersRadius),t.translate(Be,M),t.fillTextMultiLine(a.graphSubTitle,0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.graphSubTitleFontSize),!0,a.detectMouseOnText,t,"SUBTITLE_TEXTMOUSE",0,Be,M,-1,-1),t.stroke(),t.restore()}if(""!=a.footNote.trim()){switch(t.save(),t.font=a.footNoteFontStyle+" "+Math.ceil(t.chartTextScale*a.footNoteFontSize).toString()+"px "+a.footNoteFontFamily,t.fillStyle=a.footNoteFontColor,a.footNoteAlign){case"right":t.textAlign="right",Be=u-Math.ceil(t.chartSpaceScale*(a.spaceRight+a.footNoteShift))-x;break;case"left":t.textAlign="left",Be=m+Math.ceil(t.chartSpaceScale*(a.spaceLeft+a.footNoteShift));break;default:t.textAlign="center",Be=I+V/2}t.textBaseline="bottom",setTextBordersAndBackground(t,a.footNote,Math.ceil(t.chartTextScale*a.footNoteFontSize),Be,v,a.footNoteBorders,a.footNoteBordersSelection,a.footNoteBordersColor,Math.ceil(t.chartLineScale*a.footNoteBordersWidth),Math.ceil(t.chartSpaceScale*a.footNoteBordersXSpace),Math.ceil(t.chartSpaceScale*a.footNoteBordersYSpace),a.footNoteBordersStyle,a.footNoteBackgroundColor,"FOOTNOTE",a.footNoteBordersRadius),t.translate(Be,v),t.fillTextMultiLine(a.footNote,0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.footNoteFontSize),!0,a.detectMouseOnText,t,"FOOTNOTE_TEXTMOUSE",0,Be,v,-1,-1),t.stroke(),t.restore()}if(K>0&&(a.yAxisLeft&&(t.save(),t.beginPath(),t.font=a.yAxisUnitFontStyle+" "+Math.ceil(t.chartTextScale*a.yAxisUnitFontSize).toString()+"px "+a.yAxisUnitFontFamily,t.fillStyle=a.yAxisUnitFontColor,t.textAlign="center",t.textBaseline="bottom",setTextBordersAndBackground(t,a.yAxisUnit,Math.ceil(t.chartTextScale*a.yAxisUnitFontSize),I,J,a.yAxisUnitBorders,a.yAxisUnitBordersSelection,a.yAxisUnitBordersColor,Math.ceil(t.chartLineScale*a.yAxisUnitBordersWidth),Math.ceil(t.chartSpaceScale*a.yAxisUnitBordersXSpace),Math.ceil(t.chartSpaceScale*a.yAxisUnitBordersYSpace),a.yAxisUnitBordersStyle,a.yAxisUnitBackgroundColor,"YAXISUNIT",a.yAxisUnitBordersRadius),t.translate(I,J),t.fillTextMultiLine(a.yAxisUnit,0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.yAxisUnitFontSize),!0,a.detectMouseOnText,t,"YLEFTAXISUNIT_TEXTMOUSE",0,I,J,-1,-1),t.stroke(),t.restore()),a.yAxisRight&&(""==a.yAxisUnit2&&(a.yAxisUnit2=a.yAxisUnit),t.save(),t.beginPath(),t.font=a.yAxisUnitFontStyle+" "+Math.ceil(t.chartTextScale*a.yAxisUnitFontSize).toString()+"px "+a.yAxisUnitFontFamily,t.fillStyle=a.yAxisUnitFontColor,t.textAlign="center",t.textBaseline="bottom",setTextBordersAndBackground(t,a.yAxisUnit2,Math.ceil(t.chartTextScale*a.yAxisUnitFontSize),u-B,J,a.yAxisUnitBorders,a.yAxisUnitBordersSelection,a.yAxisUnitBordersColor,Math.ceil(t.chartLineScale*a.yAxisUnitBordersWidth),Math.ceil(t.chartSpaceScale*a.yAxisUnitBordersXSpace),Math.ceil(t.chartSpaceScale*a.yAxisUnitBordersYSpace),a.yAxisUnitBordersStyle,a.yAxisUnitBackgroundColor,"YAXISUNIT",a.yAxisUnitBordersRadius),t.translate(u-B,J),t.fillTextMultiLine(a.yAxisUnit2,0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.yAxisUnitFontSize),!0,a.detectMouseOnText,t,"YRIGHTAXISUNIT_TEXTMOUSE",0,u-B,J,-1,-1),t.stroke(),t.restore())),he>0&&(a.yAxisLeft&&(t.save(),t.beginPath(),t.font=a.yAxisFontStyle+" "+Math.ceil(t.chartTextScale*a.yAxisFontSize).toString()+"px "+a.yAxisFontFamily,t.fillStyle=a.yAxisFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(de,b+G/2),t.rotate(-(90*(Math.PI/180))),setTextBordersAndBackground(t,a.yAxisLabel,Math.ceil(t.chartTextScale*a.yAxisFontSize),0,0,a.yAxisLabelBorders,a.yAxisLabelBordersSelection,a.yAxisLabelBordersColor,Math.ceil(t.chartLineScale*a.yAxisLabelBordersWidth),Math.ceil(t.chartSpaceScale*a.yAxisLabelBordersXSpace),Math.ceil(t.chartSpaceScale*a.yAxisLabelBordersYSpace),a.yAxisLabelBordersStyle,a.yAxisLabelBackgroundColor,"YAXISLABELLEFT",a.yAxisLabelBordersRadius),t.fillTextMultiLine(a.yAxisLabel,0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.yAxisFontSize),!1,a.detectMouseOnText,t,"YLEFTAXISLABEL_TEXTMOUSE",-(90*(Math.PI/180)),de,b+G/2,-1,-1),t.stroke(),t.restore()),a.yAxisRight)){var Ve=a.yAxisLabel2;""==Ve&&(Ve=a.yAxisLabel),t.save(),t.beginPath(),t.font=a.yAxisFontStyle+" "+Math.ceil(t.chartTextScale*a.yAxisFontSize).toString()+"px "+a.yAxisFontFamily,t.fillStyle=a.yAxisFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(pe,b+G/2),t.rotate(+(90*(Math.PI/180))),setTextBordersAndBackground(t,Ve,Math.ceil(t.chartTextScale*a.yAxisFontSize),0,0,a.yAxisLabelBorders,a.yAxisLabelBordersSelection,a.yAxisLabelBordersColor,Math.ceil(t.chartLineScale*a.yAxisLabelBordersWidth),Math.ceil(t.chartSpaceScale*a.yAxisLabelBordersXSpace),Math.ceil(t.chartSpaceScale*a.yAxisLabelBordersYSpace),a.yAxisLabelBordersStyle,a.yAxisLabelBackgroundColor,"YAXISLABELLEFT",a.yAxisLabelBordersRadius),t.fillTextMultiLine(Ve,0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.yAxisFontSize),!1,a.detectMouseOnText,t,"YRIGHTAXISLABEL_TEXTMOUSE",+(90*(Math.PI/180)),pe,b+G/2,-1,-1),t.stroke(),t.restore()}if(te>0&&(a.xAxisBottom&&(t.save(),t.beginPath(),t.font=a.xAxisFontStyle+" "+Math.ceil(t.chartTextScale*a.xAxisFontSize).toString()+"px "+a.xAxisFontFamily,t.fillStyle=a.xAxisFontColor,t.textAlign="center",t.textBaseline="bottom",setTextBordersAndBackground(t,a.xAxisLabel,Math.ceil(t.chartTextScale*a.xAxisFontSize),I+V/2,le,a.xAxisLabelBorders,a.xAxisLabelBordersSelection,a.xAxisLabelBordersColor,Math.ceil(t.chartLineScale*a.xAxisLabelBordersWidth),Math.ceil(t.chartSpaceScale*a.xAxisLabelBordersXSpace),Math.ceil(t.chartSpaceScale*a.xAxisLabelBordersYSpace),a.xAxisLabelBordersStyle,a.xAxisLabelBackgroundColor,"XAXISLABEL",a.xAxisLabelBordersRadius),t.translate(I+V/2,le),t.fillTextMultiLine(a.xAxisLabel,0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.xAxisFontSize),!0,a.detectMouseOnText,t,"XAXISLABEL_TEXTMOUSE",0,I+V/2,le,-1,-1),t.stroke(),t.restore()),a.xAxisTop)){var Ge=a.xAxisLabel2;""==Ge&&(Ge=a.xAxisLabel),t.save(),t.beginPath(),t.font=a.xAxisFontStyle+" "+Math.ceil(t.chartTextScale*a.xAxisFontSize).toString()+"px "+a.xAxisFontFamily,t.fillStyle=a.xAxisFontColor,t.textAlign="center",t.textBaseline="top",setTextBordersAndBackground(t,Ge,Math.ceil(t.chartTextScale*a.xAxisFontSize),I+V/2,ne,a.xAxisLabelBorders,a.xAxisLabelBordersSelection,a.xAxisLabelBordersColor,Math.ceil(t.chartLineScale*a.xAxisLabelBordersWidth),Math.ceil(t.chartSpaceScale*a.xAxisLabelBordersXSpace),Math.ceil(t.chartSpaceScale*a.xAxisLabelBordersYSpace),a.xAxisLabelBordersStyle,a.xAxisLabelBackgroundColor,"XAXISLABEL",a.xAxisLabelBordersRadius),t.translate(I+V/2,ne),t.fillTextMultiLine(Ge,0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.xAxisFontSize),!0,a.detectMouseOnText,t,"XAXISLABEL_TEXTMOUSE",0,I+V/2,le,-1,-1),t.stroke(),t.restore()}var Re;R>1||1==R&&a.showSingleLegend?(Re={dispLegend:!0,xLegendPos:F,yLegendPos:H,nbLegendLines:W,nbLegendCols:E,reverseLegend:s,legendBox:h,widestLegend:C,highestLegend:N,legendWidth:k.legendWidth,legendHeight:k.legendHeight,legendBackgroundColorWidth:k.legendBackgroundColorWidth,legendBackgroundColorHeight:k.legendBackgroundColorHeight,legendBorderWidth:k.legendBorderWidth,legendBorderHeight:k.legendBorderHeight,legendFirstTextXPos:k.legendFirstTextXPos,legendFirstTextYPos:k.legendFirstTextYPos,legendBackgroundColorXPos:k.legendBackgroundColorXPos,legendBackgroundColorYPos:k.legendBackgroundColorYPos,legendBorderXPos:k.legendBorderXPos,legendBorderYPos:k.legendBorderYPos,elementMsr:k.elementMsr},0!=a.legendPosY&&4!=a.legendPosY&&0!=a.legendPosX&&4!=a.legendPosX||(drawLegend(Re,e,a,t,d,-1),Re={dispLegend:!1})):Re={dispLegend:!1}}return clrx=I,clrwidth=V,clry=b,clrheight=G,{leftNotUsableWidth:I,rightNotUsableWidth:B,availableWidth:V,topNotUsableHeight:b,bottomNotUsableHeight:O,availableHeight:G,widestXLabel:Q,widestTXLabel:ee,highestXLabel:$,highestTXLabel:ae,widestYLabel:oe,widestYLabel2:re,highestYLabel:se,rotateLabels:me,rotateTLabels:Te,xLabelPos:ve,xTLabelPos:Le,clrx:clrx,clry:clry,clrwidth:clrwidth,clrheight:clrheight,legendMsr:Re}}function drawLinesDataset(e,a,t,i,l,n){function o(e,n,o,s){0==setOptionValue(!0,!0,1,"LINKTYPE",i,a,l,a.datasets[s].linkType,t.linkType,"linkType",s,y,{nullvalue:null})&&setOptionValue(!0,!0,1,"BEZIERCURVE",i,a,l,void 0,t.bezierCurve,"bezierCurve",s,-1,{nullValue:!0})&&(e.length=0,e.push(n),e.push(o)),m=o}function s(e,a,t,i){return yposOrigin="undefined","undefined"!=typeof i[e][a].yPosOffsetOrigin&&(yposOrigin=i[e][a].yAxisPos-x.mainVal*i[e][a].yPosOffsetOrigin),yposOrigin}function r(e,a,t,i,l,n,o,s,r){0==setOptionValue(!0,!0,1,"LINKTYPE",a,n,o,n.datasets[s].linkType,l.linkType,"linkType",s,y,{nullvalue:null})&&setOptionValue(!0,!0,1,"BEZIERCURVE",a,n,o,void 0,l.bezierCurve,"bezierCurve",s,-1,{nullValue:!0})?(e.push(t),e.push(i)):0==setOptionValue(!0,!0,1,"LINKTYPE",a,n,o,n.datasets[s].linkType,l.linkType,"linkType",s,y,{nullvalue:null})?a.lineTo(t,i):1==setOptionValue(!0,!0,1,"LINKTYPE",a,n,o,n.datasets[s].linkType,l.linkType,"linkType",s,y,{nullvalue:null})?("undefined"!=r?a.moveTo(t,r):a.moveTo(t,o[s][0].xAxisPosY-o[s][0].zeroY),a.lineTo(t,i)):2==setOptionValue(!0,!0,1,"LINKTYPE",a,n,o,n.datasets[s].linkType,l.linkType,"linkType",s,y,{nullvalue:null})&&"undefined"!=typeof m&&(a.lineTo(t,m),a.lineTo(t,i),m=i)}function c(e,t,i,n){0==setOptionValue(!0,!0,1,"LINKTYPE",t,a,l,a.datasets[n].linkType,i.linkType,"linkType",n,y,{nullvalue:null})&&setOptionValue(!0,!0,1,"BEZIERCURVE",t,a,l,void 0,i.bezierCurve,"bezierCurve",n,-1,{nullValue:!0})&&(minimumpos=l[n][0].xAxisPosY,maximumpos=l[n][0].xAxisPosY-l[n][0].calculatedScale.steps*l[n][0].scaleHop,d(t,e,setOptionValue(!0,!0,1,"BEZIERCURVETENSION",t,a,l,void 0,i.bezierCurveTension,"bezierCurveTension",n,-1,{nullValue:!0}),minimumpos,maximumpos),e.length=0),m=void 0}function h(e,a,t,i,l,n,o){var s=Math.sqrt(Math.pow(t-e,2)+Math.pow(i-a,2)),r=Math.sqrt(Math.pow(l-t,2)+Math.pow(n-i,2)),c=o*s/(s+r),h=o-c,d=t+c*(e-l),p=i+c*(a-n),u=t-h*(e-l),S=i-h*(a-n);return[d,p,u,S]}function d(e,i,n,o,s){var r=[],c=i.length;if(i.push(2*i[c-2]-i[c-4]),i.push(2*i[c-1]-i[c-3]),4==c)return e.moveTo(i[0],i[1]),void e.lineTo(i[2],i[3]);for(var d=0;d<c-2;d+=2)r=r.concat(h(i[d],i[d+1],i[d+2],i[d+3],i[d+4],i[d+5],n));for(e.beginPath(),e.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",e,a,l,a.datasets[P].strokeColor,t.defaultStrokeColor,"strokeColor",P,y,{nullvalue:null}),e.lineWidth=Math.ceil(e.chartLineScale*setOptionValue(!0,!0,1,"LINEWIDTH",e,a,l,a.datasets[P].datasetStrokeWidth,t.datasetStrokeWidth,"datasetStrokeWidth",P,y,{nullvalue:null})),e.moveTo(i[0],i[1]),e.quadraticCurveTo(r[0],Math.max(Math.min(r[1],o),s),i[2],i[3]),e.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",e,a,l,a.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,y,{nullvalue:null}))),d=2;d<i.length-4;d+=2)p=Math.max(Math.min(r[2*d-1],o),s),u=Math.max(Math.min(r[2*d+1],o),s),e.bezierCurveTo(r[2*d-2],p,r[2*d],u,i[d+2],i[d+3]);e.stroke()}for(var p,u,S,g,A,f,x,m,T=[],P=0;P<a.datasets.length;P++)if(1==setOptionValue(!0,!0,1,"ANIMATION",i,a,l,a.datasets[P].animation,t.animation,"animation",P,-1,{nullvalue:null})||e>=1){if(m="undefined","Line"!=l[P][0].tpchart)continue;if(0==l[P].length)continue;if(l[P][0].firstNotMissing==-1)continue;i.save(),i.beginPath(),prevAnimPc={mainVal:0,subVal:0,animVal:0};for(var D=-1,M=-1,y=l[P][0].firstNotMissing;y<=l[P][0].lastNotMissing;y++)if(todisplay=!0,0==setOptionValue(!0,!0,1,"DISPLAYDATA",i,a,l,a.datasets[P].displayData,t.displayData,"displayData",P,y,{nullvalue:null})&&(todisplay=!1),0==setOptionValue(!0,!0,1,"DISPLAYDATA",i,a,l,a.displayData,t.displayData,"displayData",y,-1,{nullvalue:null})&&(todisplay=!1),"undefined"==typeof a.datasets[P].data[y]&&(todisplay=!1),!(0==prevAnimPc.animVal&&y>l[P][0].firstNotMissing))if(x=animationCorrection(e,a,t,P,y,!0),0==x.mainVal&&prevAnimPc.mainVal>0&&D!=-1)i.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",i,a,l,a.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,y,{nullvalue:null}))),i.stroke(),i.setLineDash([]),t.extrapolateMissingData?(p=l[P][l[P][y].prevNotMissing].yAxisPos-prevAnimPc.mainVal*l[P][l[P][y].prevNotMissing].yPosOffset,u=l[P][y].yAxisPos-prevAnimPc.mainVal*l[P][l[P][y-1].nextNotMissing].yPosOffset,g=l[P][y-1].nextNotMissing-l[P][y].prevNotMissing,A=y-1-l[P][y].prevNotMissing,f=(A+prevAnimPc.subVal)/g,S=p+f*(u-p),r(T,i,l[P][l[P][y].prevNotMissing].xPos+f*(l[P][l[P][y-1].nextNotMissing].xPos-l[P][l[P][y].prevNotMissing].xPos),S,t,a,l,P,s(P,y,a,l)),c(T,i,t,P),i.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",i,a,l,a.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,y,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle="rgba(0,0,0,0)",t.datasetFill&&1!=setOptionValue(!0,!0,1,"LINKTYPE",i,a,l,a.datasets[P].linkType,t.linkType,"linkType",P,y,{nullvalue:null})&&(i.lineTo(l[P][l[P][y].prevNotMissing].xPos+f*(l[P][l[P][y-1].nextNotMissing].xPos-l[P][l[P][y].prevNotMissing].xPos),l[P][y].yAxisPos),i.lineTo(l[P][D].xPos,l[P][D].xAxisPosY-l[P][0].zeroY),i.closePath(),i.fillStyle=setOptionValue(!0,!0,1,"COLOR",i,a,l,a.datasets[P].fillColor,t.defaultFillColor,"fillColor",P,y,{animationValue:x.mainVal,xPosLeft:l[P][0].xPos,yPosBottom:Math.max(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*x.mainVal)*l[P][0].lminvalue_offset),xPosRight:l[P][a.datasets[P].data.length-1].xPos,yPosTop:Math.min(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*x.mainVal)*l[P][0].lmaxvalue_offset)}),i.fill(),D=-1)):1==todisplay&&(r(T,i,l[P][y-1].xPos+prevAnimPc.subVal*(l[P][y].xPos-l[P][y-1].xPos),l[P][y].yAxisPos-prevAnimPc.mainVal*l[P][l[P][y-1].nextNotMissing].yPosOffset,t,a,l,P,s(P,y,a,l)),c(T,i,t,P),i.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",i,a,l,a.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,y,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle="rgba(0,0,0,0)",t.datasetFill&&1!=setOptionValue(!0,!0,1,"LINKTYPE",i,a,l,a.datasets[P].linkType,t.linkType,"linkType",P,y,{nullvalue:null})&&(i.lineTo(l[P][y-1].xPos+prevAnimPc.subVal*(l[P][y].xPos-l[P][y-1].xPos),l[P][y].yAxisPos),i.lineTo(l[P][D].xPos,l[P][D].xAxisPosY-l[P][0].zeroY),i.closePath(),i.fillStyle=setOptionValue(!0,!0,1,"COLOR",i,a,l,a.datasets[P].fillColor,t.defaultFillColor,"fillColor",P,y,{animationValue:x.mainVal,xPosLeft:l[P][0].xPos,yPosBottom:Math.max(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*x.mainVal)*l[P][0].lminvalue_offset),xPosRight:l[P][a.datasets[P].data.length-1].xPos,yPosTop:Math.min(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*x.mainVal)*l[P][0].lmaxvalue_offset)}),i.fill())),prevAnimPc=x;else{switch(0==x.totVal?(i.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",i,a,l,a.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,y,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle="rgba(0,0,0,0)"):(i.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",i,a,l,a.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,y,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",i,a,l,a.datasets[P].strokeColor,t.defaultStrokeColor,"strokeColor",P,y,{nullvalue:null})),prevAnimPc=x,todisplay){case!1:if(t.extrapolateMissingData)x.subVal>0&&(M=l[P][y].xPos+x.subVal*(l[P][y+1].xPos-l[P][y].xPos),p=l[P][l[P][y+1].prevNotMissing].yAxisPos-l[P][l[P][y+1].prevNotMissing].yPosOffset,u=l[P][l[P][y].nextNotMissing].yAxisPos-l[P][l[P][y].nextNotMissing].yPosOffset,g=l[P][y].nextNotMissing-l[P][y+1].prevNotMissing,A=y-l[P][y+1].prevNotMissing,f=(A+prevAnimPc.subVal)/g,S=p+f*(u-p),r(T,i,l[P][l[P][y].prevNotMissing].xPos+f*(l[P][l[P][y-1].nextNotMissing].xPos-l[P][l[P][y].prevNotMissing].xPos),S,t,a,l,P,s(P,y,a,l)));else{if(D==-1)continue;c(T,i,t,P),i.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",i,a,l,a.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,y,{nullvalue:null}))),i.stroke(),i.setLineDash([]),t.datasetFill&&D!=-1&&1!=setOptionValue(!0,!0,1,"LINKTYPE",i,a,l,a.datasets[P].linkType,t.linkType,"linkType",P,y,{nullvalue:null})&&(M=-1,i.strokeStyle="rgba(0,0,0,0)",i.lineTo(l[P][y-1].xPos,l[P][y-1].yAxisPos),i.lineTo(l[P][D].xPos,l[P][D].yAxisPos),i.closePath(),i.fillStyle=setOptionValue(!0,!0,1,"COLOR",i,a,l,a.datasets[P].fillColor,t.defaultFillColor,"fillColor",P,y,{animationValue:x.mainVal,xPosLeft:l[P][0].xPos,yPosBottom:Math.max(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*x.mainVal)*l[P][0].lminvalue_offset),xPosRight:l[P][a.datasets[P].data.length-1].xPos,yPosTop:Math.min(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*x.mainVal)*l[P][0].lmaxvalue_offset)}),i.fill()),i.beginPath(),prevAnimPc={mainVal:0,subVal:0},D=-1}break;default:i.lineWidth=Math.ceil(i.chartLineScale*setOptionValue(!0,!0,1,"LINEWIDTH",i,a,l,a.datasets[P].datasetStrokeWidth,t.datasetStrokeWidth,"datasetStrokeWidth",P,y,{nullvalue:null})),D==-1?(D=y,i.beginPath(),1==setOptionValue(!0,!0,1,"LINKTYPE",i,a,l,a.datasets[P].linkType,t.linkType,"linkType",P,y,{nullvalue:null})?("undefined"!=typeof l[P][y].yPosOffsetOrigin?i.moveTo(l[P][y].xPos,l[P][y].yAxisPos-x.mainVal*l[P][y].yPosOffsetOrigin):i.moveTo(l[P][D].xPos,l[P][D].xAxisPosY-l[P][0].zeroY),i.lineTo(l[P][y].xPos,l[P][y].yAxisPos-x.mainVal*l[P][y].yPosOffset)):i.moveTo(l[P][y].xPos,l[P][y].yAxisPos-x.mainVal*l[P][y].yPosOffset),o(T,l[P][y].xPos,l[P][y].yAxisPos-x.mainVal*l[P][y].yPosOffset,P),M=l[P][y].xPos):(M=l[P][y].xPos,r(T,i,l[P][y].xPos,l[P][y].yAxisPos-x.mainVal*l[P][y].yPosOffset,t,a,l,P,s(P,y,a,l))),x.subVal>0&&l[P][y].nextNotMissing!=-1&&(t.extrapolateMissing||l[P][y].nextNotMissing==y+1)&&(M=l[P][y].xPos+x.subVal*(l[P][y+1].xPos-l[P][y].xPos),p=l[P][l[P][y+1].prevNotMissing].yAxisPos-l[P][l[P][y+1].prevNotMissing].yPosOffset,u=l[P][l[P][y].nextNotMissing].yAxisPos-l[P][l[P][y].nextNotMissing].yPosOffset,S=p+x.subVal*(u-p),r(T,i,l[P][y].xPos+x.subVal*(l[P][l[P][y].nextNotMissing].xPos-l[P][y].xPos),S,t,a,l,P,s(P,y,a,l)))}todisplay&&e>=t.animationStopValue&&(i.pieces_drawn.points++,i.pieces_drawn.total_drawn++)}if(c(T,i,t,P),i.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",i,a,l,a.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,y,{nullvalue:null}))),i.stroke(),i.setLineDash([]),t.datasetFill&&1!=setOptionValue(!0,!0,1,"LINKTYPE",i,a,l,a.datasets[P].linkType,t.linkType,"linkType",P,y,{nullvalue:null})&&D>=0&&(i.strokeStyle="rgba(0,0,0,0)",i.lineTo(M,l[P][0].xAxisPosY-l[P][0].zeroY),i.lineTo(l[P][D].xPos,l[P][D].xAxisPosY-l[P][0].zeroY),i.closePath(),i.fillStyle=setOptionValue(!0,!0,1,"COLOR",i,a,l,a.datasets[P].fillColor,t.defaultFillColor,"fillColor",P,-1,{animationValue:x.mainVal,xPosLeft:l[P][0].xPos,yPosBottom:Math.max(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*x.mainVal)*l[P][0].lminvalue_offset),xPosRight:l[P][a.datasets[P].data.length-1].xPos,yPosTop:Math.min(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*x.mainVal)*l[P][0].lmaxvalue_offset)}),i.fill()),i.restore(),e>=1)for(y=0;y<a.datasets[P].data.length;y++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",i,a,l,a.datasets[P].displayData,t.displayData,"displayData",P,y,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",i,a,l,a.displayData,t.displayData,"displayData",y,-1,{nullvalue:null})&&"undefined"!=typeof a.datasets[P].data[y]&&(x=animationCorrection(e,a,t,P,y,!0),(x.mainVal>0||!t.animationLeftToRight)&&setOptionValue(!0,!0,1,"POINTDOT",i,a,l,void 0,t.pointDot,"pointDot",P,y,{nullvalue:null}))){i.beginPath(),i.fillStyle=setOptionValue(!0,!0,1,"MARKERFILLCOLOR",i,a,l,a.datasets[P].pointColor,t.defaultStrokeColor,"pointColor",P,y,{nullvalue:!0}),i.strokeStyle=setOptionValue(!0,!0,1,"MARKERSTROKESTYLE",i,a,l,a.datasets[P].pointStrokeColor,t.defaultStrokeColor,"pointStrokeColor",P,y,{nullvalue:!0}),i.lineWidth=setOptionValue(!0,!0,i.chartLineScale,"MARKERLINEWIDTH",i,a,l,a.datasets[P].pointDotStrokeWidth,t.pointDotStrokeWidth,"pointDotStrokeWidth",P,y,{nullvalue:!0});var v=setOptionValue(!0,!0,1,"MARKERSHAPE",i,a,l,a.datasets[P].markerShape,t.markerShape,"markerShape",P,y,{nullvalue:!0}),L=setOptionValue(!0,!0,i.chartSpaceScale,"MARKERRADIUS",i,a,l,a.datasets[P].pointDotRadius,t.pointDotRadius,"pointDotRadius",P,y,{nullvalue:!0}),b=setOptionValue(!0,!0,1,"MARKERSTROKESTYLE",i,a,l,a.datasets[P].pointDotStrokeStyle,t.pointDotStrokeStyle,"pointDotStrokeStyle",P,y,{nullvalue:!0});drawMarker(i,l[P][y].xPos,l[P][y].yAxisPos-x.mainVal*l[P][y].yPosOffset,v,L,b)}if(e>=t.animationStopValue)for(y=0;y<a.datasets[P].data.length;y++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",i,a,l,a.datasets[P].displayData,t.displayData,"displayData",P,y,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",i,a,l,a.displayData,t.displayData,"displayData",y,-1,{nullvalue:null})&&"undefined"!=typeof a.datasets[P].data[y]&&(0!=a.datasets[P].mouseDetection&&(jsGraphAnnotate[i.ChartNewId][jsGraphAnnotate[i.ChartNewId].length]=["POINT",P,y,l,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",i,a,l,a.datasets[P].annotateDisplay,t.annotateDisplay,"annotateDisplay",P,y,{nullValue:!0})]),setOptionValue(!0,!0,1,"INGRAPHDATASHOW",i,a,l,a.datasets[P].inGraphDataShow,t.inGraphDataShow,"inGraphDataShow",P,y,{nullValue:!0}))){i.save(),i.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",i,a,l,void 0,t.inGraphDataAlign,"inGraphDataAlign",P,y,{nullValue:!0}),i.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",i,a,l,void 0,t.inGraphDataVAlign,"inGraphDataVAlign",P,y,{nullValue:!0}),i.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",i,a,l,void 0,t.inGraphDataFontStyle,"inGraphDataFontStyle",P,y,{nullValue:!0})+" "+setOptionValue(!0,!0,i.chartTextScale,"INGRAPHDATAFONTSIZE",i,a,l,void 0,t.inGraphDataFontSize,"inGraphDataFontSize",P,y,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",i,a,l,void 0,t.inGraphDataFontFamily,"inGraphDataFontFamily",P,y,{nullValue:!0}),i.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",i,a,l,void 0,t.inGraphDataFontColor,"inGraphDataFontColor",P,y,{nullValue:!0});var O=setOptionValue(!0,!0,i.chartSpaceScale,"INGRAPHDATAPADDINGX",i,a,l,void 0,t.inGraphDataPaddingX,"inGraphDataPaddingX",P,y,{nullValue:!0}),I=setOptionValue(!0,!0,i.chartSpaceScale,"INGRAPHDATAPADDINGY",i,a,l,void 0,t.inGraphDataPaddingY,"inGraphDataPaddingY",P,y,{nullValue:!0}),B=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",i,a,l,void 0,t.inGraphDataTmpl,"inGraphDataTmpl",P,y,{nullValue:!0}),l[P][y],t);i.translate(l[P][y].xPos+O,l[P][y].yAxisPos-x.mainVal*l[P][y].yPosOffset-I);var V=setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",i,a,l,void 0,t.inGraphDataRotate,"inGraphDataRotate",P,y,{nullValue:!0})*(Math.PI/180);i.rotate(V),setTextBordersAndBackground(i,B,setOptionValue(!0,!0,i.chartTextScale,"INGRAPHDATAFONTSIZE",i,a,l,void 0,t.inGraphDataFontSize,"inGraphDataFontSize",P,y,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",i,a,l,void 0,t.inGraphDataBorders,"inGraphDataBorders",P,y,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",i,a,l,void 0,t.inGraphDataBordersSelection,"inGraphDataBordersSelection",P,y,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",i,a,l,void 0,t.inGraphDataBordersColor,"inGraphDataBordersColor",P,y,{nullValue:!0}),setOptionValue(!0,!0,i.chartLineScale,"INGRAPHDATABORDERSWIDTH",i,a,l,void 0,t.inGraphDataBordersWidth,"inGraphDataBordersWidth",P,y,{nullValue:!0}),setOptionValue(!0,!0,i.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",i,a,l,void 0,t.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",P,y,{nullValue:!0}),setOptionValue(!0,!0,i.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",i,a,l,void 0,t.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",P,y,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",i,a,l,void 0,t.inGraphDataBordersStyle,"inGraphDataBordersStyle",P,y,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",i,a,l,void 0,t.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",P,y,{nullValue:!0}),"INGRAPHDATA",t.inGraphDataBordersRadius),i.fillTextMultiLine(B,0,0,i.textBaseline,setOptionValue(!0,!0,i.chartTextScale,"INGRAPHDATAFONTSIZE",i,a,l,void 0,t.inGraphDataFontSize,"inGraphDataFontSize",P,y,{nullValue:!0}),!0,t.detectMouseOnText,i,"INGRAPHDATA_TEXTMOUSE",V,l[P][y].xPos+O,l[P][y].yAxisPos-x.mainVal*l[P][y].yPosOffset-I,P,y),i.restore()}}i.setLineDash([])}function log10(e){return Math.log(e)/Math.LN10}function setRect(e,a){a.clearRect?a.multiGraph||(clear(e),e.clearRect(0,0,width,height)):(clear(e),e.clearRect(0,0,width,height),e.fillStyle=a.savePngBackgroundColor,e.strokeStyle=a.savePngBackgroundColor,e.beginPath(),e.moveTo(0,0),e.lineTo(0,e.canvas.height),e.lineTo(e.canvas.width,e.canvas.height),e.lineTo(e.canvas.width,0),e.lineTo(0,0),e.stroke(),e.fill())}function defMouse(e,a,t){function i(e,a){e.mouseAction.indexOf("/"+a)>=0?e.mouseAction[e.mouseAction.indexOf("/"+a)]=a:e.mouseAction.indexOf(a)<0&&(e.mouseAction[e.mouseAction.length]=a)}function l(e,a){isIE()<9&&0!=isIE()?e.canvas.attachEvent("on"+a.split(" ")[0],function(t){doMouseAction(t,e.ChartNewId,a.split(" ")[0])}):e.canvas.addEventListener(a.split(" ")[0],function(t){doMouseAction(t,e,a.split(" ")[0])},!1)}var n=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";if("undefined"==typeof e.mouseAction)e.mouseAction=[];else for(var o=0;o<e.mouseAction;o++)"/"!=e.mouseAction.substring(0,1)&&(e.mouseAction[o]="/"+e.mouseAction[o]);1==t.savePng&&("mousedown left"==t.savePngFunction?i(e,"mousedown 1"):"mousedown middle"==t.savePngFunction?i(e,"mousedown 2"):"mousedown right"==t.savePngFunction&&i(e,"mousedown 3")),1==t.annotateDisplay&&(0==cursorDivCreated&&(oCursor=new makeCursorObj(t,annotate_shape)),"mousedown left"==t.annotateFunction?i(e,"mousedown 1"):"mousedown middle"==t.annotateFunction?i(e,"mousedown 2"):"mousedown right"==t.annotateFunction?i(e,"mousedown 3"):"mousemove"==t.annotateFunction&&i(e,"mousemove")),1==t.highLight&&("mousedown left"==t.highLightMouseFunction?i(e,"mousedown 1"):"mousedown middle"==t.highLightMouseFunction?i(e,"mousedown 2"):"mousedown right"==t.highLightMouseFunction?i(e,"mousedown 3"):"mousemove"==t.highLightMouseFunction&&i(e,"mousemove")),"function"==typeof t.mouseMove&&i(e,"mousemove"),"function"==typeof t.mouseDownLeft&&i(e,"mousedown 1"),"function"==typeof t.mouseDownMiddle&&i(e,"mousedown 2"),"function"==typeof t.mouseDownRight&&i(e,"mousedown 3"),"function"==typeof t.mouseWheel&&i(e,n),"function"==typeof t.mouseOut&&i(e,"mouseout"),"function"==typeof t.mouseDblClick&&i(e,"dblclick");var s=!1;(e.mouseAction.indexOf("mousemove")>=0&&e.mouseAction.indexOf("/mousemove")<0||e.mouseAction.indexOf("mouseout")>=0&&e.mouseAction.indexOf("/mouseout")<0)&&(i(e,"mouseout"),s=!0,l(e,"mouseout")),(e.mouseAction.indexOf("mousemove")>=0&&e.mouseAction.indexOf("/mousemove")<0||e.mouseAction.indexOf(n)>=0&&e.mouseAction.indexOf("/"+n)<0)&&(i(e,n),s=!0,l(e,n)),e.mouseAction.indexOf("mousemove")>=0&&e.mouseAction.indexOf("/mousemove")<0&&(s=!0,l(e,"mousemove")),e.mouseAction.indexOf("dblclick")>=0&&e.mouseAction.indexOf("/dblclick")<0&&(s=!0,l(e,"dblclick")),(e.mouseAction.indexOf("mousedown 1")>=0&&e.mouseAction.indexOf("/mousedown 1")<0||e.mouseAction.indexOf("mousedown 2")>=0&&e.mouseAction.indexOf("/mousedown 2")<0||e.mouseAction.indexOf("mousedown 3")>=0&&e.mouseAction.indexOf("/mousedown 3")<0)&&(s=!0,l(e,"mousedown")),(0==t.contextMenu||e.mouseAction.indexOf("mousedown 3")>=0)&&e.mouseAction.indexOf("/removeContextMenu")<0&&(e.mouseAction[e.mouseAction.length]="removeContextMenu",e.canvas.oncontextmenu=function(e){e.preventDefault()}),inMouseAction[e.ChartNewId]=!1,mouseActionData[e.ChartNewId]={data:a,config:t,prevShow:-1}}var chart=this,animationOptions={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0==e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1==e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0==e?0:1==e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var a=1.70158,t=0,i=1;return 0==e?0:1==(e/=1)?1:(t||(t=.3),i<Math.abs(1)?(i=1,a=t/4):a=t/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((1*e-a)*(2*Math.PI)/t)))},easeOutElastic:function(e){var a=1.70158,t=0,i=1;return 0==e?0:1==(e/=1)?1:(t||(t=.3),i<Math.abs(1)?(i=1,a=t/4):a=t/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*e)*Math.sin((1*e-a)*(2*Math.PI)/t)+1)},easeInOutElastic:function(e){var a=1.70158,t=0,i=1;return 0==e?0:2==(e/=.5)?1:(t||(t=1*(.3*1.5)),i<Math.abs(1)?(i=1,a=t/4):a=t/(2*Math.PI)*Math.asin(1/i),e<1?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((1*e-a)*(2*Math.PI)/t)):i*Math.pow(2,-10*(e-=1))*Math.sin((1*e-a)*(2*Math.PI)/t)*.5+1)},easeInBack:function(e){var a=1.70158;return 1*(e/=1)*e*((a+1)*e-a)},easeOutBack:function(e){var a=1.70158;return 1*((e=e/1-1)*e*((a+1)*e+a)+1)},easeInOutBack:function(e){var a=1.70158;return(e/=.5)<1?.5*(e*e*(((a*=1.525)+1)*e-a)):.5*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)},easeInBounce:function(e){return 1-animationOptions.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?1*(7.5625*e*e):e<2/2.75?1*(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return e<.5?.5*animationOptions.easeInBounce(2*e):.5*animationOptions.easeOutBounce(2*e-1)+.5}},width=context.canvas.width,height=context.canvas.height;this.Doughnut=function(e,a){chart.Doughnut.defaults=chart.defaults.PieAndDoughnutV2,chart.Doughnut.defaults=mergeChartConfig(chart.defaults.PieAndDoughnut,chart.Doughnut.defaults),isIE()<9&&0!=isIE()&&(chart.Doughnut.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Doughnut.defaults)),chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults),
chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var t=a?mergeChartConfig(chart.Doughnut.defaults,a):chart.Doughnut.defaults;return new Doughnut(e,t,context)},this.PolarArea=function(e,a){chart.PolarArea.defaults=chart.defaults.PolarAreaV2,chart.PolarArea.defaults=mergeChartConfig(chart.defaults.PolarArea,chart.PolarArea.defaults),isIE()<9&&0!=isIE()&&(chart.PolarArea.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.PolarArea.defaults)),chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var t=a?mergeChartConfig(chart.PolarArea.defaults,a):chart.PolarArea.defaults;return new PolarArea(e,t,context)},this.PolarArea=function(e,a){chart.PolarArea.defaults=chart.defaults.PolarAreaV2,chart.PolarArea.defaults=mergeChartConfig(chart.defaults.PolarArea,chart.PolarArea.defaults),isIE()<9&&0!=isIE()&&(chart.PolarArea.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.PolarArea.defaults)),chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var t=a?mergeChartConfig(chart.PolarArea.defaults,a):chart.PolarArea.defaults;return new PolarArea(e,t,context)},this.Radar=function(e,a){chart.Radar.defaults={highLightSet:{pointDotRadius:15,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,yAxisMinimumInterval:"none",scaleGridLinesStep:1,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!1,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineStyle:"solid",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointDotStrokeStyle:"solid",datasetFill:!0,datasetStrokeWidth:2,datasetStrokeStyle:"solid",animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,alwaysRunFunctionAtCompletion:!1,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10,startAngle:90},isIE()<9&&0!=isIE()&&(chart.Radar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Radar.defaults)),chart.Radar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Radar.defaults),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptions),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptionsRadar);var t=a?mergeChartConfig(chart.Radar.defaults,a):chart.Radar.defaults;return new Radar(e,t,context)},this.Pie=function(e,a){chart.Pie.defaults=chart.defaults.PieAndDoughnutV2,chart.Pie.defaults=mergeChartConfig(chart.defaults.PieAndDoughnut,chart.Pie.defaults),isIE()<9&&0!=isIE()&&(chart.Pie.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Pie.defaults)),chart.Pie.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Pie.defaults),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptions),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptionsPie);var t=a?mergeChartConfig(chart.Pie.defaults,a):chart.Pie.defaults;return new Pie(e,t,context)},this.Doughnut=function(e,a){chart.Doughnut.defaults=chart.defaults.PieAndDoughnutV2,chart.Doughnut.defaults=mergeChartConfig(chart.defaults.PieAndDoughnut,chart.Doughnut.defaults),isIE()<9&&0!=isIE()&&(chart.Doughnut.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Doughnut.defaults)),chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var t=a?mergeChartConfig(chart.Doughnut.defaults,a):chart.Doughnut.defaults;return new Doughnut(e,t,context)},this.Line=function(e,a){chart.Line.defaults={inGraphDataShow:!1,highLightSet:{pointDotRadius:15,pointDot:!0},inGraphDataPaddingX:3,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLabel2:"<%=value%>",scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",rotateTLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,bezierCurve:!0,linkType:0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,datasetStrokeStyle:"solid",datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",extrapolateMissingData:!0,onAnimationComplete:null,alwaysRunFunctionAtCompletion:!1,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.Line.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Line.defaults)),chart.Line.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptions),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptionsLine);var t=a?mergeChartConfig(chart.Line.defaults,a):chart.Line.defaults;return new Line(e,t,context)},this.StackedBar=function(e,a){chart.StackedBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:-3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"top",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleLabel2:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",rotateTLabels:"smart",scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,barShowStroke:!0,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,alwaysRunFunctionAtCompletion:!1,bezierCurve:!0,linkType:0,bezierCurveTension:.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.StackedBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.StackedBar.defaults)),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptions),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptionsStackedBar);var t=a?mergeChartConfig(chart.StackedBar.defaults,a):chart.StackedBar.defaults;return new StackedBar(e,t,context)},this.HorizontalStackedBar=function(e,a){chart.HorizontalStackedBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:-3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"right",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",rotateTLabels:"smart",barShowStroke:!0,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,alwaysRunFunctionAtCompletion:!1,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},isIE()<9&&0!=isIE()&&(chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.HorizontalStackedBar.defaults)),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptionsHorizontalStackedBar);var t=a?mergeChartConfig(chart.HorizontalStackedBar.defaults,a):chart.HorizontalStackedBar.defaults;return new HorizontalStackedBar(e,t,context)},this.Bar=function(e,a){chart.Bar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleLabel2:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleGridLineStyle:"solid",showYAxisMin:!0,rotateLabels:"smart",rotateTLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:!0,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,complementaryBar:!1,complementaryBarFullHeight:!1,complementaryColor:"rgba(100,100,100,0.3)",complementaryStrokeColor:"rgba(100,100,100,0.1)",pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,extrapolateMissingData:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,alwaysRunFunctionAtCompletion:!1,bezierCurve:!0,linkType:0,bezierCurveTension:.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.Bar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Bar.defaults)),chart.Bar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptions),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptionsBar);var t=a?mergeChartConfig(chart.Bar.defaults,a):chart.Bar.defaults;return new Bar(e,t,context)},this.HorizontalBar=function(e,a){chart.HorizontalBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,logarithmic:!1,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",rotateTLabels:"smart",barShowStroke:!0,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,complementaryBar:!1,complementaryColor:"rgba(100,100,100,0.3)",complementaryStrokeColor:"rgba(100,100,100,0.1)",animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,alwaysRunFunctionAtCompletion:!1,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},isIE()<9&&0!=isIE()&&(chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.HorizontalBar.defaults)),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptionsHorizontalBar);var t=a?mergeChartConfig(chart.HorizontalBar.defaults,a):chart.HorizontalBar.defaults;return new HorizontalBar(e,t,context)},chart.defaults={},chart.defaults.IExplorer8={annotateBackgroundColor:"black",annotateFontColor:"white"},chart.defaults.commonOptions={generateConvertedData:!1,displayData:!0,showZeroValue:!0,chartTextScale:1,chartLineScale:1,chartSpaceScale:1,multiGraph:!1,forceGraphMin:!0,forceGraphMax:!0,forceGraphMin2:!0,forceGraphMax2:!0,forceScale:"none",forceScale2:"none",clearRect:!0,dynamicDisplay:!1,dynamicDisplayXPartOfChart:.5,dynamicDisplayYPartOfChart:.5,animationForceSetTimeOut:!1,graphSpaceBefore:5,graphSpaceAfter:5,canvasBorders:!1,canvasBackgroundColor:"none",canvasBordersRadius:0,canvasBordersSelection:15,canvasBordersWidth:3,canvasBordersStyle:"solid",canvasBordersColor:"black",zeroValue:1e-10,graphTitle:"",graphTitleAlign:"center",graphTitleShift:10,graphTitleFontFamily:"'Arial'",graphTitleFontSize:24,graphTitleFontStyle:"bold",graphTitleFontColor:"#666",graphTitleSpaceBefore:5,graphTitleSpaceAfter:5,graphTitleBorders:!1,graphTitleBordersRadius:0,graphTitleBordersColor:"black",graphTitleBordersXSpace:3,graphTitleBordersYSpace:3,graphTitleBordersSelection:15,graphTitleBordersWidth:1,graphTitleBordersStyle:"solid",graphTitleBackgroundColor:"none",graphSubTitle:"",graphSubTitleAlign:"center",graphSubTitleShift:10,graphSubTitleFontFamily:"'Arial'",graphSubTitleFontSize:18,graphSubTitleFontStyle:"normal",graphSubTitleFontColor:"#666",graphSubTitleSpaceBefore:5,graphSubTitleSpaceAfter:5,graphSubTitleBorders:!1,graphSubTitleBordersColor:"black",graphSubTitleBordersRadius:0,graphSubTitleBordersXSpace:3,graphSubTitleBordersYSpace:3,graphSubTitleBordersSelection:15,graphSubTitleBordersWidth:1,graphSubTitleBordersStyle:"solid",graphSubTitleBackgroundColor:"none",footNote:"",footNoteAlign:"center",footNoteShift:10,footNoteFontFamily:"'Arial'",footNoteFontSize:8,footNoteFontStyle:"bold",footNoteFontColor:"#666",footNoteSpaceBefore:5,footNoteSpaceAfter:5,footNoteBorders:!1,footNoteBordersColor:"black",footNoteBordersRadius:0,footNoteBordersXSpace:3,footNoteBordersYSpace:3,footNoteBordersSelection:15,footNoteBordersWidth:1,footNoteBordersStyle:"solid",footNoteBackgroundColor:"none",legend:!1,legendWhenToDraw:"all",showSingleLegend:!1,maxLegendCols:999,maxLegendLines:999,legendPosY:4,legendPosX:-2,legendFontFamily:"'Arial'",legendFontSize:12,legendFontStyle:"normal",legendFontColor:"#666",legendBlockSize:15,legendBlockRadius:0,legendBorders:!0,legendBordersStyle:"solid",legendBordersWidth:1,legendBordersSelection:15,legendBordersColors:"#666",legendBordersRadius:0,legendBordersSpaceBefore:5,legendBordersSpaceAfter:5,legendBordersSpaceLeft:5,legendBordersSpaceRight:5,legendSpaceBeforeText:5,legendSpaceAfterText:5,legendSpaceLeftText:5,legendSpaceRightText:5,legendSpaceBetweenTextVertical:5,legendSpaceBetweenTextHorizontal:5,legendSpaceBetweenBoxAndText:5,legendFillColor:"rgba(0,0,0,0)",legendXPadding:0,legendYPadding:0,inGraphDataBorders:!1,inGraphDataBordersRadius:0,inGraphDataBordersColor:"black",inGraphDataBordersXSpace:3,inGraphDataBordersYSpace:3,inGraphDataBordersSelection:15,inGraphDataBordersWidth:1,inGraphDataBordersStyle:"solid",inGraphDataBackgroundColor:"none",annotateDisplay:!1,annotateRelocate:!1,savePng:!1,savePngOutput:"NewWindow",savePngFunction:"mousedown right",savePngBackgroundColor:"WHITE",annotateFunction:"mousemove",annotateFontFamily:"'Arial'",annotateBorder:"none",annotateBorderRadius:"2px",annotateBackgroundColor:"rgba(0,0,0,0.8)",annotateFontSize:12,annotateFontColor:"white",annotateFontStyle:"normal",annotatePadding:"3px",annotateClassName:"",annotateFunctionIn:null,annotateFunctionOut:null,detectMouseOnText:!1,crossText:[""],crossTextIter:["all"],crossTextOverlay:[!0],crossTextFontFamily:["'Arial'"],crossTextFontSize:[12],crossTextFontStyle:["normal"],crossTextFontColor:["rgba(220,220,220,1)"],crossTextRelativePosX:[2],crossTextRelativePosY:[2],crossTextBaseline:["middle"],crossTextAlign:["center"],crossTextPosX:[0],crossTextPosY:[0],crossTextAngle:[0],crossTextFunction:null,crossTextBorders:[!1],crossTextBordersColor:["black"],crossTextBordersRadius:[0],crossTextBordersXSpace:[3],crossTextBordersYSpace:[3],crossTextBordersSelection:[15],crossTextBordersWidth:[1],crossTextBordersStyle:["solid"],crossTextBackgroundColor:["none"],crossImage:[void 0],crossImageIter:["all"],crossImageOverlay:[!0],crossImageRelativePosX:[2],crossImageRelativePosY:[2],crossImageBaseline:["middle"],crossImageAlign:["center"],crossImagePosX:[0],crossImagePosY:[0],crossImageAngle:[0],spaceTop:0,spaceBottom:0,spaceRight:0,spaceLeft:0,decimalSeparator:".",thousandSeparator:"",currency:"€",currencyPosition:"after",roundNumber:"none",roundPct:-1,templatesOpenTag:"<%=",templatesCloseTag:"%>",fmtV1:"none",fmtV2:"none",fmtV3:"none",fmtV4:"none",fmtV5:"none",fmtV6:"none",fmtV6T:"none",fmtV7:"none",fmtV8:"none",fmtV8T:"none",fmtV9:"none",fmtV10:"none",fmtV11:"none",fmtV12:"none",fmtV13:"none",fmtV14:"none",fmtV15:"none",fmtXLabel:"none",fmtTopXLabel:"none",fmtYLabel:"none",fmtYLabel2:"none",fmtLegend:"none",animationStartValue:0,animationStopValue:1,animationCount:1,animationPauseTime:5,animationBackward:!1,animationStartWithDataset:1,animationStartWithData:1,animationLeftToRight:!1,animationByDataset:!1,defaultStrokeColor:"rgba(220,220,220,1)",defaultFillColor:"rgba(220,220,220,0.5)",defaultLineWidth:2,graphMaximized:!1,contextMenu:!0,mouseDownRight:null,mouseDownLeft:null,mouseDownMiddle:null,mouseMove:null,mouseOut:null,mouseDblClick:null,mouseWheel:null,highLight:!1,highLightMouseFunction:"mousemove",highLightFullLine:!1,highLightRerunEndFunction:!1,savePngName:"canvas",responsive:!1,responsiveMinWidth:0,responsiveMinHeight:0,responsiveMaxWidth:9999999,responsiveMaxHeight:9999999,maintainAspectRatio:!0,forcedAspectRadio:0,responsiveScaleContent:!1,responsiveWindowInitialWidth:!1,markerShape:"circle",barStrokeWidth:2,initFunction:null,beforeDrawFunction:null,endDrawDataFunction:null,endDrawScaleFunction:null},chart.defaults.PolarAreaV1={highLightSet:{color:"red"},inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>"},chart.defaults.PolarAreaV2={highLightSet:{fillColor:"red"},inGraphDataTmpl:"<%=(data.labels.length == 1 ? (v1 == '' ? '' : v1+':') + v3 + ' (' + v6 + ' %)' : (i==0 ? v2 : '') )%>",annotateLabel:"<%=(v2 == '' ? '' : v2) + (v2!='' && v1 !='' ? ' - ' : '')+(v1 == '' ? '' : v1)+(v2!='' || v1 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"},chart.defaults.PolarArea={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,scaleOverlay:!0,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleGridLinesStep:1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleLineStyle:"solid",scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,animation:!0,animationByData:"ByArc",animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,alwaysRunFunctionAtCompletion:!1,startAngle:90,totalAmplitude:360,radiusScale:1},chart.defaults.PieAndDoughnutV1={inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>"},chart.defaults.PieAndDoughnutV2={inGraphDataTmpl:"<%=(data.labels.length == 1 ? (v1 == '' ? '' : v1+':') + v3 + ' (' + v6 + ' %)' : (i==0 ? v2 : '') )%>",annotateLabel:"<%=(v2 == '' ? '' : v2) + (v2!='' && v1 !='' ? ' - ' : '')+(v1 == '' ? '' : v1)+(v2!='' || v1 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"},chart.defaults.PieAndDoughnut={highLightSet:{expandOutRadius:.1,expandInRadius:-.1},inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationByData:!1,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,alwaysRunFunctionAtCompletion:!1,startAngle:90,totalAmplitude:360,radiusScale:1,radiusDataWeight:1,radiusSpaceWeight:.3},chart.defaults.xyAxisCommonOptions={maxBarWidth:-1,drawXScaleLine:[{position:"bottom"}],yAxisMinimumInterval:"none",yAxisMinimumInterval2:"none",yScaleLabelsMinimumWidth:0,xScaleLabelsMinimumWidth:0,yAxisLeft:!0,yAxisRight:!1,xAxisBottom:!0,xAxisTop:!1,xAxisSpaceBetweenLabels:5,fullWidthGraph:!1,yAxisLabel:"",yAxisLabel2:"",yAxisFontFamily:"'Arial'",yAxisFontSize:16,yAxisFontStyle:"normal",yAxisFontColor:"#666",yAxisLabelSpaceRight:5,yAxisLabelSpaceLeft:5,yAxisSpaceRight:5,yAxisSpaceLeft:5,yAxisLabelBorders:!1,yAxisLabelBordersColor:"black",yAxisLabelBordersRadius:0,yAxisLabelBordersXSpace:3,yAxisLabelBordersYSpace:3,yAxisLabelBordersSelection:15,yAxisLabelBordersWidth:1,yAxisLabelBordersStyle:"solid",yAxisLabelBackgroundColor:"none",xAxisLabel:"",xAxisLabel2:"",xTAxisLabel:"",xAxisFontFamily:"'Arial'",xAxisFontSize:16,xAxisFontStyle:"normal",xAxisFontColor:"#666",xAxisLabelSpaceBefore:5,xAxisLabelSpaceAfter:5,xAxisSpaceBefore:5,xAxisSpaceAfter:5,xAxisLabelBorders:!1,xAxisLabelBordersColor:"black",xAxisLabelBordersRadius:0,xAxisLabelBordersXSpace:3,xAxisLabelBordersYSpace:3,xAxisLabelBordersSelection:15,xAxisLabelBordersWidth:1,xAxisLabelBordersStyle:"solid",xAxisLabelBackgroundColor:"none",showXLabels:1,firstLabelToShow:1,showYLabels:1,firstYLabelToShow:1,yAxisUnit:"",yAxisUnit2:"",yAxisUnitFontFamily:"'Arial'",yAxisUnitFontSize:8,yAxisUnitFontStyle:"normal",yAxisUnitFontColor:"#666",yAxisUnitSpaceBefore:5,yAxisUnitSpaceAfter:5,yAxisUnitBorders:!1,yAxisUnitBordersColor:"black",yAxisUnitBordersradius:0,yAxisUnitBordersXSpace:3,yAxisUnitBordersYSpace:3,yAxisUnitBordersSelection:15,yAxisUnitBordersWidth:1,yAxisUnitBordersStyle:"solid",yAxisUnitBackgroundColor:"none",scaleMinorTickWidth:1,scaleMinorTickColor:"rgba(0,0,0,.05)",scaleMinorTickStyle:"solid",scaleMinorTickSizeTop:3,scaleMinorTickSizeBottom:3,scaleMinorTickSizeRight:3,scaleMinorTickSizeLeft:3,scaleMinorTickHorizontalCount:0,scaleMinorTickVerticalCount:0,scaleMinorTickVerticalLines:!0,scaleMinorTickHorizontalLines:!0,tickColor:"gridLine",minorTickColor:"gridLine",xAxisMiddle:!1,yAxisMiddle:!1};var clear=function(e){e.clearRect(0,0,width,height)},MPolarArea=function(e,a,t){function i(i){var l=0,o=c[0][0].firstAngle;1*a.animationStartWithData>1&&1*a.animationStartWithData-1<e.length&&(l=c[a.animationStartWithData-1].startAngle-c[0][0].firstAngle,o=c[a.animationStartWithData-1].startAngle),prevAngle=c[0][0].firstAngle;for(var h=0;h<e.labels.length;h++){var d=1,p=1;a.animation&&(a.animateScale&&(d=i),a.animateRotate&&(p=i));for(var u=0;u<e.datasets.length;u++)if(correctedRotateAnimation=animationCorrection(p,e,a,u,-1,!1).mainVal,"undefined"!=typeof e.datasets[u].data[h]){if(t.beginPath(),"ByArc"==a.animationByData)endAngle=c[u][h].startAngle+correctedRotateAnimation*c[u][h].segmentAngle,t.arc(s,r,d*c[u][h].radiusOffset,c[u][h].startAngle,endAngle,!1);else if(a.animationByData)if(u<1*a.animationStartWithData-1)t.arc(midPieX,midPieY,d*c[u][h].radiusOffset,c[u][h].startAngle,c[u][h].endAngle,!1);else{if(!(c[u][h].startAngle<=o+correctedRotateAnimation*(2*Math.PI-l)))continue;endAngle=c[u][h].endAngle,c[u][h].endAngle>o+correctedRotateAnimation*(2*Math.PI-l)&&(endAngle=o+correctedRotateAnimation*(2*Math.PI-l)),t.arc(midPieX,midPieY,d*c[u][h].radiusOffset,c[u][h].startAngle,endAngle,!1)}else t.arc(midPieX,midPieY,d*c[u][h].radiusOffset,prevAngle,prevAngle+correctedRotateAnimation*(c[u][h].endAngle-c[u][h].startAngle),!1),prevAngle+=correctedRotateAnimation*(c[u][h].endAngle-c[u][h].startAngle);t.lineTo(s,r),t.closePath(),i>=a.animationStopValue&&(t.pieces_drawn.slices++,t.pieces_drawn.total_drawn++),t.fillStyle=setOptionValue(!0,!0,1,"FILLCOLOR",t,e,c,e.datasets[u].fillColor,a.defaultFillColor,"fillColor",u,h,{animationDecimal:i,scaleAnimation:d}),t.fill(),"merge"==a.segmentShowStroke?(t.lineWidth=0,t.strokeStyle=setOptionValue(!0,!0,1,"FILLCOLOR",t,e,c,e.datasets[u].fillColor,a.defaultFillColor,"fillColor",u,h,{animationDecimal:i,scaleAnimation:d}),t.setLineDash([]),t.stroke()):a.segmentShowStroke&&(t.strokeStyle=a.segmentStrokeColor,t.lineWidth=Math.ceil(t.chartLineScale*a.segmentStrokeWidth),t.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"SEGMENTSTROKESTYLE",t,e,c,e.datasets[u].segmentStrokeStyle,a.segmentStrokeStyle,"segmentStrokeStyle",u,h,{animationDecimal:i,scaleAnimation:d}))),t.stroke(),t.setLineDash([]))}}if(i>=a.animationStopValue)for(u=0;u<e.datasets.length;u++)for(h=0;h<e.labels.length;h++)if("undefined"!=typeof e.datasets[u].data[h]&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["MARC",u,h,c,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",t,e,c,e.datasets[u].annotateDisplay,a.annotateDisplay,"annotateDisplay",u,h,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",t,e,c,e.datasets[u].inGraphDataShow,a.inGraphDataShow,"inGraphDataShow",u,h,{nullValue:!0}))){1==setOptionValue(!0,!0,1,"INGRAPHDATAANGLEPOSITION",t,e,c,void 0,a.inGraphDataAnglePosition,"inGraphDataAnglePosition",u,h,{nullValue:!0})?posAngle=c[u][h].realStartAngle+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINANGLE",t,e,c,void 0,a.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",u,h,{nullValue:!0})*(Math.PI/180):2==setOptionValue(!0,!0,1,"INGRAPHDATAANGLEPOSITION",t,e,c,void 0,a.inGraphDataAnglePosition,"inGraphDataAnglePosition",u,h,{nullValue:!0})?posAngle=(2*c[u][h].realStartAngle-c[u][h].segmentAngle)/2+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINANGLE",t,e,c,void 0,a.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",u,h,{nullValue:!0})*(Math.PI/180):3==setOptionValue(!0,!0,1,"INGRAPHDATAANGLEPOSITION",t,e,c,void 0,a.inGraphDataAnglePosition,"inGraphDataAnglePosition",u,h,{nullValue:!0})&&(posAngle=c[u][h].realStartAngle-c[u][h].segmentAngle+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINANGLE",t,e,c,void 0,a.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",u,h,{nullValue:!0})*(Math.PI/180)),1==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",t,e,c,void 0,a.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",u,h,{nullValue:!0})?labelRadius=0+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",t,e,c,void 0,a.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",u,h,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",t,e,c,void 0,a.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",u,h,{nullValue:!0})?labelRadius=c[u][h].radiusOffset/2+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",t,e,c,void 0,a.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",u,h,{nullValue:!0
}):3==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",t,e,c,void 0,a.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",u,h,{nullValue:!0})?labelRadius=c[u][h].radiusOffset+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",t,e,c,void 0,a.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",u,h,{nullValue:!0}):4==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",t,e,c,void 0,a.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",u,h,{nullValue:!0})&&(labelRadius=n*S.nbOfStepsAxis1+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",t,e,c,void 0,a.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",u,h,{nullValue:!0})),t.save(),"off-center"==setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,c,void 0,a.inGraphDataAlign,"inGraphDataAlign",u,h,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,c,void 0,a.inGraphDataRotate,"inGraphDataRotate",u,h,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?t.textAlign="left":t.textAlign="right":"to-center"==setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,c,void 0,a.inGraphDataAlign,"inGraphDataAlign",u,h,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,c,void 0,a.inGraphDataRotate,"inGraphDataRotate",u,h,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?t.textAlign="right":t.textAlign="left":t.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,c,void 0,a.inGraphDataAlign,"inGraphDataAlign",u,h,{nullValue:!0}),"off-center"==setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,c,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",u,h,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="top":t.textBaseline="bottom":"to-center"==setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,c,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",u,h,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="bottom":t.textBaseline="top":t.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,c,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",u,h,{nullValue:!0}),t.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",t,e,c,void 0,a.inGraphDataFontStyle,"inGraphDataFontStyle",u,h,{nullValue:!0})+" "+setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,c,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",u,h,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",t,e,c,void 0,a.inGraphDataFontFamily,"inGraphDataFontFamily",u,h,{nullValue:!0}),t.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",t,e,c,void 0,a.inGraphDataFontColor,"inGraphDataFontColor",u,h,{nullValue:!0});var g=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",t,e,c,void 0,a.inGraphDataTmpl,"inGraphDataTmpl",u,h,{nullValue:!0}),c[u][h],a);t.translate(s+labelRadius*Math.cos(posAngle),r-labelRadius*Math.sin(posAngle));var A=0;A="inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,c,void 0,a.inGraphDataRotate,"inGraphDataRotate",u,h,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,c,void 0,a.inGraphDataRotate,"inGraphDataRotate",u,h,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,c,void 0,a.inGraphDataRotate,"inGraphDataRotate",u,h,{nullValue:!0})*(Math.PI/180),t.rotate(A),setTextBordersAndBackground(t,g,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,c,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",u,h,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",t,e,c,void 0,a.inGraphDataBorders,"inGraphDataBorders",u,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",t,e,c,void 0,a.inGraphDataBordersSelection,"inGraphDataBordersSelection",u,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",t,e,c,void 0,a.inGraphDataBordersColor,"inGraphDataBordersColor",u,h,{nullValue:!0}),setOptionValue(!0,!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,e,c,void 0,a.inGraphDataBordersWidth,"inGraphDataBordersWidth",u,h,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,e,c,void 0,a.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",u,h,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,e,c,void 0,a.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",u,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",t,e,c,void 0,a.inGraphDataBordersStyle,"inGraphDataBordersStyle",u,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,e,c,void 0,a.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",u,h,{nullValue:!0}),"INGRAPHDATA",a.inGraphDataBordersRadius),t.fillTextMultiLine(g,0,0,t.textBaseline,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,c,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",u,h,{nullValue:!0}),!0,a.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",A,s+labelRadius*Math.cos(posAngle),r-labelRadius*Math.sin(posAngle),u,h),t.restore()}}function l(){for(var e=0;e<S.nbOfStepsAxis1;e++)if(a.scaleShowLine&&(e+1)%a.scaleGridLinesStep==0&&(t.beginPath(),t.arc(s,r,n*(e+1),4*Math.PI-p,4*Math.PI-u,!0),t.strokeStyle=a.scaleLineColor,t.lineWidth=Math.ceil(t.chartLineScale*a.scaleLineWidth),t.setLineDash(lineStyleFn(a.scaleLineStyle)),t.stroke(),t.setLineDash([])),a.scaleShowLabels){Math.abs(a.totalAmplitude-360)<a.zeroValue?scaleAngle=Math.PI/2:scaleAngle=(p+u)/2,t.textAlign="center",t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily;var i=S.labels1[e+1];if(a.scaleShowLabelBackdrop){var l=t.measureTextMultiLine(i,Math.ceil(t.chartTextScale*a.scaleFontSize));t.fillStyle=a.scaleBackdropColor,t.beginPath(),t.rect(Math.round(s+Math.cos(scaleAngle)*(n*(e+1))-l/2-Math.ceil(t.chartSpaceScale*a.scaleBackdropPaddingX)),Math.round(r-Math.sin(scaleAngle)*(n*(e+1))-.5*Math.ceil(t.chartTextScale*a.scaleFontSize)-Math.ceil(t.chartSpaceScale*a.scaleBackdropPaddingY)),Math.round(l+2*Math.ceil(t.chartSpaceScale*a.scaleBackdropPaddingX)),Math.round(Math.ceil(t.chartTextScale*a.scaleFontSize)+2*Math.ceil(t.chartSpaceScale*a.scaleBackdropPaddingY))),t.fill()}t.textBaseline="middle",t.fillStyle=a.scaleFontColor,t.fillTextMultiLine(i,s+Math.cos(scaleAngle)*(n*(e+1)),r-Math.sin(scaleAngle)*(n*(e+1)),t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"SCALE_TEXTMOUSE",0,0,0,e,-1)}}var n,o,s,r;if(t.tpchart="PolarArea",t.tpdata=0,init_and_start(t,e,a)){var c=initPassVariableData_part1(e,a,t);init_result(t,e,c);var h=((a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),d=((a.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);d<=a.zeroValue&&(d=2*Math.PI);var p=(h-d+4*Math.PI)%(2*Math.PI),u=p+d,S=computeScale(!1,!1,!1,!1,!1,!1,e,a,t,c,0);S.labels1=[],populateLabels(S.logarithm1,a.fmtYLabel,a,S.labelTemplateString1,S.labels1,S.nbOfStepsAxis1,S.minAxis1,S.maxAxis1,S.stepWidthAxis1),o=setMeasures(e,a,t,t.canvas.height,t.canvas.width,S.labels1,null,!0,!1,!1,!0,"PolarArea");var g=S.minAxis1+S.nbOfStepsAxis1*S.stepWidthAxis1,A=calculatePieDrawingSize(t,o,a,e,c);s=A.midPieX,r=A.midPieY,n=Math.floor(A.radius/S.nbOfStepsAxis1);var f={steps:S.nbOfStepsAxis1,stepValue:S.stepWidthAxis1,graphMin:S.minAxis1,graphMax:S.minAxis1+S.nbOfStepsAxis1*S.stepWidthAxis1,labels:S.labels1};return n>0?(initPassVariableData_part2(c,e,a,t,S.logarithm1,S.logarithm2,{midPosX:s,midPosY:r,int_radius:0,ext_radius:n*S.nbOfStepsAxis1,calculatedScale:f,scaleHop:n,outerVal:g}),animationLoop(a,o.legendMsr,l,i,t,o.clrx,o.clry,o.clrwidth,o.clrheight,s,r,s-(Min([o.availableHeight,o.availableWidth])/2-5),r+(Min([o.availableHeight,o.availableWidth])/2-5),e,c)):(testRedraw(t,e,a),"function"!=typeof a.onAnimationComplete||1!=a.alwaysRunFunctionAtCompletion&&1!=t.runanimationcompletefunction||(a.onAnimationComplete(t,a,e,1,0,c),t.runanimationcompletefunction=!1),t.firstPass=9,close_result(t)),{data:e,config:a,ctx:t}}},PolarArea=function(e,a,t){return"undefined"!=typeof e.length?MPolarArea(convertData(e,a.generateConvertedData),a,t):MPolarArea(e,a,t)},Radar=function(e,a,t){function i(i){var l=2*Math.PI/e.datasets[0].data.length;t.save();for(var n=0;n<e.datasets.length;n++){for(var o=-1,s=0;s<e.datasets[n].data.length;s++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,p,e.datasets[n].displayData,a.displayData,"displayData",n,s,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,p,e.displayData,a.displayData,"displayData",s,-1,{nullvalue:null})){var r=animationCorrection(i,e,a,n,s,!1).animVal;r>1&&(r-=1),"undefined"!=typeof e.datasets[n].data[s]&&(o==-1?(t.beginPath(),t.moveTo(h+r*p[n][s].offsetX,d-r*p[n][s].offsetY),o=s):t.lineTo(h+r*p[n][s].offsetX,d-r*p[n][s].offsetY),i>=a.animationStopValue&&(t.pieces_drawn.points++,t.pieces_drawn.total_drawn++))}if(t.closePath(),a.datasetFill?t.fillStyle=setOptionValue(!0,!0,1,"COLOR",t,e,p,e.datasets[n].fillColor,a.defaultFillColor,"fillColor",n,-1,{animationValue:r,midPosX:p[n][0].midPosX,midPosY:p[n][0].midPosY,ext_radius:(a.animationLeftToRight?1:r)*p[n][0].calculated_offset_max}):t.fillStyle="rgba(0,0,0,0)",t.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",t,e,p,e.datasets[n].strokeColor,a.defaultStrokeColor,"strokeColor",n,-1,{nullvalue:null}),t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,!0,1,"LINEWIDTH",t,e,p,e.datasets[n].datasetStrokeWidth,a.datasetStrokeWidth,"datasetStrokeWidth",n,-1,{nullvalue:null})),t.fill(),t.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",t,e,p,e.datasets[n].datasetStrokeStyle,a.datasetStrokeStyle,"datasetStrokeStyle",n,s,{nullvalue:null}))),t.stroke(),t.setLineDash([]),i>=a.animationStopValue){t.beginPath();for(var c=0;c<e.datasets[n].data.length;c++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,p,e.datasets[n].displayData,a.displayData,"displayData",n,c,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,p,e.displayData,a.displayData,"displayData",c,-1,{nullvalue:null})&&"undefined"!=typeof e.datasets[n].data[c]&&setOptionValue(!0,!0,1,"POINTDOT",t,e,p,void 0,a.pointDot,"pointDot",n,c,{nullvalue:null})){t.beginPath(),t.fillStyle=setOptionValue(!0,!0,1,"MARKERFILLCOLOR",t,e,p,e.datasets[n].pointColor,a.defaultStrokeColor,"pointColor",n,c,{nullvalue:!0}),t.strokeStyle=setOptionValue(!0,!0,1,"MARKERSTROKESTYLE",t,e,p,e.datasets[n].pointStrokeColor,a.defaultStrokeColor,"pointStrokeColor",n,c,{nullvalue:!0}),t.lineWidth=setOptionValue(!0,!0,t.chartLineScale,"MARKERLINEWIDTH",t,e,p,e.datasets[n].pointDotStrokeWidth,a.pointDotStrokeWidth,"pointDotStrokeWidth",n,c,{nullvalue:!0});var u=setOptionValue(!0,!0,1,"MARKERSHAPE",t,e,p,e.datasets[n].markerShape,a.markerShape,"markerShape",n,c,{nullvalue:!0}),S=setOptionValue(!0,!0,t.chartSpaceScale,"MARKERRADIUS",t,e,p,e.datasets[n].pointDotRadius,a.pointDotRadius,"pointDotRadius",n,c,{nullvalue:!0}),g=setOptionValue(!0,!0,1,"MARKERSTROKESTYLE",t,e,p,e.datasets[n].pointDotStrokeStyle,a.pointDotStrokeStyle,"pointDotStrokeStyle",n,c,{nullvalue:!0});drawMarker(t,h+r*p[n][c].offsetX,d-r*p[n][c].offsetY,u,S,g)}}}if(t.restore(),i>=a.animationStopValue)for(n=0;n<e.datasets.length;n++)for(s=0;s<e.datasets[n].data.length;s++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,p,e.datasets[n].displayData,a.displayData,"displayData",n,s,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,p,e.displayData,a.displayData,"displayData",s,-1,{nullvalue:null})&&"undefined"!=typeof e.datasets[n].data[s]&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["POINT",n,s,p,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",t,e,p,e.datasets[n].annotateDisplay,a.annotateDisplay,"annotateDisplay",n,s,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",t,e,p,e.datasets[n].inGraphDataShow,a.inGraphDataShow,"inGraphDataShow",n,s,{nullValue:!0}))){t.save(),t.beginPath(),t.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,p,void 0,a.inGraphDataAlign,"inGraphDataAlign",n,s,{nullValue:!0}),t.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,p,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",n,s,{nullValue:!0}),"off-center"==setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,p,void 0,a.inGraphDataAlign,"inGraphDataAlign",n,s,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,p,void 0,a.inGraphDataRotate,"inGraphDataRotate",n,s,{nullValue:!0})||(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)<=Math.PI/2?t.textAlign="left":t.textAlign="right":"to-center"==setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,p,void 0,a.inGraphDataAlign,"inGraphDataAlign",n,s,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,p,void 0,a.inGraphDataRotate,"inGraphDataRotate",n,s,{nullValue:!0})||(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)<Math.PI/2?t.textAlign="right":t.textAlign="left":t.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,p,void 0,a.inGraphDataAlign,"inGraphDataAlign",n,s,{nullValue:!0}),"off-center"==setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,p,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",n,s,{nullValue:!0})?(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="bottom":t.textBaseline="top":"to-center"==setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,p,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",n,s,{nullValue:!0})?(a.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="top":t.textBaseline="bottom":t.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,p,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",n,s,{nullValue:!0}),t.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",t,e,p,void 0,a.inGraphDataFontStyle,"inGraphDataFontStyle",n,s,{nullValue:!0})+" "+setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,p,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",n,s,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",t,e,p,void 0,a.inGraphDataFontFamily,"inGraphDataFontFamily",n,s,{nullValue:!0}),t.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",t,e,p,void 0,a.inGraphDataFontColor,"inGraphDataFontColor",n,s,{nullValue:!0});var A;1==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",t,e,p,void 0,a.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",n,s,{nullValue:!0})?A=0+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",t,e,p,void 0,a.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",n,s,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",t,e,p,void 0,a.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",n,s,{nullValue:!0})?A=p[n][s].calculated_offset/2+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",t,e,p,void 0,a.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",n,s,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",t,e,p,void 0,a.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",n,s,{nullValue:!0})&&(A=p[n][s].calculated_offset+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",t,e,p,void 0,a.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",n,s,{nullValue:!0}));var f,x;p[n][s].calculated_offset>0?(f=h+p[n][s].offsetX*(A/p[n][s].calculated_offset),x=d-p[n][s].offsetY*(A/p[n][s].calculated_offset)):(f=h,x=d),t.translate(f,x);var m=0;m="inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,p,void 0,a.inGraphDataRotate,"inGraphDataRotate",n,s,{nullValue:!0})?s*l:"inRadiusAxisRotateLabels"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,p,void 0,a.inGraphDataRotate,"inGraphDataRotate",n,s,{nullValue:!0})?(s*l+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(s*l+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI+s*l:2*Math.PI+s*l:setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,p,void 0,a.inGraphDataRotate,"inGraphDataRotate",n,s,{nullValue:!0})*(Math.PI/180),t.rotate(m);var T=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",t,e,p,void 0,a.inGraphDataTmpl,"inGraphDataTmpl",n,s,{nullValue:!0}),p[n][s],a);setTextBordersAndBackground(t,T,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,p,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",n,s,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",t,e,p,void 0,a.inGraphDataBorders,"inGraphDataBorders",n,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",t,e,p,void 0,a.inGraphDataBordersSelection,"inGraphDataBordersSelection",n,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",t,e,p,void 0,a.inGraphDataBordersColor,"inGraphDataBordersColor",n,s,{nullValue:!0}),setOptionValue(!0,!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,e,p,void 0,a.inGraphDataBordersWidth,"inGraphDataBordersWidth",n,s,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,e,p,void 0,a.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",n,s,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,e,p,void 0,a.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",n,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",t,e,p,void 0,a.inGraphDataBordersStyle,"inGraphDataBordersStyle",n,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,e,p,void 0,a.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",n,s,{nullValue:!0}),"INGRAPHDATA",a.inGraphDataBordersRadius),t.fillTextMultiLine(T,0,0,t.textBaseline,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,p,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",n,s,{nullValue:!0}),!0,a.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",m,f,x,n,s),t.restore()}}function l(){var i=2*Math.PI/e.datasets[0].data.length;if(t.save(),t.translate(h,d),t.rotate((90-a.startAngle)*Math.PI/180),a.angleShowLineOut){t.strokeStyle=a.angleLineColor,t.lineWidth=Math.ceil(t.chartLineScale*a.angleLineWidth);for(var l=0;l<e.datasets[0].data.length;l++)t.rotate(i),t.beginPath(),t.moveTo(0,0),t.lineTo(0,-o),t.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"ANGLELINESTYLE",t,e,p,void 0,a.angleLineStyle,"angleLineStyle",l,-1,{nullValue:!0}))),t.stroke(),t.setLineDash([])}for(var n=0;n<u.nbOfStepsAxis1;n++)if(t.beginPath(),a.scaleShowLine&&(n+1)%a.scaleGridLinesStep==0){t.strokeStyle=a.scaleLineColor,t.lineWidth=Math.ceil(t.chartLineScale*a.scaleLineWidth),t.moveTo(0,-s*(n+1));for(var r=0;r<e.datasets[0].data.length;r++)t.rotate(i),t.lineTo(0,-s*(n+1));t.closePath(),t.setLineDash(lineStyleFn(a.scaleLineStyle)),t.stroke(),t.setLineDash([])}if(t.rotate(-(90-a.startAngle)*Math.PI/180),a.scaleShowLabels)for(n=0;n<u.nbOfStepsAxis1;n++){if(t.textAlign="center",t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily,t.textBaseline="middle",a.scaleShowLabelBackdrop){var c=t.measureTextMultiLine(u.labels1[n+1],Math.ceil(t.chartTextScale*a.scaleFontSize)).textWidth;t.fillStyle=a.scaleBackdropColor,t.beginPath(),t.rect(Math.round(Math.cos(a.startAngle*Math.PI/180)*(s*(n+1))-c/2-Math.ceil(t.chartSpaceScale*a.scaleBackdropPaddingX)),Math.round(-Math.sin(a.startAngle*Math.PI/180)*s*(n+1)-.5*Math.ceil(t.chartTextScale*a.scaleFontSize)-Math.ceil(t.chartSpaceScale*a.scaleBackdropPaddingY)),Math.round(c+2*Math.ceil(t.chartSpaceScale*a.scaleBackdropPaddingX)),Math.round(Math.ceil(t.chartTextScale*a.scaleFontSize)+2*Math.ceil(t.chartSpaceScale*a.scaleBackdropPaddingY))),t.fill()}t.fillStyle=a.scaleFontColor,t.fillTextMultiLine(u.labels1[n+1],Math.cos(a.startAngle*Math.PI/180)*(s*(n+1)),-Math.sin(a.startAngle*Math.PI/180)*s*(n+1),t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"SCALE_TEXTMOUSE",0,h,d,n,-1)}for(var S=0;S<e.labels.length;S++){t.font=a.pointLabelFontStyle+" "+Math.ceil(t.chartTextScale*a.pointLabelFontSize).toString()+"px "+a.pointLabelFontFamily,t.fillStyle=a.pointLabelFontColor;for(var g=Math.sin((90-a.startAngle)*Math.PI/180+i*S)*(o+Math.ceil(t.chartTextScale*a.pointLabelFontSize)),A=Math.cos((90-a.startAngle)*Math.PI/180+i*S)*(o+Math.ceil(t.chartTextScale*a.pointLabelFontSize)),f=(90-a.startAngle)*Math.PI/180+i*S;f<0;)f+=2*Math.PI;for(;f>2*Math.PI;)f-=2*Math.PI;f==Math.PI||0==f?t.textAlign="center":f>Math.PI?t.textAlign="right":t.textAlign="left",t.textBaseline="middle",t.fillTextMultiLine(e.labels[S],g,-A,t.textBaseline,Math.ceil(t.chartTextScale*a.pointLabelFontSize),!0,a.detectMouseOnText,t,"LABEL_TEXTMOUSE",0,h,d,S,-1)}t.restore()}function n(){var i,l,n,s,d,p,u,S,g,A,f=2*Math.PI/e.datasets[0].data.length,x=a.startAngle*Math.PI/180;if(t.font=a.pointLabelFontStyle+" "+Math.ceil(t.chartTextScale*a.pointLabelFontSize).toString()+"px "+a.pointLabelFontFamily,a.graphMaximized)for(s=c.availableWidth/2,n=c.availableWidth/2,p=40,g=0;g<e.labels.length;g++)A=t.measureTextMultiLine(e.labels[g],Math.ceil(t.chartTextScale*a.scaleFontSize)).textWidth+t.measureTextMultiLine(e.labels[g],Math.ceil(t.chartTextScale*a.scaleFontSize)).textHeight,l=(c.availableWidth-A)/(1+Math.abs(Math.cos(x))),x<Math.PI/2&&x>-Math.PI/2||x>3*Math.PI/2?l<s&&(s=l):0!=Math.cos(x)&&l<n&&(n=l),x-=f;else s=c.availableWidth/2,n=c.availableWidth/2,p=1;for(u=0,S=0,h=s+c.leftNotUsableWidth,i=s,d=0;d<p;++d,i+=(c.availableWidth-n-s)/p){for(o=Max([i,c.availableWidth-i]),x=a.startAngle*Math.PI/180,l=c.available,g=0;g<e.labels.length;g++)A=t.measureTextMultiLine(e.labels[g],Math.ceil(t.chartTextScale*a.scaleFontSize)).textWidth+t.measureTextMultiLine(e.labels[g],Math.ceil(t.chartTextScale*a.scaleFontSize)).textHeight,x<Math.PI/2&&x>-Math.PI/2||x>3*Math.PI/2?l=(c.availableWidth-i-A)/Math.abs(Math.cos(x)):Math.cos(0!=x)&&(l=(i-A)/Math.abs(Math.cos(x))),l<o&&(o=l),Math.sin(x)*c.availableHeight/2>c.availableHeight/2-2*Math.ceil(t.chartTextScale*a.scaleFontSize)&&(l=Math.sin(x)*c.availableHeight/2-1.5*Math.ceil(t.chartTextScale*a.scaleFontSize),l<o&&(o=l)),x-=f;o>u&&(u=o,h=i+c.leftNotUsableWidth)}o=u-Math.ceil(t.chartTextScale*a.scaleFontSize)/2,r=Default(r,5)}var o,s,r,c,h,d;if(t.tpchart="Radar",t.tpdata=0,init_and_start(t,e,a)){var p=initPassVariableData_part1(e,a,t);init_result(t,e,p),e.labels||(e.labels=[]);var u=computeScale(!1,!1,!1,!1,!1,!1,e,a,t,p,0);u.labels1=[],populateLabels(u.logarithm1,a.fmtYLabel,a,u.labelTemplateString1,u.labels1,u.nbOfStepsAxis1,u.minAxis1,u.maxAxis1,u.stepWidthAxis1);var S={steps:u.nbOfStepsAxis1,stepValue:u.stepWidthAxis1,graphMin:u.minAxis1,graphMax:u.minAxis1+u.nbOfStepsAxis1*u.stepWidthAxis1,labels:u.labels1};return c=setMeasures(e,a,t,t.canvas.height,t.canvas.width,u.labels1,null,!0,!1,!1,a.datasetFill,"Radar"),n(),d=c.topNotUsableHeight+c.availableHeight/2,s=o/u.nbOfStepsAxis1,initPassVariableData_part2(p,e,a,t,u.logarithm1,u.logarithm2,{midPosX:h,midPosY:d,calculatedScale:S,scaleHop:s,maxSize:o,outerVal:-1}),animationLoop(a,c.legendMsr,l,i,t,c.clrx,c.clry,c.clrwidth,c.clrheight,h,d,h-o,d+o,e,p),{data:e,config:a,ctx:t}}},Pie=function(e,a,t){return t.tpchart="Pie","undefined"!=typeof e.length?PieDoughnut(convertData(e,a.generateConvertedData),a,t,"Pie"):PieDoughnut(e,a,t,"Pie")},Doughnut=function(e,a,t){return t.tpchart="Doughnut","undefined"!=typeof e.length?PieDoughnut(convertData(e,a.generateConvertedData),a,t,"Doughnut"):PieDoughnut(e,a,t,"Doughnut")},PieDoughnut=function(e,a,t,i){function l(l){var n,d,p,u,S,g,A,f;S=[],g=[],A=[],f=[];for(var x=0;x<e.datasets.length;x++){var m=1,T=1;for(j=0;j<e.labels.length;j++)if("undefined"==typeof S[j]&&"undefined"!=typeof h[x][j].firstAngle&&(S[j]=h[x][j].firstAngle,g[j]=0,A[j]=h[x][j].firstAngle,f[j]=((-a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),1*a.animationStartWithData>1&&1*a.animationStartWithData-1<e.datasets.length),0!=setOptionValue(!1,!0,1,"DISPLAYDATA",t,e,h,e.datasets[x].displayData,a.displayData,"displayData",x,j,{nullvalue:null})&&0!=setOptionValue(!1,!0,1,"DISPLAYDATA",t,e,h,e.displayData,a.displayData,"displayData",-1,j,{nullvalue:null})&&!("undefined"==typeof e.datasets[x].data[j]||1*e.datasets[x].data[j]<=0)){if(n="Pie"==i?c:c,d=r,p=n+(d-n)*h[x][j].startRadius,u=n+(d-n)*h[x][j].stopRadius,n=p,d=u,("Pie"!=i||j>0)&&(p=n-(d-n)*setOptionValue(!1,!0,1,"EXPANDINRADIUS",t,e,h,e.datasets[x].expandInRadius,0,"expandInRadius",x,j,{animationDecimal:l,scaleAnimation:m})),u=d+(d-n)*setOptionValue(!1,!0,1,"EXPANDOUTRADIUS",t,e,h,e.datasets[x].expandOutRadius,0,"expandOutRadius",x,j,{animationDecimal:l,scaleAnimation:m}),n=p,d=u,a.animation&&(a.animateScale&&(m=l),a.animateRotate&&(T=l)),correctedRotateAnimation=animationCorrection(T,e,a,x,-1,!1).mainVal,t.beginPath(),t.lineWidth=Math.ceil(t.chartLineScale*a.segmentStrokeWidth),t.strokeStyle="rgba(0,0,0,0)","ByArc"==a.animationByData)endAngle=h[x][j].startAngle+correctedRotateAnimation*h[x][j].segmentAngle,t.arc(o,s,m*d,h[x][j].startAngle,endAngle,!1),t.arc(o,s,m*n,endAngle,h[x][j].startAngle,!0);else if(a.animationByData)if(x<0)t.arc(o,s,m*d,h[x][j].startAngle,h[x].endAngle,!1),t.arc(o,s,m*n,h[x][j].endAngle,h[x][j].startAngle,!0);else{if(!(h[x][j].startAngle<=A[j]+correctedRotateAnimation*(2*Math.PI-g[j])))continue;endAngle=h[x][j].endAngle,h[x][j].endAngle>A[j]+correctedRotateAnimation*(2*Math.PI-g[j])&&(endAngle=A[j]+correctedRotateAnimation*(2*Math.PI-g[j])),t.arc(o,s,m*d,h[x][j].startAngle,endAngle,!1),t.arc(o,s,m*n,endAngle,h[x][j].startAngle,!0)}else t.arc(o,s,m*d,S[j],S[j]+correctedRotateAnimation*(h[x][j].endAngle-h[x][j].startAngle),!1),t.arc(o,s,m*n,S[j]+correctedRotateAnimation*(h[x][j].endAngle-h[x][j].startAngle),S[j],!0),S[j]=S[j]+correctedRotateAnimation*(h[x][j].endAngle-h[x][j].startAngle);t.closePath(),t.fillStyle=setOptionValue(!1,!0,1,"FILLCOLOR",t,e,h,e.datasets[x].fillColor,a.defaultFillColor,"fillColor",x,j,{animationDecimal:l,scaleAnimation:m}),t.fill(),l>=a.animationStopValue&&(t.pieces_drawn.slices++,t.pieces_drawn.total_drawn++),"merge"==a.segmentShowStroke?(t.lineWidth=1.5,t.strokeStyle=setOptionValue(!1,!0,1,"FILLCOLOR",t,e,h,e.datasets[x].fillColor,a.defaultFillColor,"fillColor",x,j,{animationDecimal:l,scaleAnimation:m}),t.setLineDash([]),t.stroke()):a.segmentShowStroke&&(t.lineWidth=Math.ceil(t.chartLineScale*a.segmentStrokeWidth),t.strokeStyle=a.segmentStrokeColor,t.setLineDash(lineStyleFn(setOptionValue(!1,!0,1,"SEGMENTSTROKESTYLE",t,e,h,e.datasets[x].segmentStrokeStyle,a.segmentStrokeStyle,"segmentStrokeStyle",x,-1,{animationDecimal:l,scaleAnimation:m}))),t.stroke(),t.setLineDash([]))}}if(l>=a.animationStopValue)for(var x=0;x<e.datasets.length;x++)for(j=0;j<e.labels.length;j++)if(0!=setOptionValue(!1,!0,1,"DISPLAYDATA",t,e,h,e.datasets[x].displayData,a.displayData,"displayData",x,j,{nullvalue:null})&&0!=setOptionValue(!1,!0,1,"DISPLAYDATA",t,e,h,e.displayData,a.displayData,"displayData",-1,j,{nullvalue:null})&&!("undefined"==typeof e.datasets[x].data[j]||1*e.datasets[x].data[j]<=0)&&(n="Pie"==i?c:c-(r-c)*setOptionValue(!1,!0,1,"EXPANDINRADIUS",t,e,h,e.datasets[x].expandInRadius,0,"expandInRadius",x,j,{animationDecimal:l,scaleAnimation:m}),d=r+(r-c)*setOptionValue(!1,!0,1,"EXPANDOUTRADIUS",t,e,h,e.datasets[x].expandOutRadius,0,"expandOutRadius",x,j,{animationDecimal:l,scaleAnimation:m}),p=n+(d-n)*h[x][j].startRadius,u=n+(d-n)*h[x][j].stopRadius,n=p,d=u,jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["MARC",x,j,h,setOptionValue(!1,!0,1,"ANNOTATEDISPLAY",t,e,h,e.datasets[x].annotateDisplay,a.annotateDisplay,"annotateDisplay",x,j,{nullValue:!0})],setOptionValue(!1,!0,1,"INGRAPHDATASHOW",t,e,h,e.datasets[x].inGraphDataShow,a.inGraphDataShow,"inGraphDataShow",x,j,{nullValue:!0})&&h[x][j].segmentAngle>=Math.PI/180*setOptionValue(!1,!0,1,"INGRAPHDATAMINIMUMANGLE",t,e,h,void 0,a.inGraphDataMinimumAngle,"inGraphDataMinimumAngle",x,j,{nullValue:!0}))){1==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",t,e,h,void 0,a.inGraphDataAnglePosition,"inGraphDataAnglePosition",x,j,{nullValue:!0})?posAngle=h[x][j].realStartAngle+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",t,e,h,void 0,a.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",x,j,{nullValue:!0})*(Math.PI/180):2==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",t,e,h,void 0,a.inGraphDataAnglePosition,"inGraphDataAnglePosition",x,j,{nullValue:!0})?posAngle=h[x][j].realStartAngle-h[x][j].segmentAngle/2+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",t,e,h,void 0,a.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",x,j,{nullValue:!0})*(Math.PI/180):3==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",t,e,h,void 0,a.inGraphDataAnglePosition,"inGraphDataAnglePosition",x,j,{nullValue:!0})&&(posAngle=h[x][j].realStartAngle-h[x][j].segmentAngle+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",t,e,h,void 0,a.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",x,j,{nullValue:!0})*(Math.PI/180)),1==setOptionValue(!1,!0,1,"INGRAPHDATARADIUSPOSITION",t,e,h,void 0,a.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",x,j,{nullValue:!0})?labelRadius=n+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINGRADIUS",t,e,h,void 0,a.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",x,j,{nullValue:!0}):2==setOptionValue(!1,!0,1,"INGRAPHDATARADIUSPOSITION",t,e,h,void 0,a.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",x,j,{nullValue:!0})?labelRadius=n+(d-n)/2+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINGRADIUS",t,e,h,void 0,a.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",x,j,{nullValue:!0}):3==setOptionValue(!1,!0,1,"INGRAPHDATARADIUSPOSITION",t,e,h,void 0,a.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",x,j,{nullValue:!0})&&(labelRadius=d+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINGRADIUS",t,e,h,void 0,a.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",x,j,{nullValue:!0})),t.save(),"off-center"==setOptionValue(!1,!0,1,"INGRAPHDATAALIGN",t,e,h,void 0,a.inGraphDataAlign,"inGraphDataAlign",x,j,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",t,e,h,void 0,a.inGraphDataRotate,"inGraphDataRotate",x,j,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?t.textAlign="left":t.textAlign="right":"to-center"==setOptionValue(!1,!0,1,"INGRAPHDATAALIGN",t,e,h,void 0,a.inGraphDataAlign,"inGraphDataAlign",x,j,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",t,e,h,void 0,a.inGraphDataRotate,"inGraphDataRotate",x,j,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?t.textAlign="right":t.textAlign="left":t.textAlign=setOptionValue(!1,!0,1,"INGRAPHDATAALIGN",t,e,h,void 0,a.inGraphDataAlign,"inGraphDataAlign",x,j,{nullValue:!0}),"off-center"==setOptionValue(!1,!0,1,"INGRAPHDATAVALIGN",t,e,h,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",x,j,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="top":t.textBaseline="bottom":"to-center"==setOptionValue(!1,!0,1,"INGRAPHDATAVALIGN",t,e,h,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",x,j,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="bottom":t.textBaseline="top":t.textBaseline=setOptionValue(!1,!0,1,"INGRAPHDATAVALIGN",t,e,h,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",x,j,{nullValue:!0}),t.font=setOptionValue(!1,!0,1,"INGRAPHDATAFONTSTYLE",t,e,h,void 0,a.inGraphDataFontStyle,"inGraphDataFontStyle",x,j,{nullValue:!0})+" "+setOptionValue(!1,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,h,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",x,j,{nullValue:!0})+"px "+setOptionValue(!1,!0,1,"INGRAPHDATAFONTFAMILY",t,e,h,void 0,a.inGraphDataFontFamily,"inGraphDataFontFamily",x,j,{nullValue:!0}),t.fillStyle=setOptionValue(!1,!0,1,"INGRAPHDATAFONTCOLOR",t,e,h,void 0,a.inGraphDataFontColor,"inGraphDataFontColor",x,j,{nullValue:!0});var P=tmplbis(setOptionValue(!1,!0,1,"INGRAPHDATATMPL",t,e,h,void 0,a.inGraphDataTmpl,"inGraphDataTmpl",x,j,{nullValue:!0}),h[x][j],a);t.translate(o+labelRadius*Math.cos(posAngle),s-labelRadius*Math.sin(posAngle));var D=0;D="inRadiusAxis"==setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",t,e,h,void 0,a.inGraphDataRotate,"inGraphDataRotate",x,j,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",t,e,h,void 0,a.inGraphDataRotate,"inGraphDataRotate",x,j,{
nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",t,e,h,void 0,a.inGraphDataRotate,"inGraphDataRotate",x,j,{nullValue:!0})*(Math.PI/180),t.rotate(D),setTextBordersAndBackground(t,P,setOptionValue(!1,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,h,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",x,j,{nullValue:!0}),0,0,setOptionValue(!1,!0,1,"INGRAPHDATABORDERS",t,e,h,void 0,a.inGraphDataBorders,"inGraphDataBorders",x,j,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",t,e,h,void 0,a.inGraphDataBordersSelection,"inGraphDataBordersSelection",x,j,{nullValue:!0}),setOptionValue(!1,!0,1,"INGRAPHDATABORDERSCOLOR",t,e,h,void 0,a.inGraphDataBordersColor,"inGraphDataBordersColor",x,j,{nullValue:!0}),setOptionValue(!1,!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,e,h,void 0,a.inGraphDataBordersWidth,"inGraphDataBordersWidth",x,j,{nullValue:!0}),setOptionValue(!1,!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,e,h,void 0,a.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",x,j,{nullValue:!0}),setOptionValue(!1,!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,e,h,void 0,a.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",x,j,{nullValue:!0}),setOptionValue(!1,!0,1,"INGRAPHDATABORDERSSTYLE",t,e,h,void 0,a.inGraphDataBordersStyle,"inGraphDataBordersStyle",x,j,{nullValue:!0}),setOptionValue(!1,!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,e,h,void 0,a.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",x,j,{nullValue:!0}),"INGRAPHDATA",a.inGraphDataBordersRadius),t.fillTextMultiLine(P,0,0,t.textBaseline,setOptionValue(!1,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,h,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",x,j,{nullValue:!0}),!0,a.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",D,o+labelRadius*Math.cos(posAngle),s-labelRadius*Math.sin(posAngle),x,j),t.restore()}}var n,o,s,r,c;if(t.tpdata=0,init_and_start(t,e,a)){var h=initPassVariableData_part1(e,a,t);init_result(t,e,h);((a.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);n=setMeasures(e,a,t,t.canvas.height,t.canvas.width,"none","none",!0,!1,!1,!0,"Doughnut");var d=calculatePieDrawingSize(t,n,a,e,h);return o=d.midPieX,s=d.midPieY,r=d.radius,c="Pie"==i?0:r*(a.percentageInnerCutout/100),r>0?(initPassVariableData_part2(h,e,a,t,!1,!1,{midPosX:o,midPosY:s,int_radius:c,ext_radius:r,outerVal:-1}),animationLoop(a,n.legendMsr,null,l,t,n.clrx,n.clry,n.clrwidth,n.clrheight,o,s,o-r,s+r,e,h)):(testRedraw(t,e,a),"function"!=typeof a.onAnimationComplete||1!=a.alwaysRunFunctionAtCompletion&&1!=t.runanimationcompletefunction||(a.onAnimationComplete(t,a,e,1,0,h),t.runanimationcompletefunction=!1),t.firstPass=9,close_result(t)),{data:e,config:a,ctx:t}}},Line=function(e,a,t){function i(i){drawLinesDataset(i,e,a,t,A,{xAxisPosY:h,yAxisPosX:c,valueHop:r,nbValueHop:e.labels.length-1}),i>=1&&"function"==typeof drawMath&&drawMath(t,a,e,d,{xAxisPosY:h,yAxisPosX:c,valueHop:r,scaleHop:o,zeroY:p,calculatedScale:x,calculateOffset:calculateOffset,statData:A})}function l(){drawGridScale(t,e,a,d,c,h,p,r,o,f.nbOfStepsAxis1,e.labels.length+0)}function n(){var i,l;if(t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily,a.xAxisTop||a.xAxisBottom){if(t.textBaseline="top",t.fillStyle=a.scaleFontColor,a.xAxisBottom){d.rotateLabels>90?(t.save(),t.textAlign="left"):d.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",i=0,l=0,1==a.xAxisMiddle&&(i=r/2,l=1);for(var n=0;n<e.labels.length-l;n++)showLabels(t,e,a,n)&&(t.save(),d.rotateLabels>0?(t.translate(c+n*r-d.highestXLabel/2+i,d.xLabelPos),t.rotate(-((d.rotateLabels+180*(d.rotateLabels>90))*(Math.PI/180))),t.fillTextMultiLine(fmtChartJS(a,e.labels[n],a.fmtXLabel),0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XSCALE_TEXTMOUSE",-(d.rotateLabels*(Math.PI/180)),c+n*r-d.highestXLabel/2+i,d.xLabelPos,n,-1)):t.fillTextMultiLine(fmtChartJS(a,e.labels[n],a.fmtXLabel),c+n*r+i,d.xLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XSCALE_TEXTMOUSE",0,0,0,n,-1),t.restore())}if(a.xAxisTop){d.rotateTLabels>90?(t.save(),t.textAlign="left"):d.rotateTLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center";var p;p="object"==typeof e.labels2?e.labels2:e.labels,i=0,l=0,1==a.xAxisMiddle&&(i=r/2,l=1);for(var n=0;n<p.length-l;n++)showLabels(t,e,a,n)&&(t.save(),d.rotateTLabels>0?(t.translate(c+n*r-d.highestXLabel/2+i,d.xTLabelPos),t.rotate(-((d.rotateTLabels+180*(d.rotateTLabels>90))*(Math.PI/180))),t.fillTextMultiLine(fmtChartJS(a,p[n],a.fmtXLabel),0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XSCALE_TEXTMOUSE",-(d.rotateTLabels*(Math.PI/180)),c+n*r-d.highestXLabel/2,d.xTLabelPos,n,-1)):t.fillTextMultiLine(fmtChartJS(a,p[n],a.fmtXLabel),c+n*r,d.xTLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XSCALE_TEXTMOUSE",0,0,0,n,-1),t.restore())}}t.textAlign="right",t.textBaseline="middle",i=0,l=0,1==a.yAxisMiddle&&(i=o/2,l=1);for(var u=a.showYAxisMin?-1:0;u<f.nbOfStepsAxis1-l;u++)a.scaleShowLabels&&showYLabels(t,e,a,u+1,f.labels1[u+1])&&(a.yAxisLeft&&(t.textAlign="right",t.fillTextMultiLine(f.labels1[u+1],c-(Math.ceil(t.chartLineScale*a.scaleTickSizeLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),h-(u+1)*o-i,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,u)),!a.yAxisRight||f.dbAxis||a.forceSecondScale||(t.textAlign="left",t.fillTextMultiLine(f.labels1[u+1],c+d.availableWidth+(Math.ceil(t.chartLineScale*a.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),h-(u+1)*o-i,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,u)));if(a.yAxisRight&&(f.dbAxis||a.forceSecondScale))for(u=a.showYAxisMin?-1:0;u<f.nbOfStepsAxis2;u++)a.scaleShowLabels&&(t.textAlign="left",t.fillTextMultiLine(f.labels2[u+1],c+d.availableWidth+(Math.ceil(t.chartLineScale*a.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),h-(u+1)*s,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,u))}var o,s,r,c,h,d,p=0,u=0;if(t.tpchart="Line",t.tpdata=0,init_and_start(t,e,a)){for(var S=0,g=0;g<e.datasets.length;g++)S=Max([S,e.datasets[g].data.length]);if(1==S){for("string"==typeof e.labels[0]&&(e.labels=["",e.labels[0],""]),g=0;g<e.datasets.length;g++)"undefined"!=e.datasets[g].data[0],e.datasets[g].data=[void 0,e.datasets[g].data[0],void 0];S=3}var A=initPassVariableData_part1(e,a,t);for(init_result(t,e,A),g=0;g<e.datasets.length;g++)A[g][0].tpchart="Line";d=setMeasures(e,a,t,t.canvas.height,t.canvas.width,"nihil","nihil",!1,!1,!0,a.datasetFill,"Line");var f=computeScale(!0,!0,!1,!0,!0,!1,e,a,t,A,d.availableHeight);if(f.labels1=[],f.labels2=[],populateLabels(f.logarithm1,a.fmtYLabel,a,f.labelTemplateString1,f.labels1,f.nbOfStepsAxis1,f.minAxis1,f.maxAxis1,f.stepWidthAxis1),populateLabels(f.logarithm2,a.fmtYLabel2,a,f.labelTemplateString2,f.labels2,f.nbOfStepsAxis2,f.minAxis2,f.maxAxis2,f.stepWidthAxis2),f.maxSteps>0&&f.minSteps>0){var x={steps:f.nbOfStepsAxis1,stepValue:f.stepWidthAxis1,graphMin:f.minAxis1,graphMax:f.minAxis1+f.nbOfStepsAxis1*f.stepWidthAxis1,labels:f.labels1},m={steps:f.nbOfStepsAxis2,stepValue:f.stepWidthAxis2,graphMin:f.minAxis2,graphMax:f.minAxis2+f.nbOfStepsAxis2*f.stepWidthAxis2,labels:f.labels2};d=setMeasures(e,a,t,t.canvas.height,t.canvas.width,f.labels1,f.labels2,!1,!1,!0,a.datasetFill,"Line");d.availableHeight;d.availableHeight=d.availableHeight-Math.ceil(t.chartLineScale*Math.max(a.scaleTickSizeBottom,a.scaleMinorTickSizeBottom*(a.scaleMinorTickHorizontalCount>0)))-Math.ceil(t.chartLineScale*Math.max(a.scaleTickSizeTop,a.scaleMinorTickSizeTop*(a.scaleMinorTickHorizontalCount>0))),d.availableWidth=d.availableWidth-Math.ceil(t.chartLineScale*Math.max(a.scaleTickSizeLeft,a.scaleMinorTickSizeLeft*(a.scaleMinorTickVerticalCount>0)))-Math.ceil(t.chartLineScale*Math.max(a.scaleTickSizeRight,a.scaleMinorTickSizeRight*(a.scaleMinorTickVerticalCount>0))),o=Math.floor(d.availableHeight/f.nbOfStepsAxis1),s=Math.floor(d.availableHeight/f.nbOfStepsAxis2),r=Math.floor(d.availableWidth/(e.labels.length-1)),(0==r||a.fullWidthGraph)&&(r=d.availableWidth/(e.labels.length-1)),d.clrwidth=d.clrwidth-(d.availableWidth-(e.labels.length-1)*r),d.topNotUsableHeight+=d.availableHeight-f.nbOfStepsAxis1*o,d.rightNotUsableWidth+=d.availableWidth-(e.labels.length-1)*r,d.availableWidth=(e.labels.length-1)*r,d.availableHeight=f.nbOfStepsAxis1*o,c=d.leftNotUsableWidth+Math.ceil(t.chartLineScale*Math.max(a.scaleTickSizeLeft,a.scaleMinorTickSizeLeft*(a.scaleMinorTickVerticalCount>0))),h=d.topNotUsableHeight+d.availableHeight+Math.ceil(t.chartLineScale*Math.max(a.scaleTickSizeTop,a.scaleMinorTickSizeTop*(a.scaleMinorTickHorizontalCount>0))),n(),p=calculateOffset(f.logarithm1,0,x,o),u=calculateOffset(f.logarithm2,0,m,s),initPassVariableData_part2(A,e,a,t,f.logarithm1,f.logarithm2,{xAxisPosY:h,yAxisPosX:c,valueHop:r,nbValueHop:e.labels.length-1,scaleHop:o,zeroY:p,calculatedScale:x,logarithmic:f.logarithm1,scaleHop2:s,zeroY2:u,msr:d,calculatedScale2:m,logarithmic2:f.logarithm12}),animationLoop(a,d.legendMsr,l,i,t,d.clrx,d.clry,d.clrwidth,d.clrheight,c+d.availableWidth/2,h-d.availableHeight/2,c,h,e,A)}else testRedraw(t,e,a),"function"!=typeof a.onAnimationComplete||1!=a.alwaysRunFunctionAtCompletion&&1!=t.runanimationcompletefunction||(a.onAnimationComplete(t,a,e,1,0,A),t.runanimationcompletefunction=!1),t.firstPass=9,close_result(t);return{data:e,config:a,ctx:t}}},StackedBar=function(e,a,t){function i(i){for(var l=new Array,n=new Array,o=0;o<e.datasets.length;o++)if("Line"!=e.datasets[o].type)for(var s=0;s<e.datasets[o].data.length;s++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.displayData,a.displayData,"displayData",s,-1,{nullvalue:null})){var S=animationCorrection(i,e,a,o,s,!1).animVal;if(S>1&&(S-=1),"undefined"!=typeof e.datasets[o].data[s]&&1*e.datasets[o].data[s]!=0&&!(Math.abs(e.datasets[o].data[s])<a.zeroValue&&0==a.showZeroValue)){"undefined"==typeof l[s]&&(l[s]=u[u[o][s].firstNotMissing][s].yPosBottom,n[s]=u[u[o][s].firstNotMissing][s].yPosBottom);var g,A;g=1*e.datasets[o].data[s]>0?l[s]:n[s],A=g+S*(u[o][s].yPosTop-u[o][s].yPosBottom),1*e.datasets[o].data[s]>0?l[s]=A:n[s]=A,0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.datasets[o].displayData,a.displayData,"displayData",o,s,{nullvalue:null})&&(t.save(),t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",t,e,u,e.datasets[o].barStrokeWidth,a.barStrokeWidth,"barStrokeWidth",o,s,{animationValue:S,xPosLeft:u[o][s].xPosLeft,yPosBottom:g,xPosRight:u[o][s].xPosRight,yPosTop:A})),t.fillStyle=setOptionValue(!0,!0,1,"COLOR",t,e,u,e.datasets[o].fillColor,a.defaultFillColor,"fillColor",o,s,{animationValue:S,xPosLeft:u[o][s].xPosLeft,yPosBottom:g,xPosRight:u[o][s].xPosRight,yPosTop:A}),t.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",t,e,u,e.datasets[o].strokeColor,a.defaultStrokeColor,"strokeColor",o,s,{nullvalue:null}),0!=S&&g!=A&&(t.beginPath(),t.moveTo(u[o][s].xPosLeft,g+(A-g)/2),t.lineTo(u[o][s].xPosLeft,A),t.lineTo(u[o][s].xPosRight,A),t.lineTo(u[o][s].xPosRight,g),t.lineTo(u[o][s].xPosLeft,g),t.lineTo(u[o][s].xPosLeft,g+(A-g)/2),a.barShowStroke&&(t.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"STROKESTYLE",t,e,u,e.datasets[o].datasetStrokeStyle,a.datasetStrokeStyle,"datasetStrokeStyle",o,s,{nullvalue:null}))),t.stroke(),t.setLineDash([])),t.closePath(),t.fill()),i>=a.animationStopValue&&(t.pieces_drawn.rectangles++,t.pieces_drawn.total_drawn++),t.restore())}}if(drawLinesDataset(i,e,a,t,u,{xAxisPosY:h,yAxisPosX:c,valueHop:r,nbValueHop:e.labels.length}),i>=a.animationStopValue){var f=0,x=0;for(o=0;o<e.datasets.length;o++)for(s=0;s<e.datasets[o].data.length;s++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.datasets[o].displayData,a.displayData,"displayData",o,s,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.displayData,a.displayData,"displayData",s,-1,{nullvalue:null})&&"undefined"!=typeof e.datasets[o].data[s]&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["RECT",o,s,u,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",t,e,u,e.datasets[o].annotateDisplay,a.annotateDisplay,"annotateDisplay",o,s,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",t,e,u,e.datasets[o].inGraphDataShow,a.inGraphDataShow,"inGraphDataShow",o,s,{nullValue:!0}))){t.save(),t.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,u,void 0,a.inGraphDataAlign,"inGraphDataAlign",o,s,{nullValue:!0}),t.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,u,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",o,s,{nullValue:!0}),t.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",t,e,u,void 0,a.inGraphDataFontStyle,"inGraphDataFontStyle",o,s,{nullValue:!0})+" "+setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,u,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",t,e,u,void 0,a.inGraphDataFontFamily,"inGraphDataFontFamily",o,s,{nullValue:!0}),t.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",t,e,u,void 0,a.inGraphDataFontColor,"inGraphDataFontColor",o,s,{nullValue:!0});var m=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",t,e,u,void 0,a.inGraphDataTmpl,"inGraphDataTmpl",o,s,{nullValue:!0}),u[o][s],a);if(t.beginPath(),t.beginPath(),f=0,x=0,1==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,u,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})?x=u[o][s].xPosLeft+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,u,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,u,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})?x=u[o][s].xPosLeft+d/2+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,u,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,u,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})&&(x=u[o][s].xPosLeft+d+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,u,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0})),1==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,u,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})?f=u[o][s].yPosBottom-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,u,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,u,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})?f=(u[o][s].yPosTop+u[o][s].yPosBottom)/2-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,u,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,u,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})&&(f=u[o][s].yPosTop-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,u,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0})),f>p.topNotUsableHeight){t.translate(x,f);var T=setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,u,void 0,a.inGraphDataRotate,"inGraphDataRotate",o,s,{nullValue:!0})*(Math.PI/180);t.rotate(T),setTextBordersAndBackground(t,m,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,u,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",t,e,u,void 0,a.inGraphDataBorders,"inGraphDataBorders",o,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",t,e,u,void 0,a.inGraphDataBordersSelection,"inGraphDataBordersSelection",o,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",t,e,u,void 0,a.inGraphDataBordersColor,"inGraphDataBordersColor",o,s,{nullValue:!0}),setOptionValue(!0,!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,e,u,void 0,a.inGraphDataBordersWidth,"inGraphDataBordersWidth",o,s,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,e,u,void 0,a.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",o,s,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,e,u,void 0,a.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",o,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",t,e,u,void 0,a.inGraphDataBordersStyle,"inGraphDataBordersStyle",o,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,e,u,void 0,a.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",o,s,{nullValue:!0}),"INGRAPHDATA",a.inGraphDataBordersRadius),t.fillTextMultiLine(m,0,0,t.textBaseline,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,u,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0}),!0,a.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",T,x,f,o,s)}t.restore()}}}function l(){drawGridScale(t,e,a,p,c,h,T,r,o,A.nbOfStepsAxis1,e.labels.length+1)}function n(){if(t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily,a.xAxisTop||a.xAxisBottom){if(t.textBaseline="top",t.fillStyle=a.scaleFontColor,a.xAxisBottom){p.rotateLabels>90?(t.save(),t.textAlign="left"):p.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center";for(var i=0;i<e.labels.length;i++)showLabels(t,e,a,i)&&(t.save(),p.rotateLabels>0?(t.translate(c+Math.ceil(t.chartSpaceScale*a.barValueSpacing)+i*r+m+d/2-p.highestXLabel/2,p.xLabelPos),t.rotate(-((p.rotateLabels+180*(p.rotateLabels>90))*(Math.PI/180))),t.fillTextMultiLine(fmtChartJS(a,e.labels[i],a.fmtXLabel),0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(p.rotateLabels*(Math.PI/180)),c+Math.ceil(t.chartSpaceScale*a.barValueSpacing)+i*r+m+d/2-p.highestXLabel/2,p.xLabelPos,i,-1)):t.fillTextMultiLine(fmtChartJS(a,e.labels[i],a.fmtXLabel),c+Math.ceil(t.chartSpaceScale*a.barValueSpacing)+i*r+m+d/2,p.xLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,i,-1),t.restore())}if(a.xAxisTop){p.rotateTLabels>90?(t.save(),t.textAlign="left"):p.rotateTLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center";var l;l="object"==typeof e.labels2?e.labels2:e.labels;for(var i=0;i<l.length;i++)showLabels(t,e,a,i)&&(t.save(),p.rotateTLabels>0?(t.translate(c+Math.ceil(t.chartSpaceScale*a.barValueSpacing)+i*r+m+d/2-p.highestTXLabel/2,p.xTLabelPos),t.rotate(-((p.rotateTLabels+180*(p.rotateTLabels>90))*(Math.PI/180))),t.fillTextMultiLine(fmtChartJS(a,l[i],a.fmtXLabel),0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(p.rotateLabels*(Math.PI/180)),c+Math.ceil(t.chartSpaceScale*a.barValueSpacing)+i*r+m+d/2-p.highestXLabel/2,p.xLabelPos,i,-1)):t.fillTextMultiLine(fmtChartJS(a,l[i],a.fmtXLabel),c+Math.ceil(t.chartSpaceScale*a.barValueSpacing)+i*r+m+d/2,p.xTLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,i,-1),t.restore())}}t.textAlign="right",t.textBaseline="middle",subloop=0,decal=0,1==a.yAxisMiddle&&(decal=o/2,subloop=1);for(var n=a.showYAxisMin?-1:0;n<A.nbOfStepsAxis1-subloop;n++)a.scaleShowLabels&&showYLabels(t,e,a,n+1,A.labels1[n+1])&&(a.yAxisLeft&&(t.textAlign="right",t.fillTextMultiLine(A.labels1[n+1],c-(Math.ceil(t.chartLineScale*a.scaleTickSizeLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),h-(n+1)*o-decal,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,n)),!a.yAxisRight||A.dbAxis||a.forceSecondScale||(t.textAlign="left",t.fillTextMultiLine(A.labels1[n+1],c+p.availableWidth+(Math.ceil(t.chartLineScale*a.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),h-(n+1)*o-decal,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,n)));if(a.yAxisRight&&(A.dbAxis||a.forceSecondScale))for(subloop=0,decal=0,1==a.yAxisMiddle&&(decal=r/2,subloop=1),n=a.showYAxisMin?-1:0;n<A.nbOfStepsAxis2-subloop;n++)a.scaleShowLabels&&(t.textAlign="left",t.fillTextMultiLine(A.labels2[n+1],c+p.availableWidth+(Math.ceil(t.chartLineScale*a.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),h-(n+1)*s-decal,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,n))}var o,s,r,c,h,d,p;if(t.tpchart="StackedBar",t.tpdata=0,init_and_start(t,e,a)){var u=initPassVariableData_part1(e,a,t);init_result(t,e,u);for(var S=e.datasets.length,g=0;g<e.datasets.length;g++)"Line"==e.datasets[g].type?(u[g][0].tpchart="Line",S--):u[g][0].tpchart="Bar";p=setMeasures(e,a,t,t.canvas.height,t.canvas.width,"nihil","nihil",!0,!1,!0,!0,"StackedBar");var A=computeScale(!1,!0,!0,!1,!0,!0,e,a,t,u,p.availableHeight);if(A.labels1=[],A.labels2=[],populateLabels(A.logarithm1,a.fmtYLabel,a,A.labelTemplateString1,A.labels1,A.nbOfStepsAxis1,A.minAxis1,A.maxAxis1,A.stepWidthAxis1),populateLabels(A.logarithm2,a.fmtYLabel2,a,A.labelTemplateString2,A.labels2,A.nbOfStepsAxis2,A.minAxis2,A.maxAxis2,A.stepWidthAxis2),A.maxSteps>0&&A.minSteps>0){var f={steps:A.nbOfStepsAxis1,stepValue:A.stepWidthAxis1,graphMin:A.minAxis1,graphMax:A.minAxis1+A.nbOfStepsAxis1*A.stepWidthAxis1,labels:A.labels1},x={steps:A.nbOfStepsAxis2,stepValue:A.stepWidthAxis2,graphMin:A.minAxis2,graphMax:A.minAxis2+A.nbOfStepsAxis2*A.stepWidthAxis2,labels:A.labels2};p=setMeasures(e,a,t,t.canvas.height,t.canvas.width,A.labels1,A.labels2,!0,!1,!0,!0,"StackedBar");p.availableHeight;p.availableHeight=p.availableHeight-Math.ceil(t.chartLineScale*a.scaleTickSizeBottom)-Math.ceil(t.chartLineScale*a.scaleTickSizeTop),p.availableWidth=p.availableWidth-Math.ceil(t.chartLineScale*a.scaleTickSizeLeft)-Math.ceil(t.chartLineScale*a.scaleTickSizeRight),o=Math.floor(p.availableHeight/A.nbOfStepsAxis1),s=Math.floor(p.availableHeight/A.nbOfStepsAxis2),r=Math.floor(p.availableWidth/e.labels.length),(0==r||a.fullWidthGraph)&&(r=p.availableWidth/e.labels.length),p.topNotUsableHeight+=p.availableHeight-A.nbOfStepsAxis1*o,p.rightNotUsableWidth+=p.availableWidth-e.labels.length*r,p.clrwidth=p.clrwidth-(p.availableWidth-e.labels.length*r),p.availableWidth=e.labels.length*r,p.availableHeight=A.nbOfStepsAxis1*o,c=p.leftNotUsableWidth+Math.ceil(t.chartLineScale*a.scaleTickSizeLeft),h=p.topNotUsableHeight+p.availableHeight+Math.ceil(t.chartLineScale*a.scaleTickSizeTop),d=r-2*Math.ceil(t.chartLineScale*a.scaleGridLineWidth)-2*Math.ceil(t.chartSpaceScale*a.barValueSpacing)-(1*Math.ceil(t.chartSpaceScale*a.barDatasetSpacing)-1)-Math.ceil(t.chartLineScale*a.barStrokeWidth)/2-1,d>=0&&d<=1&&(d=1),d<0&&d>=-1&&(d=-1);var m;1*a.maxBarWidth>0&&d>1*a.maxBarWidth?(m=(d-1*a.maxBarWidth)/2,d=1*a.maxBarWidth):m=0;var T=0,P=0;T=calculateOffset(A.logarithm1,0,f,o),P=calculateOffset(A.logarithm2,0,x,s),n(),initPassVariableData_part2(u,e,a,t,A.logarithm1,A.logarithm2,{msr:p,zeroY:T,zeroY2:P,logarithmic:!1,logarithmic2:!1,calculatedScale:f,calculatedScale2:x,additionalSpaceBetweenBars:m,scaleHop:o,scaleHop2:s,valueHop:r,yAxisPosX:c,xAxisPosY:h,barWidth:d}),animationLoop(a,p.legendMsr,l,i,t,p.clrx,p.clry,p.clrwidth,p.clrheight,c+p.availableWidth/2,h-p.availableHeight/2,c,h,e,u)}else testRedraw(t,e,a),"function"!=typeof a.onAnimationComplete||1!=a.alwaysRunFunctionAtCompletion&&1!=t.runanimationcompletefunction||(a.onAnimationComplete(t,a,e,1,0,u),t.runanimationcompletefunction=!1),t.firstPass=9,close_result(t);return{data:e,config:a,ctx:t}}},HorizontalStackedBar=function(e,a,t){function i(e,a,t){var i=S.nbOfStepsAxis1*S.stepWidthAxis1,l=e-S.minAxis1,n=CapValue(l/i,1,0);return t*S.nbOfStepsAxis1*n}function l(i){for(var l=new Array,n=new Array,o=0;o<e.datasets.length;o++)for(var s=0;s<e.datasets[o].data.length;s++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.displayData,a.displayData,"displayData",s,-1,{nullvalue:null})){t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",t,e,u,e.datasets[o].barStrokeWidth,a.barStrokeWidth,"barStrokeWidth",o,s,{animationValue:r,xPosLeft:c,yPosBottom:u[o][s].yPosBottom,xPosRight:h,yPosTop:u[o][s].yPosBottom}));var r=animationCorrection(i,e,a,o,s,!1).animVal;if(r>1&&(r-=1),"undefined"!=typeof e.datasets[o].data[s]&&1*e.datasets[o].data[s]!=0&&!(Math.abs(e.datasets[o].data[s])<a.zeroValue&&0==a.showZeroValue)){"undefined"==typeof l[s]&&(l[s]=u[u[o][s].firstNotMissing][s].xPosLeft,n[s]=u[u[o][s].firstNotMissing][s].xPosLeft);var c,h;c=1*e.datasets[o].data[s]>0?l[s]:n[s],h=c+r*(u[o][s].xPosRight-u[o][s].xPosLeft),1*e.datasets[o].data[s]>0?l[s]=h:n[s]=h,0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.datasets[o].displayData,a.displayData,"displayData",o,s,{nullvalue:null})&&(t.fillStyle=setOptionValue(!0,!0,1,"COLOR",t,e,u,e.datasets[o].fillColor,a.defaultFillColor,"fillColor",o,s,{animationValue:r,xPosLeft:c,yPosBottom:u[o][s].yPosBottom,xPosRight:h,yPosTop:u[o][s].yPosBottom}),t.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",t,e,u,e.datasets[o].strokeColor,a.defaultStrokeColor,"strokeColor",o,s,{nullvalue:null}),0!=r&&u[o][s].xPosLeft!=u[o][s].xPosRight&&(t.beginPath(),t.moveTo(c+(h-c)/2,u[o][s].yPosTop),t.lineTo(h,u[o][s].yPosTop),t.lineTo(h,u[o][s].yPosBottom),t.lineTo(c,u[o][s].yPosBottom),t.lineTo(c,u[o][s].yPosTop),t.lineTo(c+(h-c)/2,u[o][s].yPosTop),a.barShowStroke&&(t.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"STROKESTYLE",t,e,u,e.datasets[o].datasetStrokeStyle,a.datasetStrokeStyle,"datasetStrokeStyle",o,s,{nullvalue:null}))),t.stroke(),t.setLineDash([])),t.closePath(),t.fill()),i>=a.animationStopValue&&(t.pieces_drawn.rectangles++,t.pieces_drawn.total_drawn++))}}if(i>=a.animationStopValue){var p=0,S=0;for(o=0;o<e.datasets.length;o++)for(s=0;s<e.datasets[o].data.length;s++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.datasets[o].displayData,a.displayData,"displayData",o,s,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.displayData,a.displayData,"displayData",s,-1,{nullvalue:null})&&"undefined"!=typeof e.datasets[o].data[s]&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["RECT",o,s,u,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",t,e,u,e.datasets[o].annotateDisplay,a.annotateDisplay,"annotateDisplay",o,s,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",t,e,u,e.datasets[o].inGraphDataShow,a.inGraphDataShow,"inGraphDataShow",o,s,{nullValue:!0}))){t.save(),t.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,u,void 0,a.inGraphDataAlign,"inGraphDataAlign",o,s,{nullValue:!0}),t.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,u,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",o,s,{nullValue:!0}),t.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",t,e,u,void 0,a.inGraphDataFontStyle,"inGraphDataFontStyle",o,s,{nullValue:!0})+" "+setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,u,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",t,e,u,void 0,a.inGraphDataFontFamily,"inGraphDataFontFamily",o,s,{nullValue:!0}),t.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",t,e,u,void 0,a.inGraphDataFontColor,"inGraphDataFontColor",o,s,{nullValue:!0});var g=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",t,e,u,void 0,a.inGraphDataTmpl,"inGraphDataTmpl",o,s,{nullValue:!0}),u[o][s],a);t.beginPath(),p=0,S=0,1==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,u,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})?S=u[o][s].xPosLeft+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,u,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,u,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})?S=u[o][s].xPosLeft+(u[o][s].xPosRight-u[o][s].xPosLeft)/2+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,u,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,u,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})&&(S=u[o][s].xPosRight+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,u,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0})),1==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,u,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})?p=u[o][s].yPosBottom-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,u,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,u,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})?p=u[o][s].yPosBottom-d/2-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,u,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,u,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})&&(p=u[o][s].yPosTop-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,u,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0})),t.translate(S,p),rotateVal=setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,u,void 0,a.inGraphDataRotate,"inGraphDataRotate",o,s,{nullValue:!0})*(Math.PI/180),t.rotate(rotateVal),setTextBordersAndBackground(t,g,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,u,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",t,e,u,void 0,a.inGraphDataBorders,"inGraphDataBorders",o,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",t,e,u,void 0,a.inGraphDataBordersSelection,"inGraphDataBordersSelection",o,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",t,e,u,void 0,a.inGraphDataBordersColor,"inGraphDataBordersColor",o,s,{nullValue:!0}),setOptionValue(!0,!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,e,u,void 0,a.inGraphDataBordersWidth,"inGraphDataBordersWidth",o,s,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,e,u,void 0,a.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",o,s,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,e,u,void 0,a.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",o,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",t,e,u,void 0,a.inGraphDataBordersStyle,"inGraphDataBordersStyle",o,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,e,u,void 0,a.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",o,s,{nullValue:!0}),"INGRAPHDATA",a.inGraphDataBordersRadius),t.fillTextMultiLine(g,0,0,t.textBaseline,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,u,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0}),!0,a.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",rotateVal,S,p,o,s),t.restore()}}}function n(){drawGridScale(t,e,a,p,c,h,f,r,s,e.labels.length+0,S.nbOfStepsAxis1+1)}function o(){if(t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily,a.scaleShowLabels&&(a.xAxisTop||a.xAxisBottom)){if(t.textBaseline="top",t.fillStyle=a.scaleFontColor,a.xAxisBottom){p.rotateLabels>90?(t.save(),t.textAlign="left"):p.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",subloop=0,decal=0,1==a.yAxisMiddle&&(decal=r/2,subloop=1);for(var i=a.showYAxisMin?-1:0;i<S.nbOfStepsAxis1-subloop;i++)showYLabels(t,e,a,i+1,S.labels1[i+1])&&(t.save(),p.rotateLabels>0?(t.translate(c+(i+1)*r-p.highestXLabel/2+decal,p.xLabelPos),t.rotate(-((p.rotateLabels+180*(p.rotateLabels>90))*(Math.PI/180))),t.fillTextMultiLine(S.labels1[i+1],0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(p.rotateLabels*(Math.PI/180)),c+(i+1)*r-p.highestXLabel/2,p.xLabelPos,i,-1)):t.fillTextMultiLine(S.labels1[i+1],c+(i+1)*r+decal,p.xLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,i,-1),
t.restore())}if(a.xAxisTop){p.rotateTLabels>90?(t.save(),t.textAlign="left"):p.rotateTLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",subloop=0,decal=0,1==a.yAxisMiddle&&(decal=r/2,subloop=1);for(var i=a.showYAxisMin?-1:0;i<S.nbOfStepsAxis1-subloop;i++)showYLabels(t,e,a,i+1,S.labels1[i+1])&&(t.save(),p.rotateTLabels>0?(t.translate(c+(i+1)*r-p.highestTXLabel/2+decal,p.xTLabelPos),t.rotate(-((p.rotateTLabels+180*(p.rotateTLabels>90))*(Math.PI/180))),t.fillTextMultiLine(S.labels1[i+1],0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(p.rotateLabels*(Math.PI/180)),c+(i+1)*r-p.highestXLabel/2,p.xLabelPos,i,-1)):t.fillTextMultiLine(S.labels1[i+1],c+(i+1)*r+decal,p.xTLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,i,-1),t.restore())}}for(var l=0;l<e.labels.length;l++)showLabels(t,e,a,l)&&(a.yAxisLeft&&(t.textAlign="right",t.textBaseline="middle",t.fillTextMultiLine(fmtChartJS(a,e.labels[l],a.fmtXLabel),c-(Math.ceil(t.chartLineScale*a.scaleTickSizeLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),h+Math.ceil(t.chartSpaceScale*a.barValueSpacing)-s*(l+1)+A+d/2,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,l)),a.yAxisRight&&(t.textAlign="left",t.textBaseline="middle",t.fillTextMultiLine(fmtChartJS(a,e.labels[l],a.fmtXLabel),c+p.availableWidth+(Math.ceil(t.chartLineScale*a.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),h+Math.ceil(t.chartSpaceScale*a.barValueSpacing)-s*(l+1)+A+d/2,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,l)))}var s,r,c,h,d,p;if(a.reverseOrder&&"undefined"==typeof t.reversed&&(t.reversed=!0,e=reverseData(e)),t.tpchart="HorizontalStackedBar",t.tpdata=0,init_and_start(t,e,a)){var u=initPassVariableData_part1(e,a,t);init_result(t,e,u),p=setMeasures(e,a,t,t.canvas.height,t.canvas.width,"nihil","nihil",!0,!0,!0,!0,"HorizontalStackedBar");var S=computeScale(!1,!0,!1,!1,!0,!0,e,a,t,u,p.availableHeight);if(S.labels1=[],S.labels2=[],populateLabels(S.logarithm1,a.fmtYLabel,a,S.labelTemplateString1,S.labels1,S.nbOfStepsAxis1,S.minAxis1,S.maxAxis1,S.stepWidthAxis1),populateLabels(S.logarithm2,a.fmtYLabel2,a,S.labelTemplateString2,S.labels2,S.nbOfStepsAxis2,S.minAxis2,S.maxAxis2,S.stepWidthAxis2),S.maxSteps>0&&S.minSteps>0){var g={steps:S.nbOfStepsAxis1,stepValue:S.stepWidthAxis1,graphMin:S.minAxis1,graphMax:S.minAxis1+S.nbOfStepsAxis1*S.stepWidthAxis1,labels:S.labels1};p=setMeasures(e,a,t,t.canvas.height,t.canvas.width,S.labels1,S.labels2,!0,!0,!0,!0,"HorizontalStackedBar"),p.availableHeight=p.availableHeight-Math.ceil(t.chartLineScale*a.scaleTickSizeBottom)-Math.ceil(t.chartLineScale*a.scaleTickSizeTop),p.availableWidth=p.availableWidth-Math.ceil(t.chartLineScale*a.scaleTickSizeLeft)-Math.ceil(t.chartLineScale*a.scaleTickSizeRight),s=Math.floor(p.availableHeight/e.labels.length),r=Math.floor(p.availableWidth/S.nbOfStepsAxis1),(0==r||a.fullWidthGraph)&&(r=p.availableWidth/S.nbOfStepsAxis1),p.clrwidth=p.clrwidth-(p.availableWidth-S.nbOfStepsAxis1*r),p.topNotUsableHeight+=p.availableHeight-e.labels.length*s,p.rightNotUsableWidth+=p.availableWidth-S.nbOfStepsAxis1*r,p.availableWidth=S.nbOfStepsAxis1*r,p.availableHeight=e.labels.length*s,c=p.leftNotUsableWidth+Math.ceil(t.chartLineScale*a.scaleTickSizeLeft),h=p.topNotUsableHeight+p.availableHeight+Math.ceil(t.chartLineScale*a.scaleTickSizeTop),d=s-2*Math.ceil(t.chartLineScale*a.scaleGridLineWidth)-2*Math.ceil(t.chartSpaceScale*a.barValueSpacing)-(1*Math.ceil(t.chartSpaceScale*a.barDatasetSpacing)-1)-Math.ceil(t.chartLineScale*a.barStrokeWidth)/2-1,d>=0&&d<=1&&(d=1),d<0&&d>=-1&&(d=-1);var A;1*a.maxBarWidth>0&&d>1*a.maxBarWidth?(A=(d-1*a.maxBarWidth)/2,d=1*a.maxBarWidth):A=0,o();var f=i(0,g,s);initPassVariableData_part2(u,e,a,t,S.logarithm1,S.logarithm2,{yAxisPosX:c,additionalSpaceBetweenBars:A,xAxisPosY:h,barWidth:d,zeroY:f,scaleHop:s,valueHop:r,calculatedScale:g}),animationLoop(a,p.legendMsr,n,l,t,p.clrx,p.clry,p.clrwidth,p.clrheight,c+p.availableWidth/2,h-p.availableHeight/2,c,h,e,u)}else testRedraw(t,e,a),"function"!=typeof a.onAnimationComplete||1!=a.alwaysRunFunctionAtCompletion&&1!=t.runanimationcompletefunction||(a.onAnimationComplete(t,a,e,1,0,u),t.runanimationcompletefunction=!1),t.firstPass=9,close_result(t);return{data:e,config:a,ctx:t}}},Bar=function(e,a,t){function i(i){var n,o,r,g,A,f,m,P,M,y,v,L;for(f=0;f<e.datasets.length;f++)if("Line"!=e.datasets[f].type)for(m=0;m<e.datasets[f].data.length;m++)0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,S,e.datasets[f].displayData,a.displayData,"displayData",f,m,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,S,e.displayData,a.displayData,"displayData",m,-1,{nullvalue:null})&&(t.save(),t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",t,e,S,e.datasets[f].barStrokeWidth,a.barStrokeWidth,"barStrokeWidth",f,m,{animationValue:P,xPosLeft:S[f][m].xPosLeft,yPosBottom:S[f][m].yPosBottom,xPosRight:S[f][m].xPosLeft+p,yPosTop:S[f][m].yPosBottom-A})),"undefined"!=typeof e.datasets[f].data[m]&&(Math.abs(e.datasets[f].data[m])>=a.zeroValue||1==a.showZeroValue)&&(P=animationCorrection(i,e,a,f,m,!1).animVal,P>1&&(P-=1),A=1*e.datasets[f].data[m]>=0?P*S[f][m].barHeight-Math.ceil(t.chartLineScale*t.lineWidth)/2:P*S[f][m].barHeight+Math.ceil(t.chartLineScale*t.lineWidth)/2,t.fillStyle=setOptionValue(!0,!0,1,"COLOR",t,e,S,e.datasets[f].fillColor,a.defaultFillColor,"fillColor",f,m,{animationValue:P,xPosLeft:S[f][m].xPosLeft,yPosBottom:S[f][m].yPosBottom,xPosRight:S[f][m].xPosLeft+p,yPosTop:S[f][m].yPosBottom-A}),t.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",t,e,S,e.datasets[f].strokeColor,a.defaultStrokeColor,"strokeColor",f,m,{nullvalue:null}),l(t,S[f][m].xPosLeft,S[f][m].yPosBottom,p,A,a.barShowStroke,a.barBorderRadius,f,m,e.datasets[f].data[m]<0?-1:1),i>=a.animationStopValue&&(t.pieces_drawn.rectangles++,t.pieces_drawn.total_drawn++)),t.restore());for(f=0;f<e.datasets.length;f++)if("Line"!=e.datasets[f].type)for(m=0;m<e.datasets[f].data.length;m++)0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,S,e.datasets[f].displayData,a.displayData,"displayData",f,m,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,S,e.displayData,a.displayData,"displayData",m,-1,{nullvalue:null})&&(r=setOptionValue(!0,!0,1,"COMPLEMENTARYBAR",t,e,S,e.datasets[f].complementaryBar,a.complementaryBar,"complementaryBar",f,m,{nullvalue:null}),0!=r&&(t.save(),t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",t,e,S,e.datasets[f].barStrokeWidth,a.barStrokeWidth,"barStrokeWidth",f,m,{animationValue:P,xPosLeft:S[f][m].xPosLeft,yPosBottom:S[f][m].yPosBottom,xPosRight:S[f][m].xPosLeft+p,yPosTop:S[f][m].yPosBottom-A})),P=animationCorrection(i,e,a,f,m,!1).animVal,P>1&&(P-=1),A="undefined"!=typeof e.datasets[f].data[m]?1*e.datasets[f].data[m]>=0?P*S[f][m].barHeight-Math.ceil(t.chartLineScale*t.lineWidth)/2:P*S[f][m].barHeight+Math.ceil(t.chartLineScale*t.lineWidth)/2:0,M=u.clrheight-Math.ceil(t.chartLineScale*(a.scaleTickSizeTop+a.scaleTickSizeBottom)),y=S[f][m].yPosBottom-u.clry-Math.ceil(t.chartLineScale*a.scaleTickSizeTop),v=M-y,1*e.datasets[f].data[m]<0?(g=-(v+A)+3*(t.lineWidth/2),otherBarHeight2=y-3*(t.lineWidth/2),L=-(t.lineWidth/2)):(g=y-A-3*(t.lineWidth/2),otherBarHeight2=-(v-3*(t.lineWidth/2)),L=+(t.lineWidth/2)),t.fillStyle=setOptionValue(!0,!0,1,"COMPLEMENTARYCOLOR",t,e,S,e.datasets[f].complementaryColor,a.complementaryColor,"complementaryColor",f,m,{animationValue:P,xPosLeft:S[f][m].xPosLeft,yPosBottom:S[f][m].yPosBottom-A,xPosRight:S[f][m].xPosLeft+p,yPosTop:S[f][m].yPosBottom-A-g}),t.strokeStyle=setOptionValue(!0,!0,1,"COMPLEMENTARYSTROKECOLOR",t,e,S,e.datasets[f].complementaryStrokeColor,a.complementaryStrokeColor,"strokeColor",f,m,{nullvalue:null}),l(t,S[f][m].xPosLeft,S[f][m].yPosBottom-A-2*L,p,g,a.barShowStroke,a.barBorderRadius,f,m,e.datasets[f].data[m]<0?-1:1),a.complementaryBarFullHeight&&l(t,S[f][m].xPosLeft,S[f][m].yPosBottom+2*L,p,otherBarHeight2,a.barShowStroke,a.barBorderRadius,f,m,e.datasets[f].data[m]<0?-1:1),t.restore()));if(drawLinesDataset(i,e,a,t,S,{xAxisPosY:d,yAxisPosX:h,valueHop:c,nbValueHop:e.labels.length}),i>=a.animationStopValue)for(f=0;f<e.datasets.length;f++)for(m=0;m<e.datasets[f].data.length;m++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,S,e.datasets[f].displayData,a.displayData,"displayData",f,m,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,S,e.displayData,a.displayData,"displayData",m,-1,{nullvalue:null})&&"undefined"!=typeof e.datasets[f].data[m]&&"Line"!=e.datasets[f].type&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["RECT",f,m,S,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",t,e,S,e.datasets[f].annotateDisplay,a.annotateDisplay,"annotateDisplay",f,m,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",t,e,S,e.datasets[f].inGraphDataShow,a.inGraphDataShow,"inGraphDataShow",f,m,{nullValue:!0}))){t.save(),t.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,S,void 0,a.inGraphDataAlign,"inGraphDataAlign",f,m,{nullValue:!0}),t.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,S,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",f,m,{nullValue:!0}),t.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",t,e,S,void 0,a.inGraphDataFontStyle,"inGraphDataFontStyle",f,m,{nullValue:!0})+" "+setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,S,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",f,m,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",t,e,S,void 0,a.inGraphDataFontFamily,"inGraphDataFontFamily",f,m,{nullValue:!0}),t.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",t,e,S,void 0,a.inGraphDataFontColor,"inGraphDataFontColor",f,m,{nullValue:!0}),n=S[f][m].yPosBottom,o=S[f][m].yPosTop,t.beginPath();var b=0,O=0;1==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,S,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",f,m,{nullValue:!0})?O=S[f][m].xPosLeft+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,S,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",f,m,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,S,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",f,m,{nullValue:!0})?O=S[f][m].xPosLeft+p/2+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,S,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",f,m,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,S,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",f,m,{nullValue:!0})&&(O=S[f][m].xPosLeft+p+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,S,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",f,m,{nullValue:!0})),1==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,S,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",f,m,{nullValue:!0})?b=S[f][m].yPosBottom-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,S,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",f,m,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,S,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",f,m,{nullValue:!0})?b=(S[f][m].yPosBottom+S[f][m].yPosTop)/2-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,S,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",f,m,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,S,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",f,m,{nullValue:!0})&&(b=S[f][m].yPosTop-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,S,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",f,m,{nullValue:!0})),t.translate(O,b);var I=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",t,e,S,void 0,a.inGraphDataTmpl,"inGraphDataTmpl",f,m,{nullValue:!0}),S[f][m],a);rotateVal=setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,S,void 0,a.inGraphDataRotate,"inGraphDataRotate",f,m,{nullValue:!0})*(Math.PI/180),t.rotate(rotateVal),setTextBordersAndBackground(t,I,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,S,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",f,m,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",t,e,S,void 0,a.inGraphDataBorders,"inGraphDataBorders",f,m,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",t,e,S,void 0,a.inGraphDataBordersSelection,"inGraphDataBordersSelection",f,m,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",t,e,S,void 0,a.inGraphDataBordersColor,"inGraphDataBordersColor",f,m,{nullValue:!0}),setOptionValue(!0,!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,e,S,void 0,a.inGraphDataBordersWidth,"inGraphDataBordersWidth",f,m,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,e,S,void 0,a.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",f,m,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,e,S,void 0,a.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",f,m,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",t,e,S,void 0,a.inGraphDataBordersStyle,"inGraphDataBordersStyle",f,m,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,e,S,void 0,a.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",f,m,{nullValue:!0}),"INGRAPHDATA",a.inGraphDataBordersRadius),t.fillTextMultiLine(I,0,0,t.textBaseline,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,S,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",f,m,{nullValue:!0}),!0,a.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",rotateVal,O,b,f,m),t.restore()}i>=1&&"function"==typeof drawMath&&drawMath(t,a,e,u,{xAxisPosY:d,yAxisPosX:h,valueHop:c,scaleHop:s,zeroY:D,calculatedScale:x,calculateOffset:calculateOffset,additionalSpaceBetweenBars:T,barWidth:p})}function l(t,i,l,n,o,s,r,c,h,d){t.beginPath(),t.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"STROKESTYLE",t,e,S,e.datasets[c].datasetStrokeStyle,a.datasetStrokeStyle,"datasetStrokeStyle",c,h,{nullvalue:null}))),t.moveTo(i+n/2,l),t.lineTo(i+n,l),t.lineTo(i+n,l-o+d*r),t.quadraticCurveTo(i+n,l-o,i+n-r,l-o),t.lineTo(i+r,l-o),t.quadraticCurveTo(i,l-o,i,l-o+d*r),t.lineTo(i,l),t.lineTo(i+n/2,l),s&&t.stroke(),t.closePath(),t.fill(),t.setLineDash([])}function n(){drawGridScale(t,e,a,u,h,d,D,c,s,f.nbOfStepsAxis1,e.labels.length+1)}function o(){var i,l;if(t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily,a.xAxisTop||a.xAxisBottom){if(t.textBaseline="top",t.fillStyle=a.scaleFontColor,a.xAxisBottom){u.rotateLabels>90?(t.save(),t.textAlign="left"):u.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",l=0,i=0;for(var n=0;n<e.labels.length;n++)showLabels(t,e,a,n)&&(t.save(),u.rotateLabels>0?(t.translate(h+n*c+c/2-u.highestXLabel/2,u.xLabelPos),t.rotate(-((u.rotateLabels+180*(u.rotateLabels>90))*(Math.PI/180))),t.fillTextMultiLine(fmtChartJS(a,e.labels[n],a.fmtXLabel),0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(u.rotateLabels*(Math.PI/180)),h+n*c+c/2-u.highestXLabel/2,u.xLabelPos,n,-1)):t.fillTextMultiLine(fmtChartJS(a,e.labels[n],a.fmtXLabel),h+n*c+c/2+i,u.xLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,n,-1),t.restore())}if(a.xAxisTop){u.rotateTLabels>90?(t.save(),t.textAlign="left"):u.rotateTLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center";var o;o="object"==typeof e.labels2?e.labels2:e.labels;for(var n=0;n<o.length;n++)showLabels(t,e,a,n)&&(t.save(),u.rotateTLabels>0?(t.translate(h+n*c+c/2-u.highestTXLabel/2,u.xTLabelPos),t.rotate(-((u.rotateTLabels+180*(u.rotateTLabels>90))*(Math.PI/180))),t.fillTextMultiLine(fmtChartJS(a,o[n],a.fmtXLabel),0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(u.rotateLabels*(Math.PI/180)),h+n*c+c/2-u.highestXLabel/2,u.xLabelPos,n,-1)):t.fillTextMultiLine(fmtChartJS(a,o[n],a.fmtXLabel),h+n*c+c/2,u.xTLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,n,-1),t.restore())}}t.textAlign="right",t.textBaseline="middle",l=0,i=0,1==a.yAxisMiddle&&(i=s/2,l=1);for(var p=a.showYAxisMin?-1:0;p<f.nbOfStepsAxis1-l;p++)a.scaleShowLabels&&showYLabels(t,e,a,p+1,f.labels1[p+1])&&(a.yAxisLeft&&(t.textAlign="right",t.fillTextMultiLine(f.labels1[p+1],h-(Math.ceil(t.chartLineScale*a.scaleTickSizeLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),d-(p+1)*s-i,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,p)),!a.yAxisRight||f.dbAxis||a.forceSecondScale||(t.textAlign="left",t.fillTextMultiLine(f.labels1[p+1],h+u.availableWidth+(Math.ceil(t.chartLineScale*a.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),d-(p+1)*s-i,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,p)));if(a.yAxisRight&&(f.dbAxis||a.forceSecondScale))for(l=0,i=0,1==a.yAxisMiddle&&(i=s/2,l=1),p=a.showYAxisMin?-1:0;p<f.nbOfStepsAxis2-l;p++)a.scaleShowLabels&&(t.textAlign="left",t.fillTextMultiLine(f.labels2[p+1],h+u.availableWidth+(Math.ceil(t.chartLineScale*a.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight))-i,d-(p+1)*r,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,p))}var s,r,c,h,d,p,u;if(t.tpchart="Bar",t.tpdata=0,init_and_start(t,e,a)){var S=initPassVariableData_part1(e,a,t);init_result(t,e,S);for(var g=e.datasets.length,A=0;A<e.datasets.length;A++)"Line"==e.datasets[A].type?(S[A][0].tpchart="Line",g--):S[A][0].tpchart="Bar";u=setMeasures(e,a,t,t.canvas.height,t.canvas.width,"nihil","nihil",!0,!1,!0,!0,"Bar");var f=computeScale(!0,!0,!0,!0,!0,!1,e,a,t,S,u.availableHeight);if(f.labels1=[],f.labels2=[],populateLabels(f.logarithm1,a.fmtYLabel,a,f.labelTemplateString1,f.labels1,f.nbOfStepsAxis1,f.minAxis1,f.maxAxis1,f.stepWidthAxis1),populateLabels(f.logarithm2,a.fmtYLabel2,a,f.labelTemplateString2,f.labels2,f.nbOfStepsAxis2,f.minAxis2,f.maxAxis2,f.stepWidthAxis2),f.maxSteps>0&&f.minSteps>0){var x={steps:f.nbOfStepsAxis1,stepValue:f.stepWidthAxis1,graphMin:f.minAxis1,graphMax:f.minAxis1+f.nbOfStepsAxis1*f.stepWidthAxis1,labels:f.labels1},m={steps:f.nbOfStepsAxis2,stepValue:f.stepWidthAxis2,graphMin:f.minAxis2,graphMax:f.minAxis2+f.nbOfStepsAxis2*f.stepWidthAxis2,labels:f.labels2};u=setMeasures(e,a,t,t.canvas.height,t.canvas.width,f.labels1,f.labels2,!0,!1,!0,!0,"Bar");u.availableHeight;u.availableHeight=u.availableHeight-Math.ceil(t.chartLineScale*a.scaleTickSizeBottom)-Math.ceil(t.chartLineScale*a.scaleTickSizeTop),u.availableWidth=u.availableWidth-Math.ceil(t.chartLineScale*a.scaleTickSizeLeft)-Math.ceil(t.chartLineScale*a.scaleTickSizeRight),s=Math.floor(u.availableHeight/f.nbOfStepsAxis1),"undefined"!=f.nbOfStepsAxis2&&f.nbOfStepsAxis2>0&&(r=Math.floor(u.availableHeight/f.nbOfStepsAxis2)),c=Math.floor(u.availableWidth/e.labels.length),(0==c||a.fullWidthGraph)&&(c=u.availableWidth/e.labels.length),u.topNotUsableHeight+=u.availableHeight-f.nbOfStepsAxis1*s,u.rightNotUsableWidth+=u.availableWidth-e.labels.length*c,u.clrwidth=u.clrwidth-(u.availableWidth-e.labels.length*c),u.availableWidth=e.labels.length*c,u.availableHeight=f.nbOfStepsAxis1*s,h=u.leftNotUsableWidth+Math.ceil(t.chartLineScale*a.scaleTickSizeLeft),d=u.topNotUsableHeight+u.availableHeight+Math.ceil(t.chartLineScale*a.scaleTickSizeTop),p=(c-2*Math.ceil(t.chartLineScale*a.scaleGridLineWidth)-2*Math.ceil(t.chartSpaceScale*a.barValueSpacing)-(Math.ceil(t.chartSpaceScale*a.barDatasetSpacing)*g-1)-(Math.ceil(t.chartLineScale*a.barStrokeWidth)/2*g-1))/g,p>=0&&p<=1&&(p=1),p<0&&p>=-1&&(p=-1);var T;1*a.maxBarWidth>0&&p>1*a.maxBarWidth?(T=g*(p-1*a.maxBarWidth)/2,p=1*a.maxBarWidth):T=0;var P=0,D=calculateOffset(f.logarithm1,0,x,s);P=calculateOffset(f.logarithm2,0,m,r),initPassVariableData_part2(S,e,a,t,f.logarithm1,f.logarithm2,{msr:u,yAxisPosX:h,xAxisPosY:d,valueHop:c,nbValueHop:e.labels.length-1,barWidth:p,additionalSpaceBetweenBars:T,zeroY:D,zeroY2:P,calculatedScale:x,calculatedScale2:m,scaleHop:s,scaleHop2:r}),o(),animationLoop(a,u.legendMsr,n,i,t,u.clrx,u.clry,u.clrwidth,u.clrheight,h+u.availableWidth/2,d-u.availableHeight/2,h,d,e,S)}else testRedraw(t,e,a),"function"!=typeof a.onAnimationComplete||1!=a.alwaysRunFunctionAtCompletion&&1!=t.runanimationcompletefunction||(a.onAnimationComplete(t,a,e,1,0,S),t.runanimationcompletefunction=!1),t.firstPass=9,close_result(t);return{data:e,config:a,ctx:t}}},HorizontalBar=function(e,a,t){function i(i){var n,o,s,r,c,h,S,g,A,f;for(n=0;n<e.datasets.length;n++)for(o=0;o<e.datasets[n].data.length;o++)0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.datasets[n].displayData,a.displayData,"displayData",n,o,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.displayData,a.displayData,"displayData",o,-1,{nullvalue:null})&&(t.save(),t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",t,e,u,e.datasets[n].barStrokeWidth,a.barStrokeWidth,"barStrokeWidth",n,o,{animationValue:s,xPosLeft:u[n][o].xPosLeft,yPosBottom:u[n][o].yPosBottom,xPosRight:u[n][o].xPosLeft+d,yPosTop:u[n][o].yPosBottom})),s=animationCorrection(i,e,a,n,o,!1).animVal,s>1&&(s-=1),r=1*e.datasets[n].data[o]>=0?s*u[n][o].barWidth-Math.ceil(t.chartLineScale*a.barStrokeWidth)/2:s*u[n][o].barWidth+Math.ceil(t.chartLineScale*a.barStrokeWidth)/2,t.fillStyle=setOptionValue(!0,!0,1,"COLOR",t,e,u,e.datasets[n].fillColor,a.defaultFillColor,"fillColor",n,o,{animationValue:s,xPosLeft:u[n][o].xPosLeft,yPosBottom:u[n][o].yPosBottom,xPosRight:u[n][o].xPosLeft+r,yPosTop:u[n][o].yPosBottom}),t.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",t,e,u,e.datasets[n].strokeColor,a.defaultStrokeColor,"strokeColor",n,o,{nullvalue:null}),"undefined"!=typeof e.datasets[n].data[o]&&(Math.abs(e.datasets[n].data[o])>=a.zeroValue||1==a.showZeroValue)&&(l(t,u[n][o].yPosTop,u[n][o].xPosLeft,d,r,a.barShowStroke,a.barBorderRadius,0,n,o,e.datasets[n].data[o]<0?-1:1),i>=a.animationStopValue&&(t.pieces_drawn.rectangles++,t.pieces_drawn.total_drawn++)),t.restore());for(n=0;n<e.datasets.length;n++)for(o=0;o<e.datasets[n].data.length;o++)0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.datasets[n].displayData,a.displayData,"displayData",n,o,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.displayData,a.displayData,"displayData",o,-1,{nullvalue:null})&&(complementaryBar=setOptionValue(!0,!0,1,"COMPLEMENTARYBAR",t,e,u,e.datasets[n].complementaryBar,a.complementaryBar,"complementaryBar",n,o,{nullvalue:null}),0!=complementaryBar&&(t.save(),t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",t,e,u,e.datasets[n].barStrokeWidth,a.barStrokeWidth,"barStrokeWidth",n,o,{animationValue:s,xPosLeft:u[n][o].xPosLeft,yPosBottom:u[n][o].yPosBottom,xPosRight:u[n][o].xPosLeft+d,yPosTop:u[n][o].yPosBottom-r})),s=animationCorrection(i,e,a,n,o,!1).animVal,s>1&&(s-=1),r=1*e.datasets[n].data[o]>=0?s*u[n][o].barWidth-Math.ceil(t.chartLineScale*a.barStrokeWidth)/2:s*u[n][o].barWidth+Math.ceil(t.chartLineScale*a.barStrokeWidth)/2,c=p.clrwidth-Math.ceil(t.chartLineScale*(a.scaleTickSizeLeft+a.scaleTickSizeRight)),h=u[n][o].xPosLeft-p.clrx-Math.ceil(t.chartLineScale*a.scaleTickSizeRight),S=c-h,1*e.datasets[n].data[o]<0?(g=-(p.clrwidth-(u[n][o].xPosLeft-p.clrx-r))+Math.ceil(t.chartLineScale*a.scaleTickSizeLeft),g=-(S+r)+3*(t.lineWidth/2),A=h-3*(t.lineWidth/2),f=-(t.lineWidth/2)):(g=p.clrwidth-(u[n][o].xPosLeft-p.clrx+r+t.lineWidth),g=h-r-3*(t.lineWidth/2),A=-(S-3*(t.lineWidth/2)),f=+(t.lineWidth/2)),t.fillStyle=setOptionValue(!0,!0,1,"COMPLEMENTARYCOLOR",t,e,u,e.datasets[n].complementaryColor,a.complementaryColor,"complementaryColor",n,o,{animationValue:s,xPosLeft:u[n][o].xPosLeft+r,yPosBottom:u[n][o].yPosBottom,xPosRight:u[n][o].xPosLeft+r+g,yPosTop:u[n][o].yPosBottom}),t.strokeStyle=setOptionValue(!0,!0,1,"COMPLEMENTARYSTROKECOLOR",t,e,u,e.datasets[n].complementaryStrokeColor,a.complementaryStrokeColor,"strokeColor",n,o,{nullvalue:null}),l(t,u[n][o].yPosTop,u[n][o].xPosLeft+r+2*f,d,g,a.barShowStroke,a.barBorderRadius,0,n,o,e.datasets[n].data[o]<0?-1:1),i>=a.animationStopValue&&(t.pieces_drawn.rectangles++,t.pieces_drawn.total_drawn++),a.complementaryBarFullHeight&&l(t,u[n][o].yPosTop,u[n][o].xPosLeft-2*f,d,A,a.barShowStroke,a.barBorderRadius,0,n,o,e.datasets[n].data[o]<0?-1:1),t.restore()));if(i>=a.animationStopValue)for(n=0;n<e.datasets.length;n++)for(o=0;o<e.datasets[n].data.length;o++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.datasets[n].displayData,a.displayData,"displayData",n,o,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",t,e,u,e.displayData,a.displayData,"displayData",o,-1,{nullvalue:null})&&"undefined"!=typeof e.datasets[n].data[o]&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["RECT",n,o,u,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",t,e,u,e.datasets[n].annotateDisplay,a.annotateDisplay,"annotateDisplay",n,o,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",t,e,u,e.datasets[n].inGraphDataShow,a.inGraphDataShow,"inGraphDataShow",n,o,{nullValue:!0}))){t.save(),t.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",t,e,u,void 0,a.inGraphDataAlign,"inGraphDataAlign",n,o,{nullValue:!0}),t.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",t,e,u,void 0,a.inGraphDataVAlign,"inGraphDataVAlign",n,o,{nullValue:!0}),t.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",t,e,u,void 0,a.inGraphDataFontStyle,"inGraphDataFontStyle",n,o,{nullValue:!0})+" "+setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,u,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",n,o,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",t,e,u,void 0,a.inGraphDataFontFamily,"inGraphDataFontFamily",n,o,{nullValue:!0}),t.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",t,e,u,void 0,a.inGraphDataFontColor,"inGraphDataFontColor",n,o,{nullValue:!0}),t.beginPath();var x=0,m=0;1==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,u,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",n,o,{nullValue:!0})?x=u[n][o].yPosTop-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,u,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",n,o,{nullValue:!0})+d:2==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,u,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",n,o,{nullValue:!0})?x=u[n][o].yPosTop+d/2-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,u,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",n,o,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",t,e,u,void 0,a.inGraphDataYPosition,"inGraphDataYPosition",n,o,{nullValue:!0})&&(x=u[n][o].yPosTop-setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,e,u,void 0,a.inGraphDataPaddingY,"inGraphDataPaddingY",n,o,{nullValue:!0})),1==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,u,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",n,o,{nullValue:!0})?m=u[n][o].xPosLeft+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,u,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",n,o,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,u,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",n,o,{nullValue:!0})?m=(u[n][o].xPosLeft+u[n][o].xPosRight)/2+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,u,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",n,o,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",t,e,u,void 0,a.inGraphDataXPosition,"inGraphDataXPosition",n,o,{nullValue:!0})&&(m=u[n][o].xPosRight+setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,e,u,void 0,a.inGraphDataPaddingX,"inGraphDataPaddingX",n,o,{nullValue:!0})),t.translate(m,x);var T=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",t,e,u,void 0,a.inGraphDataTmpl,"inGraphDataTmpl",n,o,{nullValue:!0}),u[n][o],a),P=setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",t,e,u,void 0,a.inGraphDataRotate,"inGraphDataRotate",n,o,{nullValue:!0})*(Math.PI/180);t.rotate(P),setTextBordersAndBackground(t,T,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,u,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",n,o,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",t,e,u,void 0,a.inGraphDataBorders,"inGraphDataBorders",n,o,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",t,e,u,void 0,a.inGraphDataBordersSelection,"inGraphDataBordersSelection",n,o,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",t,e,u,void 0,a.inGraphDataBordersColor,"inGraphDataBordersColor",n,o,{nullValue:!0}),setOptionValue(!0,!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,e,u,void 0,a.inGraphDataBordersWidth,"inGraphDataBordersWidth",n,o,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,e,u,void 0,a.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",n,o,{nullValue:!0}),setOptionValue(!0,!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,e,u,void 0,a.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",n,o,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",t,e,u,void 0,a.inGraphDataBordersStyle,"inGraphDataBordersStyle",n,o,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,e,u,void 0,a.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",n,o,{nullValue:!0}),"INGRAPHDATA",a.inGraphDataBordersRadius),t.fillTextMultiLine(T,0,0,t.textBaseline,setOptionValue(!0,!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,e,u,void 0,a.inGraphDataFontSize,"inGraphDataFontSize",n,o,{nullValue:!0}),!0,a.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",P,m,x,n,o),t.restore()}}function l(t,i,l,n,o,s,r,c,h,d,p){t.beginPath(),t.moveTo(l+c,i),t.lineTo(l+c,i+n),t.lineTo(l+o-p*r,i+n),t.quadraticCurveTo(l+o,i+n,l+o,i+n-r),t.lineTo(l+o,i+r),t.quadraticCurveTo(l+o,i,l+o-p*r,i),t.lineTo(l+c,i),t.quadraticCurveTo(l+c,i,l+c,i+n),s&&(t.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"STROKESTYLE",t,e,u,e.datasets[h].datasetStrokeStyle,a.datasetStrokeStyle,"datasetStrokeStyle",h,d,{nullvalue:null}))),t.stroke(),t.setLineDash([])),t.closePath(),t.fill()}function n(){drawGridScale(t,e,a,p,c,h,f,r,s,e.labels.length+0,S.nbOfStepsAxis1+1)}function o(){if(t.font=a.scaleFontStyle+" "+Math.ceil(t.chartTextScale*a.scaleFontSize).toString()+"px "+a.scaleFontFamily,a.scaleShowLabels&&(a.xAxisTop||a.xAxisBottom)){if(t.textBaseline="top",t.fillStyle=a.scaleFontColor,a.xAxisBottom){p.rotateLabels>90?(t.save(),t.textAlign="left"):p.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",subloop=0,decal=0,1==a.yAxisMiddle&&(decal=r/2,subloop=1);for(var i=a.showYAxisMin?-1:0;i<S.nbOfStepsAxis1-subloop;i++)showYLabels(t,e,a,i+1,S.labels1[i+1])&&(t.save(),p.rotateLabels>0?(t.translate(c+(i+1)*r-p.highestXLabel/2+decal,p.xLabelPos),t.rotate(-((p.rotateLabels+180*(p.rotateLabels>90))*(Math.PI/180))),t.fillTextMultiLine(S.labels1[i+1],0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(p.rotateLabels*(Math.PI/180)),c+(i+1)*r-p.highestXLabel/2,p.xLabelPos,i,-1)):t.fillTextMultiLine(S.labels1[i+1],c+(i+1)*r+decal,p.xLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,i,-1),t.restore())}if(a.xAxisTop){p.rotateTLabels>90?(t.save(),t.textAlign="left"):p.rotateTLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",subloop=0,decal=0,1==a.yAxisMiddle&&(decal=r/2,subloop=1);for(var i=a.showYAxisMin?-1:0;i<S.nbOfStepsAxis1-subloop;i++)showYLabels(t,e,a,i+1,S.labels1[i+1])&&(t.save(),p.rotateTLabels>0?(t.translate(c+(i+1)*r-p.highestTXLabel/2+decal,p.xTLabelPos),t.rotate(-((p.rotateTLabels+180*(p.rotateTLabels>90))*(Math.PI/180))),t.fillTextMultiLine(S.labels1[i+1],0,0,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(p.rotateLabels*(Math.PI/180)),c+(i+1)*r-p.highestXLabel/2,p.xLabelPos,i,-1)):t.fillTextMultiLine(S.labels1[i+1],c+(i+1)*r+decal,p.xTLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,i,-1),
t.restore())}}t.textAlign="right",t.textBaseline="middle";for(var l=0;l<e.labels.length;l++)showLabels(t,e,a,l)&&(a.yAxisLeft&&(t.textAlign="right",t.fillTextMultiLine(fmtChartJS(a,e.labels[l],a.fmtXLabel),c-(Math.ceil(t.chartLineScale*a.scaleTickSizeLeft)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),h-l*s-s/2,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,l)),a.yAxisRight&&(t.textAlign="left",t.fillTextMultiLine(fmtChartJS(a,e.labels[l],a.fmtXLabel),c+p.availableWidth+(Math.ceil(t.chartLineScale*a.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*a.yAxisSpaceRight)),h-l*s-s/2,t.textBaseline,Math.ceil(t.chartTextScale*a.scaleFontSize),!0,a.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,l)))}var s,r,c,h,d,p;if(t.tpchart="HorizontalBar",t.tpdata=0,init_and_start(t,e,a)){a.reverseOrder&&"undefined"==typeof t.reversed&&(t.reversed=!0,e=reverseData(e));var u=initPassVariableData_part1(e,a,t);init_result(t,e,u),p=setMeasures(e,a,t,t.canvas.height,t.canvas.width,"nihil","nihil",!0,!0,!0,!0,"StackedBar");var S=computeScale(!0,!0,!1,!1,!1,!1,e,a,t,u,p.availableHeight);if(S.labels1=[],S.labels2=[],populateLabels(S.logarithm1,a.fmtYLabel,a,S.labelTemplateString1,S.labels1,S.nbOfStepsAxis1,S.minAxis1,S.maxAxis1,S.stepWidthAxis1),populateLabels(S.logarithm2,a.fmtYLabel2,a,S.labelTemplateString2,S.labels2,S.nbOfStepsAxis2,S.minAxis2,S.maxAxis2,S.stepWidthAxis2),S.maxSteps>0&&S.minSteps>0){var g={steps:S.nbOfStepsAxis1,stepValue:S.stepWidthAxis1,graphMin:S.minAxis1,graphMax:S.minAxis1+S.nbOfStepsAxis1*S.stepWidthAxis1,labels:S.labels1};p=setMeasures(e,a,t,t.canvas.height,t.canvas.width,S.labels1,S.labels1,!0,!0,!0,!0,"HorizontalBar"),p.availableHeight=p.availableHeight-Math.ceil(t.chartLineScale*a.scaleTickSizeBottom)-Math.ceil(t.chartLineScale*a.scaleTickSizeTop),p.availableWidth=p.availableWidth-Math.ceil(t.chartLineScale*a.scaleTickSizeLeft)-Math.ceil(t.chartLineScale*a.scaleTickSizeRight),s=Math.floor(p.availableHeight/e.labels.length),r=Math.floor(p.availableWidth/S.nbOfStepsAxis1),(0==r||a.fullWidthGraph)&&(r=p.availableWidth/S.nbOfStepsAxis1),p.clrwidth=p.clrwidth-(p.availableWidth-S.nbOfStepsAxis1*r),p.topNotUsableHeight+=p.availableHeight-e.labels.length*s,p.rightNotUsableWidth+=p.availableWidth-S.nbOfStepsAxis1*r,p.availableWidth=S.nbOfStepsAxis1*r,p.availableHeight=e.labels.length*s,c=p.leftNotUsableWidth+Math.ceil(t.chartLineScale*a.scaleTickSizeLeft),h=p.topNotUsableHeight+p.availableHeight+Math.ceil(t.chartLineScale*a.scaleTickSizeTop),d=(s-2*Math.ceil(t.chartLineScale*a.scaleGridLineWidth)-2*Math.ceil(t.chartSpaceScale*a.barValueSpacing)-(Math.ceil(t.chartSpaceScale*a.barDatasetSpacing)*e.datasets.length-1)-(Math.ceil(t.chartLineScale*a.barStrokeWidth)/2*e.datasets.length-1))/e.datasets.length,d>=0&&d<=1&&(d=1),d<0&&d>=-1&&(d=-1);var A;1*a.maxBarWidth>0&&d>1*a.maxBarWidth?(A=e.datasets.length*(d-1*a.maxBarWidth)/2,d=1*a.maxBarWidth):A=0;var f=0;f=calculateOffset(S.logarithm1,0,g,r),o(),initPassVariableData_part2(u,e,a,t,S.logarithm1,S.logarithm2,{yAxisPosX:c,xAxisPosY:h,barWidth:d,additionalSpaceBetweenBars:A,zeroY:f,scaleHop:s,valueHop:r,calculatedScale:g}),animationLoop(a,p.legendMsr,n,i,t,p.clrx,p.clry,p.clrwidth,p.clrheight,c+p.availableWidth/2,h-p.availableHeight/2,c,h,e,u)}else testRedraw(t,e,a),"function"!=typeof a.onAnimationComplete||1!=a.alwaysRunFunctionAtCompletion&&1!=t.runanimationcompletefunction||(a.onAnimationComplete(t,a,e,1,0,u),t.runanimationcompletefunction=!1),t.firstPass=9,close_result(t);return{data:e,config:a,ctx:t}}},requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),requestAnimFrameSetTimeOut=function(){return function(e){window.setTimeout(e,1e3/60)}}(),cache={}};