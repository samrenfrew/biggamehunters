function cLass(e){wow_class=e}function rAce(e){wow_race=e}function fetchuser(e){if(console.log(e),wow_data=e,null!=e.name){helper_text(),$("#bnet_auth").addClass("bg-success"),$("#bnet_fetch .help-block").hide(),$("#match_found").show();var a,t;$("#cName").val(e.name),$.each(wow_class.classes,function(t,n){e.class==n.id&&(a=n.name,$("#cClass").val(n.name))}),$.each(wow_race.races,function(a,n){e.race==n.id&&(t=n.name,$("#cRace").val(n.name))}),$("#match_name").html(e.name+", "+a+" (Level "+e.level+")"),$("#cIlevel").val(e.items.averageItemLevel),0==e.faction?$("#user_faction").html("Alliance"):$("#user_faction").html("Horde"),$("#cAchi").val(e.achievementPoints);var n,c=["Engineering","Herbalism","Mining","Leatherworking","Tailoring","Jewelcrafting","Inscription","Enchanting","Alchemy","Blacksmithing"],l=!1;$.each(e.professions.primary,function(e,a){-1!=$.inArray(a.name,c)&&(0==l?l=a.name:n=a.name)}),$("#cProfPri").val(l),$("#cProfSec").val(n),$("#cArmory").val("https://worldofwarcraft.com/en-gb/character/"+e.realm+"/"+e.name),-1!=$.inArray(12536,e.achievements.achievementsCompleted)?$("#cAOTC_u").val("Yes"):$("#cAOTC_u").val("No"),0!=$(e.guild).length?$("#cGuild").val(e.guild.name+" - "+e.guild.realm):$("#cGuild").val("None")}else 504==e.code?(helper_text(),$("#bnet_auth").addClass("bg-warning"),$("#bnet_fetch .help-block").hide(),$("#error_504").show()):503==e.code&&(helper_text(),$("#bnet_auth").addClass("bg-warning"),$("#bnet_fetch .help-block").hide(),$("#error_503").show())}function helper_text(){$("#bnet_auth").removeClass("bg-success"),$("#bnet_auth").removeClass("bg-warning"),$("#bnet_auth").removeClass("bg-danger")}var wow_data;$(function(){$("#fetch").click(function(){var e=$("#name").val(),a=$("#realm").val(),t=Ladda.create(this);t.start(),$.ajax({url:"https://eu.api.battle.net/wow/character/"+a+"/"+e+"?jsonp=fetchuser&fields=guild+professions+progression+items+achievements&locale=en_GB&apikey=9tdd7cvwkq922fz7a6438wvvftpf35db",dataType:"jsonp",type:"GET",success:function(e){},statusCode:{404:function(){helper_text(),$("#bnet_auth").addClass("bg-danger"),$("#bnet_fetch .help-block").hide(),$("#match_not_found").show(),t.stop()},200:function(){t.stop()},504:function(){t.stop()}}})}),$(function(){$('[data-toggle="tooltip"]').tooltip(),Ladda.bind("input[type=submit]")})});