function cLass(e){wow_class=e}function rAce(e){wow_race=e}function fetchuser(e){if(console.log(e),wow_data=e,null!=e.name){helper_text(),$("#bnet_auth").addClass("bg-success"),$("#bnet_fetch .help-block").hide(),$("#match_found").show();var a,n;$("#cName").val(e.name),$.each(wow_class.classes,function(n,t){e.class==t.id&&(a=t.name,$("#cClass").val(t.name))}),$.each(wow_race.races,function(a,t){e.race==t.id&&(n=t.name,$("#cRace").val(t.name))}),$("#match_name").html(e.name+", "+a+" (Level "+e.level+")"),$("#cIlevel").val(e.items.averageItemLevel),0==e.faction?$("#user_faction").html("Alliance"):$("#user_faction").html("Horde"),$("#cAchi").val(e.achievementPoints);var t,c=["Engineering","Herbalism","Mining","Leatherworking","Tailoring","Jewelcrafting","Inscription","Enchanting","Alchemy","Blacksmithing"],o=!1;$.each(e.professions.primary,function(e,a){-1!=$.inArray(a.name,c)&&(0==o?o=a.name:t=a.name)}),$("#cProfPri").val(o),$("#cProfSec").val(t),$("#cArmory").val("https://worldofwarcraft.com/en-gb/character/"+e.realm+"/"+e.name),-1!=$.inArray(12536,e.achievements.achievementsCompleted)?$("#cAOTC_u").val("Yes"):$("#cAOTC_u").val("No"),0!=$(e.guild).length?$("#cGuild").val(e.guild.name+" - "+e.guild.realm):$("#cGuild").val("None")}else 504==e.code?(helper_text(),$("#bnet_auth").addClass("bg-warning"),$("#bnet_fetch .help-block").hide(),$("#error_504").show()):503==e.code&&(helper_text(),$("#bnet_auth").addClass("bg-warning"),$("#bnet_fetch .help-block").hide(),$("#error_503").show())}function helper_text(){$("#bnet_auth").removeClass("bg-success"),$("#bnet_auth").removeClass("bg-warning"),$("#bnet_auth").removeClass("bg-danger")}var wow_data;$(function(){$("#fetch").click(function(){function e(){$.ajax({url:"https://eu.api.blizzard.com/wow/character/"+n+"/"+a+"?jsonp=fetchuser&fields=guild+professions+progression+items+achievements&locale=en_GB&access_token="+token,dataType:"jsonp",type:"GET",success:function(e){},statusCode:{404:function(){helper_text(),$("#bnet_auth").addClass("bg-danger"),$("#bnet_fetch .help-block").hide(),$("#match_not_found").show(),t.stop()},200:function(){t.stop()},504:function(){t.stop()}}})}var a=$("#name").val(),n=$("#realm").val(),t=Ladda.create(this);t.start(),token(e)}),$(function(){$('[data-toggle="tooltip"]').tooltip(),Ladda.bind("input[type=submit]")})});